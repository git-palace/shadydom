{"version":3,"sources":[" [synthetic:base] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:util/polyfill] "," [synthetic:es6/object/setprototypeof] "," [synthetic:es6/symbol] "," [synthetic:es6/array/from] "," [synthetic:es6/util/makeiterator] "," [synthetic:util/owns] "," [synthetic:es6/weakmap] "," [synthetic:es6/map] "," [synthetic:es6/set] ","src/array-splice.js","src/utils.js","src/tree.js","src/distributor.js","src/innerHTML.js","src/element-mixin.js","src/shady.js","src/patch.js","src/event-mixin.js","src/env.js"],"names":["newSplice$$module$$src$array_splice","newSplice","index","removed","addedCount","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","current","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","Array","i","j","equals","north","west","spliceOperationsFromEditDistances","length","edits","push","northWest","min","reverse","calcSplices","prefixCount","suffixCount","minLength","Math","sharedPrefix","sharedSuffix","splice","ops","undefined","splices","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","calculateSplices$$module$$src$array_splice","module$$src$array_splice","settings","window","ShadyDOM","hasNativeShadowDOM","attachShadow","Element","prototype","getRootNode","Node","inUse","force","isShadyRoot$$module$$src$utils","isShadyRoot","obj","__localName","p","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","matchesSelector$$module$$src$utils","element","selector","call","copyOwnProperty$$module$$src$utils","copyOwnProperty","name","source","target","pd","Object","getOwnPropertyDescriptor","defineProperty","extend$$module$$src$utils","extend","n$","getOwnPropertyNames","n","extendAll$$module$$src$utils","extendAll","sources","mixin$$module$$src$utils","mixin","patchPrototype$$module$$src$utils","patchPrototype","proto","getPrototypeOf","hasOwnProperty","patchProto","create","__sourceProto","__patchProto","setPrototypeOf","unpatchPrototype$$module$$src$utils","unpatchPrototype","common","promish","Promise","resolve","then","cb","twiddle","document","createTextNode","observer","MutationObserver","disconnect","observe","characterData","module$$src$utils","nativeInsertBefore","insertBefore","nativeAppendChild","appendChild","nativeRemoveChild","removeChild","tree","arrayCopyChildNodes","parent","copy","firstChild","nextSibling","arrayCopyChildren","firstElementChild","nextElementSibling","arrayCopy","a$","l","saveChildNodes","node","Logical","Composed","hasParentNode","saveComposedData","__dom","parentNode","hasChildNodes","childNodes","getChildNodes","_getChildNodes","getFirstChild","getNextSibling","getParentNode","getLastChild","lastChild","getPreviousSibling","previousSibling","getFirstElementChild","_getFirstElementChild","nodeType","ELEMENT_NODE","getLastElementChild","_getLastElementChild","getNextElementSibling","_getNextElementSibling","getPreviousElementSibling","_getPreviousElementSibling","c$","patchNode","recordInsertBefore","container","ref_node","DOCUMENT_FRAGMENT_NODE","_linkNode","recordRemoveChild","$parentNode","$childNodes","__patched","$firstChild","$nextSibling","getComposedChildNodes","$lastChild","$previousSibling","lastElementChild","previousElementSibling","clearChildNodes","c","saveParentNode","newChild","refChild","_addChild","currentParent","_removeChild","isFrag","oldParent","descriptors","getNativeProperty$$module$$src$tree","getNativeProperty","property","HTMLElement","get","assertNative$$module$$src$tree","assertNative","tracked","native","console","warn","module$$src$tree","NormalizedEvent","Event","inType","params","e","createEvent","initEvent","bubbles","cancelable","$jscompDefaultExport","constructor","root","insertionPointTag","getInsertionPoints","querySelectorAll","hasInsertionPoint","_insertionPoints","isInsertionPoint","localName","distribute","distributePool","collectPool","host","pool","dirtyRoots","p$","distributeInsertionPoint","shadyRoot","_assignedSlot","insertionPoint","prevAssignedNodes","_assignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","__prevAssignedSlot","distributeNodeInto","children","setDistributedNodesOnInsertionPoint","_fireSlotChange","slot","savePrevious","slotName","getAttribute","trim","child","_distributedNodes","d$","dispatchEvent","isFinalDestination","module$$src$distributor","default","escapeAttrRegExp","escapeDataRegExp","escapeReplace$$module$$src$innerHTML","escapeReplace","escapeAttr$$module$$src$innerHTML","escapeAttr","s","replace","escapeData$$module$$src$innerHTML","escapeData","makeSet$$module$$src$innerHTML","makeSet","arr","set","voidElements","plaintextParents","getOuterHTML$$module$$src$innerHTML","getOuterHTML","composed","tagName","attrs","attributes","attr","value","getInnerHTML","TEXT_NODE","data","COMMENT_NODE","error","Error","getInnerHTML$$module$$src$innerHTML","content","module$$src$innerHTML","mixinImpl","addNode","ownerRoot","ownerShadyRootForNode","__noInsertionPoint","_skipUpdateInsertionPoints","_maybeAddInsertionPoint","ipAdded","_addedNode","handled","_maybeDistribute","removeNode","logicalParent","distributed","maybeDistributeParent","_removeDistributedChildren","getInsertionPointTag","update","_removeOwnerShadyRoot","_removedNode","_scheduleObserver","addedNode","removedNode","addedNodes","removedNodes","schedule","removeNodeFromParent","_hasCachedOwnerRoot","__ownerShadyRoot","documentElement","contains","fragContent","querySelector","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","np","na","hostNeedsDist","ip$","_contains","dc$","assignedNodes","flatten","firstComposedNode","clearNode","maybeDistributeAttributeChange","query","matcher","halter","list","_queryElements","elements","_queryElement","result","activeElementForNode","active","activeElement","activeRoot","nativeCloneNode","cloneNode","nativeImportNode","Document","importNode","nativeSetAttribute","setAttribute","nativeRemoveAttribute","removeAttribute","NodeMixin","defineProperties","parentElement","configurable","assignedSlot","FragmentMixin","replaceChild","deep","nc","externalNode","doc","ownerDocument","isArray","filter","textContent","tc","cn","join","text","innerHTML","d","createElement","ElementMixin","options","shadowRoot","activeElementDescriptor","ActiveElementMixin","UnderActiveElementMixin","_activeElement","Mixins","Fragment","getRootNode$$module$$src$element_mixin","filterMutations$$module$$src$element_mixin","filterMutations","mutations","targetRootNode","mutation","mutationInScope","nodes","from","AsyncObserver","_scheduled","callbacks","Set","flush","takeRecords","forEach","observeChildren","observeChildren$$module$$src$element_mixin","callback","add","_callback","_observer","_node","unobserveChildren","unobserveChildren$$module$$src$element_mixin","handle","delete","size","module$$src$element_mixin","ShadyRoot","frag","createDocumentFragment","__proto__","ShadyFragmentMixin","_init","ShadyMixin","_clean","_hasRendered","_distributor","distributionRoot","_findDistributionRoot","enqueue","render","_elementNeedsDistribution","updateInsertionPoints","compose","forceRender","i$","__insertionPoints","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNodes","distributedNode","next","DocumentFragment","customElements","flushList","scheduled","flushCount","flushMax","enqueue$$module$$src$shady","flush$$module$$src$shady","shift","isFlushedMaxed","module$$src$shady","patchedCount","log","patchImpl","canPatchNode","head","hasPrototypeDescriptors","patch","mixinForObject","mixinForNode","DOCUMENT_NODE","unpatch","patchNode$$module$$src$patch","isNodePatched","unpatchNode$$module$$src$patch","unpatchNode","isNodePatched$$module$$src$patch","module$$src$patch","origAddEventListener","addEventListener","origRemoveEventListener","removeEventListener","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","pathComposer$$module$$src$event_mixin","pathComposer","startNode","composedPath","startRoot","retarget$$module$$src$event_mixin","retarget","refNode","path","refNodePath","ancestor","lastRoot","rootIdx","indexOf","EventMixin","isTrusted","__composed","type","__composedPath","__target","currentTarget","relatedTarget","__relatedTarget","__relatedTargetComposedPath","stopPropagation","__propagationStopped","stopImmediatePropagation","__immediatePropagationStopped","mixinComposedFlag$$module$$src$event_mixin","mixinComposedFlag","Base","klazz","event","nonBubblingEventsToRetarget","fireHandlers$$module$$src$event_mixin","fireHandlers","phase","hs","__handlers","fn","retargetNonBubblingEvent$$module$$src$event_mixin","retargetNonBubblingEvent","BUBBLING_PHASE","shouldCapture$$module$$src$event_mixin","shouldCapture","optionsOrCapture","capture","addEventListener$$module$$src$event_mixin","__eventListenerCount","wrappedFn","eventPhase","__eventWrapper","bubble","removeEventListener$$module$$src$event_mixin","wrapper","idx","activateFocusEventOverrides$$module$$src$event_mixin","activateFocusEventOverrides","ev","OriginalEvent","PatchedEvent","PatchedCustomEvent","CustomEvent","PatchedMouseEvent","MouseEvent","module$$src$event_mixin","isPatched","createRootAndEnsurePatched","Element.prototype.attachShadow","Node.prototype.getRootNode"],"mappings":"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","file":"shadydom.min.js","sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,"/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\nlet ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    // \"Deletion\" columns\n    let rowCount = oldEnd - oldStart + 1;\n    let columnCount = currentEnd - currentStart + 1;\n    let distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (let i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (let j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (let i = 1; i < rowCount; i++) {\n      for (let j = 1; j < columnCount; j++) {\n        if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n          distances[i][j] = distances[i - 1][j - 1];\n        else {\n          let north = distances[i - 1][j] + 1;\n          let west = distances[i][j - 1] + 1;\n          distances[i][j] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances(distances) {\n    let i = distances.length - 1;\n    let j = distances[0].length - 1;\n    let current = distances[i][j];\n    let edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      let northWest = distances[i - 1][j - 1];\n      let west = distances[i - 1][j];\n      let north = distances[i][j - 1];\n\n      let min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    let prefixCount = 0;\n    let suffixCount = 0;\n    let splice;\n\n    let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    let ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    let splices = [];\n    let index = currentStart;\n    let oldIndex = oldStart;\n    for (let i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix(current, old, searchLength) {\n    for (let i = 0; i < searchLength; i++)\n      if (!this.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix(current, old, searchLength) {\n    let index1 = current.length;\n    let index2 = old.length;\n    let count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nexport let calculateSplices = (current, previous) =>\n  ArraySplice.calculateSplices(current, previous);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport let settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\nexport function isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nlet p = Element.prototype;\nlet matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nexport function matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  let pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nexport function extend(target, source) {\n  if (target && source) {\n    let n$ = Object.getOwnPropertyNames(source);\n    for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nexport function extendAll(target, ...sources) {\n  for (let i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nexport function mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nexport function patchPrototype(obj, mixin) {\n  let proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    let patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  Object.setPrototypeOf(obj, proto.__patchProto);\n}\n\nexport function unpatchPrototype(obj) {\n  if (obj.__sourceProto) {\n    Object.setPrototypeOf(obj, obj.__sourceProto);\n  }\n}\n\nexport let common = {};\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nexport let promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  promish = {\n    then: function(cb) {\n      let twiddle = document.createTextNode('');\n      let observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n    }\n  }\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n// TODO(sorvell): circular (patch loads tree and tree loads patch)\n// for now this is stuck on `utils`\n//import {patchNode} from './patch'\nimport * as utils from './utils'\n\n// native add/remove\nlet nativeInsertBefore = Element.prototype.insertBefore;\nlet nativeAppendChild = Element.prototype.appendChild;\nlet nativeRemoveChild = Element.prototype.removeChild;\n\n/**\n * `tree` is a dom manipulation library used by ShadyDom to\n * manipulate composed and logical trees.\n */\nexport let tree = {\n\n  // sad but faster than slice...\n  arrayCopyChildNodes(parent) {\n    let copy=[], i=0;\n    for (let n=parent.firstChild; n; n=n.nextSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopyChildren(parent) {\n    let copy=[], i=0;\n    for (let n=parent.firstElementChild; n; n=n.nextElementSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopy(a$) {\n    let l = a$.length;\n    let copy = new Array(l);\n    for (let i=0; i < l; i++) {\n      copy[i] = a$[i];\n    }\n    return copy;\n  },\n\n  saveChildNodes(node) {\n    tree.Logical.saveChildNodes(node);\n    if (!tree.Composed.hasParentNode(node)) {\n      tree.Composed.saveComposedData(node);\n      //tree.Composed.saveParentNode(node);\n    }\n    tree.Composed.saveChildNodes(node);\n  }\n\n};\n\ntree.Logical = {\n\n  hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.parentNode);\n  },\n\n  hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.childNodes !== undefined);\n  },\n\n  getChildNodes(node) {\n    // note: we're distinguishing here between undefined and false-y:\n    // hasChildNodes uses undefined check to see if this element has logical\n    // children; the false-y check indicates whether or not we should rebuild\n    // the cached childNodes array.\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      tree.Composed.getChildNodes(node);\n  },\n\n  _getChildNodes(node) {\n    if (!node.__dom.childNodes) {\n      node.__dom.childNodes = [];\n      for (let n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        node.__dom.childNodes.push(n);\n      }\n    }\n    return node.__dom.childNodes;\n  },\n\n  // NOTE: __dom can be created under 2 conditions: (1) an element has a\n  // logical tree, or (2) an element is in a logical tree. In case (1), the\n  // element will store firstChild/lastChild, and in case (2), the element\n  // will store parentNode, nextSibling, previousSibling. This means that\n  // the mere existence of __dom is not enough to know if the requested\n  // logical data is available and instead we do an explicit undefined check.\n  getParentNode(node) {\n    return node.__dom && node.__dom.parentNode !== undefined ?\n      node.__dom.parentNode : tree.Composed.getParentNode(node);\n  },\n\n  getFirstChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      node.__dom.firstChild : tree.Composed.getFirstChild(node);\n  },\n\n  getLastChild(node) {\n    return node.__dom && node.__dom.lastChild  !== undefined ?\n      node.__dom.lastChild : tree.Composed.getLastChild(node);\n  },\n\n  getNextSibling(node) {\n    return node.__dom && node.__dom.nextSibling  !== undefined ?\n      node.__dom.nextSibling : tree.Composed.getNextSibling(node);\n  },\n\n  getPreviousSibling(node) {\n    return node.__dom && node.__dom.previousSibling  !== undefined ?\n      node.__dom.previousSibling : tree.Composed.getPreviousSibling(node);\n  },\n\n  getFirstElementChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      this._getFirstElementChild(node) :\n      tree.Composed.getFirstElementChild(node);\n  },\n\n  _getFirstElementChild(node) {\n    let n = node.__dom.firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild(node) {\n    return node.__dom && node.__dom.lastChild !== undefined ?\n      this._getLastElementChild(node) :\n      tree.Composed.getLastElementChild(node);\n  },\n\n  _getLastElementChild(node) {\n    let n = node.__dom.lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling(node) {\n    return node.__dom && node.__dom.nextSibling !== undefined ?\n      this._getNextElementSibling(node) :\n      tree.Composed.getNextElementSibling(node);\n  },\n\n  _getNextElementSibling(node) {\n    let n = node.__dom.nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling(node) {\n    return node.__dom && node.__dom.previousSibling !== undefined ?\n      this._getPreviousElementSibling(node) :\n      tree.Composed.getPreviousElementSibling(node);\n  },\n\n  _getPreviousElementSibling(node) {\n    let n = node.__dom.previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  // Capture the list of light children. It's important to do this before we\n  // start transforming the DOM into \"rendered\" state.\n  // Children may be added to this list dynamically. It will be treated as the\n  // source of truth for the light children of the element. This element's\n  // actual children will be treated as the rendered state once this function\n  // has been called.\n  saveChildNodes(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.firstChild;\n      node.__dom.lastChild = node.lastChild;\n      let c$ = node.__dom.childNodes = tree.arrayCopyChildNodes(node);\n      for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        n.__dom = n.__dom || {};\n        n.__dom.parentNode = node;\n        n.__dom.nextSibling = c$[i+1] || null;\n        n.__dom.previousSibling = c$[i-1] || null;\n        utils.common.patchNode(n);\n      }\n    }\n  },\n\n  // TODO(sorvell): may need to patch saveChildNodes iff the tree has\n  // already been distributed.\n  // NOTE: ensure `node` is patched...\n  recordInsertBefore(node, container, ref_node) {\n    container.__dom.childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      let c$ = tree.arrayCopyChildNodes(node);\n      for (let i=0; i < c$.length; i++) {\n        this._linkNode(c$[i], container, ref_node);\n      }\n      // cleanup logical dom in doc fragment.\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.__dom.lastChild = undefined;\n      node.__dom.childNodes = null;\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode(node, container, ref_node) {\n    utils.common.patchNode(node);\n    ref_node = ref_node || null;\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.previousSibling = ref_node ? ref_node.__dom.previousSibling :\n      container.__dom.lastChild;\n    if (node.__dom.previousSibling) {\n      node.__dom.previousSibling.__dom.nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.nextSibling = ref_node;\n    if (node.__dom.nextSibling) {\n      node.__dom.nextSibling.__dom.previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    } else {\n      container.__dom.lastChild = node;\n      if (!container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  },\n\n  recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.firstChild) {\n      container.__dom.firstChild = node.__dom.nextSibling;\n    }\n    if (node === container.__dom.lastChild) {\n      container.__dom.lastChild = node.__dom.previousSibling;\n    }\n    let p = node.__dom.previousSibling;\n    let n = node.__dom.nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.previousSibling = p;\n    }\n    // When an element is removed, logical data is no longer tracked.\n    // Explicitly set `undefined` here to indicate this. This is disginguished\n    // from `null` which is set if info is null.\n    node.__dom.parentNode = node.__dom.previousSibling =\n      node.__dom.nextSibling = undefined;\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  }\n\n}\n\n\n// TODO(sorvell): composed tree manipulation is made available\n// (1) to maninpulate the composed tree, and (2) to track changes\n// to the tree for optional patching pluggability.\ntree.Composed = {\n\n  hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.$parentNode !== undefined);\n  },\n\n  hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.$childNodes !== undefined);\n  },\n\n  getChildNodes(node) {\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      (!node.__patched && tree.arrayCopy(node.childNodes));\n  },\n\n  _getChildNodes(node) {\n    if (!node.__dom.$childNodes) {\n      node.__dom.$childNodes = [];\n      for (let n=node.__dom.$firstChild; n; n=n.__dom.$nextSibling) {\n        node.__dom.$childNodes.push(n);\n      }\n    }\n    return node.__dom.$childNodes;\n  },\n\n  getComposedChildNodes(node) {\n    return node.__dom.$childNodes;\n  },\n\n  getParentNode(node) {\n    return this.hasParentNode(node) ? node.__dom.$parentNode :\n      (!node.__patched && node.parentNode);\n  },\n\n  getFirstChild(node) {\n    return node.__patched ? node.__dom.$firstChild : node.firstChild;\n  },\n\n  getLastChild(node) {\n    return node.__patched ? node.__dom.$lastChild : node.lastChild;\n  },\n\n  getNextSibling(node) {\n    return node.__patched ? node.__dom.$nextSibling : node.nextSibling;\n  },\n\n  getPreviousSibling(node) {\n    return node.__patched ? node.__dom.$previousSibling : node.previousSibling;\n  },\n\n  getFirstElementChild(node) {\n    return node.__patched ? this._getFirstElementChild(node) :\n      node.firstElementChild;\n  },\n\n  _getFirstElementChild(node) {\n    let n = node.__dom.$firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild(node) {\n    return node.__patched ? this._getLastElementChild(node) :\n      node.lastElementChild;\n  },\n\n  _getLastElementChild(node) {\n    let n = node.__dom.$lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling(node) {\n    return node.__patched ? this._getNextElementSibling(node) :\n      node.nextElementSibling;\n  },\n\n  _getNextElementSibling(node) {\n    let n = node.__dom.$nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling(node) {\n    return node.__patched ? this._getPreviousElementSibling(node) :\n      node.previousElementSibling;\n  },\n\n  _getPreviousElementSibling(node) {\n    let n = node.__dom.$previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  saveChildNodes(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.$firstChild = node.firstChild;\n      node.__dom.$lastChild = node.lastChild;\n      let c$ = node.__dom.$childNodes = tree.arrayCopyChildNodes(node);\n      for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        this.saveComposedData(n);\n      }\n    }\n  },\n\n  saveComposedData(node) {\n    node.__dom = node.__dom || {};\n    if (node.__dom.$parentNode === undefined) {\n      node.__dom.$parentNode = node.parentNode;\n    }\n    if (node.__dom.$nextSibling === undefined) {\n      node.__dom.$nextSibling = node.nextSibling;\n    }\n    if (node.__dom.$previousSibling === undefined) {\n      node.__dom.$previousSibling = node.previousSibling;\n    }\n  },\n\n  recordInsertBefore(node, container, ref_node) {\n    container.__dom.$childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      // TODO(sorvell): remember this for patching:\n      // the act of setting this info can affect patched nodes\n      // getters; therefore capture childNodes before patching.\n      for (let n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        this._linkNode(n, container, ref_node);\n      }\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode(node, container, ref_node) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.$previousSibling = ref_node ? ref_node.__dom.$previousSibling :\n      container.__dom.$lastChild;\n    if (node.__dom.$previousSibling) {\n      node.__dom.$previousSibling.__dom.$nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.$nextSibling = ref_node;\n    if (node.__dom.$nextSibling) {\n      node.__dom.$nextSibling.__dom.$previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.$parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    } else {\n      container.__dom.$lastChild = node;\n      if (!container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.$firstChild) {\n      container.__dom.$firstChild = node.__dom.$nextSibling;\n    }\n    if (node === container.__dom.$lastChild) {\n      container.__dom.$lastChild = node.__dom.$previousSibling;\n    }\n    let p = node.__dom.$previousSibling;\n    let n = node.__dom.$nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.$nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.$previousSibling = p;\n    }\n    node.__dom.$parentNode = node.__dom.$previousSibling =\n      node.__dom.$nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  clearChildNodes(node) {\n    let c$ = this.getChildNodes(node);\n    for (let i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      this.recordRemoveChild(c, node);\n      nativeRemoveChild.call(node, c)\n    }\n  },\n\n  saveParentNode(node) {\n    node.__dom = node.__dom || {};\n    node.__dom.$parentNode = node.parentNode;\n  },\n\n  insertBefore(parentNode, newChild, refChild) {\n    this.saveChildNodes(parentNode);\n    // remove from current location.\n    this._addChild(parentNode, newChild, refChild);\n    return nativeInsertBefore.call(parentNode, newChild, refChild || null);\n  },\n\n  appendChild(parentNode, newChild) {\n    this.saveChildNodes(parentNode);\n    this._addChild(parentNode, newChild);\n    return nativeAppendChild.call(parentNode, newChild);\n  },\n\n  removeChild(parentNode, node) {\n    let currentParent = this.getParentNode(node);\n    this.saveChildNodes(parentNode);\n    this._removeChild(parentNode, node);\n    if (currentParent === parentNode) {\n      return nativeRemoveChild.call(parentNode, node);\n    }\n  },\n\n  _addChild(parentNode, newChild, refChild) {\n    let isFrag = (newChild.nodeType === Node.DOCUMENT_FRAGMENT_NODE);\n    let oldParent = this.getParentNode(newChild);\n    if (oldParent) {\n      this._removeChild(oldParent, newChild);\n    }\n    if (isFrag) {\n      let c$ = this.getChildNodes(newChild);\n      for (let i=0; i < c$.length; i++) {\n        let c = c$[i];\n        // unlink document fragment children\n        this._removeChild(newChild, c);\n        this.recordInsertBefore(c, parentNode, refChild);\n      }\n    } else {\n      this.recordInsertBefore(newChild, parentNode, refChild);\n    }\n  },\n\n  _removeChild(parentNode, node) {\n    this.recordRemoveChild(node, parentNode);\n  }\n\n};\n\n// for testing...\nlet descriptors = {};\nexport function getNativeProperty(element, property) {\n  if (!descriptors[property]) {\n    descriptors[property] = Object.getOwnPropertyDescriptor(\n      HTMLElement.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Element.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Node.prototype, property);\n  }\n  return descriptors[property].get.call(element);\n}\n\n// for testing...\nfunction assertNative(element, property, tracked) {\n  let native = getNativeProperty(element, property);\n  if (native != tracked && element.__patched) {\n    window.console.warn('tracked', tracked, 'native', native);\n  }\n  return tracked;\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {tree} from './tree'\n\n// NOTE: normalize event contruction where necessary (IE11)\nlet NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nexport default class {\n\n  constructor(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  getInsertionPoints() {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  }\n\n  hasInsertionPoint() {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  }\n\n  isInsertionPoint(node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  }\n\n  distribute() {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  }\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  collectPool() {\n    return tree.arrayCopy(\n      tree.Logical.getChildNodes(this.root.host));\n  }\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  distributePool(node, pool) {\n    let dirtyRoots = [];\n    let p$ = this.root._insertionPoints;\n    for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      let parent = tree.Logical.getParentNode(p);\n      if (parent && parent.shadyRoot &&\n          this.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (let i=0; i < pool.length; i++) {\n      if (pool[i]) {\n        pool[i]._assignedSlot = undefined;\n      }\n    }\n    return dirtyRoots;\n  }\n\n  distributeInsertionPoint(insertionPoint, pool) {\n    let prevAssignedNodes = insertionPoint._assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint._assignedNodes = [];\n    let needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    let anyDistributed = false;\n    for (let i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint)\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      let children = tree.Logical.getChildNodes(insertionPoint);\n      for (let j = 0, node; j < children.length; j++) {\n        node = children[j];\n        if (node.__prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (let i=0; i < prevAssignedNodes.length; i++) {\n        prevAssignedNodes[i].__prevAssignedSlot = null;\n      }\n      if (insertionPoint._assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  }\n\n  clearAssignedSlots(slot, savePrevious) {\n    let n$ = slot._assignedNodes;\n    if (n$) {\n      for (let i=0; i < n$.length; i++) {\n        let n = n$[i];\n        if (savePrevious) {\n          n.__prevAssignedSlot = n._assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n._assignedSlot === slot) {\n          n._assignedSlot = null;\n        }\n      }\n    }\n  }\n\n  matchesInsertionPoint(node, insertionPoint) {\n    let slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    let slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  }\n\n  distributeNodeInto(child, insertionPoint) {\n    insertionPoint._assignedNodes.push(child);\n    child._assignedSlot = insertionPoint;\n  }\n\n  setDistributedNodesOnInsertionPoint(insertionPoint) {\n    let n$ = insertionPoint._assignedNodes;\n    insertionPoint._distributedNodes = [];\n    for (let i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this.isInsertionPoint(n)) {\n        let d$ = n._distributedNodes;\n        if (d$) {\n          for (let j=0; j < d$.length; j++) {\n            insertionPoint._distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint._distributedNodes.push(n$[i]);\n      }\n    }\n  }\n\n  _fireSlotChange(insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint._assignedSlot) {\n      this._fireSlotChange(insertionPoint._assignedSlot);\n    }\n  }\n\n  isFinalDestination(insertionPoint) {\n    return !(insertionPoint._assignedSlot);\n  }\n\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nexport function getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nexport function getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  let s = '';\n  let c$ = composed ? composed(node) : node.childNodes;\n  for (let i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport * as utils from './utils'\nimport {getInnerHTML} from './innerHTML'\nimport {tree} from './tree'\n\nlet mixinImpl = {\n\n  // Try to add node. Record logical info, track insertion points, perform\n  // distribution iff needed. Return true if the add is handled.\n  addNode(container, node, ref_node) {\n    let ownerRoot = this.ownerShadyRootForNode(container);\n    if (ownerRoot) {\n      // optimization: special insertion point tracking\n      if (node.__noInsertionPoint) {\n        ownerRoot._skipUpdateInsertionPoints = true;\n      }\n      // note: we always need to see if an insertion point is added\n      // since this saves logical tree info; however, invalidation state\n      // needs\n      let ipAdded = this._maybeAddInsertionPoint(node, container, ownerRoot);\n      // invalidate insertion points IFF not already invalid!\n      if (ipAdded) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n      }\n      this._addedNode(node, ownerRoot);\n    }\n    if (tree.Logical.hasChildNodes(container)) {\n      tree.Logical.recordInsertBefore(node, container, ref_node);\n    }\n    // if not distributing and not adding to host, do a fast path addition\n    let handled = this._maybeDistribute(node, container, ownerRoot) ||\n      container.shadyRoot;\n    // TODO(sorvell): Can we do this cleanup code before distribution?\n    // if shady is handling this node,\n    // the actual dom may not be removed if the node or fragment contents\n    // remain undistributed so we ensure removal here.\n    // NOTE: we only remove from existing location iff shady dom is involved.\n    // This is because a node fragment is passed to the native add method\n    // which expects to see fragment children. Regular elements must also\n    // use this check because not doing so causes separation of\n    // attached/detached and breaks, for example,\n    // dom-if's attached/detached checks.\n    if (handled) {\n      if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        // TODO(sorvell): this should be removed and instead\n        // handled via distribution... however, it's not ok to\n        // use logical dom since it has already been remapp to new location\n        // at this point\n        let c$ = tree.Composed.getChildNodes(node);\n        for (let i=0; i < c$.length; i++) {\n          tree.Composed.removeChild(node, c$[i]);\n        }\n      } else {\n        let parent = tree.Composed.getParentNode(node);\n        if (parent) {\n          tree.Composed.removeChild(parent, node);\n        }\n      }\n    }\n    return handled;\n  },\n\n  // Try to remove node: update logical info and perform distribution iff\n  // needed. Return true if the removal has been handled.\n  // note that it's possible for both the node's host and its parent\n  // to require distribution... both cases are handled here.\n  removeNode(node) {\n    // important that we want to do this only if the node has a logical parent\n    let logicalParent = tree.Logical.hasParentNode(node) &&\n      tree.Logical.getParentNode(node);\n    let distributed;\n    let ownerRoot = this.ownerShadyRootForNode(node);\n    if (logicalParent) {\n      // distribute node's parent iff needed\n      distributed = this.maybeDistributeParent(node);\n      tree.Logical.recordRemoveChild(node, logicalParent);\n      // remove node from root and distribute it iff needed\n      if (ownerRoot && (this._removeDistributedChildren(ownerRoot, node) ||\n        logicalParent.localName === ownerRoot.getInsertionPointTag())) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n        ownerRoot.update();\n      }\n    }\n    this._removeOwnerShadyRoot(node);\n    if (ownerRoot) {\n      this._removedNode(node, ownerRoot);\n    }\n    return distributed;\n  },\n\n\n  _scheduleObserver(node, addedNode, removedNode) {\n    let observer = node.__dom && node.__dom.observer;\n    if (observer) {\n      if (addedNode) {\n        observer.addedNodes.push(addedNode);\n      }\n      if (removedNode) {\n        observer.removedNodes.push(removedNode);\n      }\n      observer.schedule();\n    }\n  },\n\n  removeNodeFromParent(node, parent) {\n    if (parent) {\n      this._scheduleObserver(parent, null, node);\n      this.removeNode(node);\n    } else {\n      this._removeOwnerShadyRoot(node);\n    }\n  },\n\n  _hasCachedOwnerRoot(node) {\n    return Boolean(node.__ownerShadyRoot !== undefined);\n  },\n\n  getRootNode(node) {\n    if (!node || !node.nodeType) {\n      return;\n    }\n    let root = node.__ownerShadyRoot;\n    if (root === undefined) {\n      if (utils.isShadyRoot(node)) {\n        root = node;\n      } else {\n        let parent = tree.Logical.getParentNode(node);\n        root = parent ? this.getRootNode(parent) : node;\n      }\n      // memo-ize result for performance but only memo-ize\n      // result if node is in the document. This avoids a problem where a root\n      // can be cached while an element is inside a fragment.\n      // If this happens and we cache the result, the value can become stale\n      // because for perf we avoid processing the subtree of added fragments.\n      if (document.documentElement.contains(node)) {\n        node.__ownerShadyRoot = root;\n      }\n    }\n    return root;\n  },\n\n  ownerShadyRootForNode(node) {\n    let root = this.getRootNode(node);\n    if (utils.isShadyRoot(root)) {\n      return root;\n    }\n  },\n\n  _maybeDistribute(node, container, ownerRoot) {\n    // TODO(sorvell): technically we should check non-fragment nodes for\n    // <content> children but since this case is assumed to be exceedingly\n    // rare, we avoid the cost and will address with some specific api\n    // when the need arises.  For now, the user must call\n    // distributeContent(true), which updates insertion points manually\n    // and forces distribution.\n    let insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n    let fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n      !node.__noInsertionPoint &&\n      insertionPointTag && node.querySelector(insertionPointTag);\n    let wrappedContent = fragContent &&\n      (tree.Logical.getParentNode(fragContent).nodeType !==\n      Node.DOCUMENT_FRAGMENT_NODE);\n    let hasContent = fragContent || (node.localName === insertionPointTag);\n    // There are 3 possible cases where a distribution may need to occur:\n    // 1. <content> being inserted (the host of the shady root where\n    //    content is inserted needs distribution)\n    // 2. children being inserted into parent with a shady root (parent\n    //    needs distribution)\n    // 3. container is an insertionPoint\n    if (hasContent || (container.localName === insertionPointTag)) {\n      if (ownerRoot) {\n        // note, insertion point list update is handled after node\n        // mutations are complete\n        ownerRoot.update();\n      }\n    }\n    let needsDist = this._nodeNeedsDistribution(container);\n    if (needsDist) {\n      container.shadyRoot.update();\n    }\n    // Return true when distribution will fully handle the composition\n    // Note that if a content was being inserted that was wrapped by a node,\n    // and the parent does not need distribution, return false to allow\n    // the nodes to be added directly, after which children may be\n    // distributed and composed into the wrapping node(s)\n    return needsDist || (hasContent && !wrappedContent);\n  },\n\n  /* note: parent argument is required since node may have an out\n  of date parent at this point; returns true if a <content> is being added */\n  _maybeAddInsertionPoint(node, parent, root) {\n    let added;\n    let insertionPointTag = root.getInsertionPointTag();\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      !node.__noInsertionPoint) {\n      let c$ = node.querySelectorAll(insertionPointTag);\n      for (let i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n        np = tree.Logical.getParentNode(n);\n        // don't allow node's parent to be fragment itself\n        if (np === node) {\n          np = parent;\n        }\n        na = this._maybeAddInsertionPoint(n, np, root);\n        added = added || na;\n      }\n    } else if (node.localName === insertionPointTag) {\n      tree.Logical.saveChildNodes(parent);\n      tree.Logical.saveChildNodes(node);\n      added = true;\n    }\n    return added;\n  },\n\n  _nodeNeedsDistribution(node) {\n    return node && node.shadyRoot &&\n      node.shadyRoot.hasInsertionPoint();\n  },\n\n  // TODO(sorvell): needed for style scoping, use MO?\n  _addedNode() {},\n  _removedNode() {},\n  /*\n  _addedNode(node, root) {\n    // if (ShadyDOM.addedNode) {\n    //   ShadyDOM.addedNode(node, root);\n    // }\n  },\n\n  _removedNode(node, root) {\n    if (ShadyDOM.removedNode) {\n      ShadyDOM.removedNode(node, root);\n    }\n  },\n  */\n\n  _removeDistributedChildren(root, container) {\n    let hostNeedsDist;\n    let ip$ = root._insertionPoints;\n    for (let i=0; i<ip$.length; i++) {\n      let insertionPoint = ip$[i];\n      if (this._contains(container, insertionPoint)) {\n        let dc$ = insertionPoint.assignedNodes({flatten: true});\n        for (let j=0; j<dc$.length; j++) {\n          hostNeedsDist = true;\n          let node = dc$[j];\n          let parent = tree.Composed.getParentNode(node);\n          if (parent) {\n            tree.Composed.removeChild(parent, node);\n          }\n        }\n      }\n    }\n    return hostNeedsDist;\n  },\n\n  _contains(container, node) {\n    while (node) {\n      if (node == container) {\n        return true;\n      }\n      node = tree.Logical.getParentNode(node);\n    }\n  },\n\n  _removeOwnerShadyRoot(node) {\n    // optimization: only reset the tree if node is actually in a root\n    if (this._hasCachedOwnerRoot(node)) {\n      let c$ = tree.Logical.getChildNodes(node);\n      for (let i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n        this._removeOwnerShadyRoot(n);\n      }\n    }\n    node.__ownerShadyRoot = undefined;\n  },\n\n  // TODO(sorvell): This will fail if distribution that affects this\n  // question is pending; this is expected to be exceedingly rare, but if\n  // the issue comes up, we can force a flush in this case.\n  firstComposedNode(insertionPoint) {\n    let n$ = insertionPoint.assignedNodes({flatten: true});\n    let root = this.getRootNode(insertionPoint);\n    for (let i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n      // means that we're composed to this spot.\n      if (root.isFinalDestination(insertionPoint, n)) {\n        return n;\n      }\n    }\n  },\n\n  clearNode(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  },\n\n  maybeDistributeParent(node) {\n    let parent = tree.Logical.getParentNode(node);\n    if (this._nodeNeedsDistribution(parent)) {\n      parent.shadyRoot.update();\n      return true;\n    }\n  },\n\n  maybeDistributeAttributeChange(node, name) {\n    let distribute = (node.localName === 'slot' && name === 'name');\n    if (distribute) {\n      let root = this.getRootNode(node);\n      if (root.update) {\n        root.update();\n      }\n    }\n  },\n\n  // NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n  // but it's also generally useful to recurse through the element tree\n  // and is used by Polymer's styling system.\n  query(node, matcher, halter) {\n    let list = [];\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n    return list;\n  },\n\n  _queryElements(elements, matcher, halter, list) {\n    for (let i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n      if (c.nodeType === Node.ELEMENT_NODE &&\n          this._queryElement(c, matcher, halter, list)) {\n        return true;\n      }\n    }\n  },\n\n  _queryElement(node, matcher, halter, list) {\n    let result = matcher(node);\n    if (result) {\n      list.push(node);\n    }\n    if (halter && halter(result)) {\n      return result;\n    }\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n  },\n\n  activeElementForNode(node) {\n    let active = document.activeElement;\n    if (!active) {\n      return null;\n    }\n    let isShadyRoot = !!(utils.isShadyRoot(node));\n    if (node !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (node.host === active ||\n          !node.host.contains(active)) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    let activeRoot = this.ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== node) {\n      active = activeRoot.host;\n      activeRoot = this.ownerShadyRootForNode(active);\n    }\n    if (node === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === node ? active : null;\n    }\n  }\n\n};\n\nlet nativeCloneNode = Element.prototype.cloneNode;\nlet nativeImportNode = Document.prototype.importNode;\nlet nativeSetAttribute = Element.prototype.setAttribute;\nlet nativeRemoveAttribute = Element.prototype.removeAttribute;\n\nlet NodeMixin = {};\n\nObject.defineProperties(NodeMixin, {\n\n  parentElement: {\n    get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  parentNode: {\n    get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  nextSibling: {\n    get() {\n      return tree.Logical.getNextSibling(this);\n    },\n    configurable: true\n  },\n\n  previousSibling: {\n    get() {\n      return tree.Logical.getPreviousSibling(this);\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get() {\n      return tree.Logical.getNextElementSibling(this);\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get() {\n      return tree.Logical.getPreviousElementSibling(this);\n    },\n    configurable: true\n  },\n\n  assignedSlot: {\n    get() {\n      return this._assignedSlot;\n    },\n    configurable: true\n  }\n});\n\nlet FragmentMixin = {\n\n  appendChild(node) {\n    return this.insertBefore(node);\n  },\n\n  // cases in which we may not be able to just do standard native call\n  // 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n  // has an insertion point)\n  // 2. container is a shadyRoot (don't distribute, instead set\n  // container to container.host.\n  // 3. node is <content> (host of container needs distribution)\n  insertBefore(node, ref_node) {\n    if (ref_node && tree.Logical.getParentNode(ref_node) !== this) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n    // remove node from its current position iff it's in a tree.\n    if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n      let parent = tree.Logical.getParentNode(node);\n      mixinImpl.removeNodeFromParent(node, parent);\n    }\n    if (!mixinImpl.addNode(this, node, ref_node)) {\n      if (ref_node) {\n        // if ref_node is an insertion point replace with first distributed node\n        let root = mixinImpl.ownerShadyRootForNode(ref_node);\n        if (root) {\n          ref_node = ref_node.localName === root.getInsertionPointTag() ?\n            mixinImpl.firstComposedNode(ref_node) : ref_node;\n        }\n      }\n      // if adding to a shadyRoot, add to host instead\n      let container = utils.isShadyRoot(this) ?\n        this.host : this;\n      if (ref_node) {\n        tree.Composed.insertBefore(container, node, ref_node);\n      } else {\n        tree.Composed.appendChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, node);\n    return node;\n  },\n\n  /**\n    Removes the given `node` from the element's `lightChildren`.\n    This method also performs dom composition.\n  */\n  removeChild(node) {\n    if (tree.Logical.getParentNode(node) !== this) {\n      throw Error('The node to be removed is not a child of this node: ' +\n        node);\n    }\n    if (!mixinImpl.removeNode(node)) {\n      // if removing from a shadyRoot, remove form host instead\n      let container = utils.isShadyRoot(this) ?\n        this.host :\n        this;\n      // not guaranteed to physically be in container; e.g.\n      // undistributed nodes.\n      let parent = tree.Composed.getParentNode(node);\n      if (container === parent) {\n        tree.Composed.removeChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, null, node);\n    return node;\n  },\n\n  replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector(selector) {\n    // match selector and halt on first result.\n    let result = mixinImpl.query(this, function(n) {\n      return utils.matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll(selector) {\n    return mixinImpl.query(this, function(n) {\n      return utils.matchesSelector(n, selector);\n    });\n  },\n\n  cloneNode(deep) {\n    if (this.localName == 'template') {\n      return nativeCloneNode.call(this, deep);\n    } else {\n      let n = nativeCloneNode.call(this, false);\n      if (deep) {\n        let c$ = this.childNodes;\n        for (let i=0, nc; i < c$.length; i++) {\n          nc = c$[i].cloneNode(true);\n          n.appendChild(nc);\n        }\n      }\n      return n;\n    }\n  },\n\n  importNode(externalNode, deep) {\n    // for convenience use this node's ownerDoc if the node isn't a document\n    let doc = this instanceof Document ? this :\n      this.ownerDocument;\n    let n = nativeImportNode.call(doc, externalNode, false);\n    if (deep) {\n      let c$ = tree.Logical.getChildNodes(externalNode);\n      utils.common.patchNode(n);\n      for (let i=0, nc; i < c$.length; i++) {\n        nc = doc.importNode(c$[i], true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n};\n\nObject.defineProperties(FragmentMixin, {\n\n  childNodes: {\n    get() {\n      let c$ = tree.Logical.getChildNodes(this);\n      return Array.isArray(c$) ? c$ : tree.arrayCopyChildNodes(this);\n    },\n    configurable: true\n  },\n\n  children: {\n    get() {\n      if (tree.Logical.hasChildNodes(this)) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return tree.arrayCopyChildren(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: {\n    get() {\n      return tree.Logical.getFirstChild(this);\n    },\n    configurable: true\n  },\n\n  lastChild: {\n    get() {\n      return tree.Logical.getLastChild(this);\n    },\n    configurable: true\n  },\n\n  firstElementChild: {\n    get() {\n      return tree.Logical.getFirstElementChild(this);\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get() {\n      return tree.Logical.getLastElementChild(this);\n    },\n    configurable: true\n  },\n\n  // TODO(srovell): strictly speaking fragments do not have textContent\n  // or innerHTML but ShadowRoots do and are not easily distinguishable.\n  // textContent / innerHTML\n  textContent: {\n    get() {\n      if (this.childNodes) {\n        let tc = [];\n        for (let i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n      return '';\n    },\n    set(text) {\n      mixinImpl.clearNode(this);\n      if (text) {\n        this.appendChild(document.createTextNode(text));\n      }\n    },\n    configurable: true\n  },\n\n  innerHTML: {\n    get() {\n      return getInnerHTML(this);\n    },\n    set(text) {\n      mixinImpl.clearNode(this);\n      let d = document.createElement('div');\n      d.innerHTML = text;\n      // here, appendChild may move nodes async so we cannot rely\n      // on node position when copying\n      let c$ = tree.arrayCopyChildNodes(d);\n      for (let i=0; i < c$.length; i++) {\n        this.appendChild(c$[i]);\n      }\n    },\n    configurable: true\n  }\n\n});\n\nlet ElementMixin = {\n\n  // TODO(sorvell): should only exist on <slot>\n  assignedNodes(options) {\n    return (options && options.flatten ? this._distributedNodes :\n      this._assignedNodes) || [];\n  },\n\n\n  setAttribute(name, value) {\n    nativeSetAttribute.call(this, name, value);\n    if (!mixinImpl.maybeDistributeParent(this)) {\n      mixinImpl.maybeDistributeAttributeChange(this, name);\n    }\n  },\n\n  removeAttribute(name) {\n    nativeRemoveAttribute.call(this, name);\n    if (!mixinImpl.maybeDistributeParent(this)) {\n      mixinImpl.maybeDistributeAttributeChange(this, name);\n    }\n  }\n\n};\n\nObject.defineProperties(ElementMixin, {\n\n  shadowRoot: {\n    get() {\n      return this.shadyRoot;\n    }\n  },\n\n  slot: {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    }\n  }\n\n});\n\nlet activeElementDescriptor = {\n  get() {\n    return mixinImpl.activeElementForNode(this);\n  }\n}\n\nlet ActiveElementMixin = {};\nObject.defineProperties(ActiveElementMixin, {\n  activeElement: activeElementDescriptor\n});\n\nlet UnderActiveElementMixin = {};\nObject.defineProperties(UnderActiveElementMixin, {\n  _activeElement: activeElementDescriptor\n});\n\nexport let Mixins = {\n\n  Node: utils.extendAll({__patched: 'Node'}, NodeMixin),\n\n  Fragment: utils.extendAll({__patched: 'Fragment'},\n    NodeMixin, FragmentMixin, ActiveElementMixin),\n\n  Element: utils.extendAll({__patched: 'Element'},\n    NodeMixin, FragmentMixin, ElementMixin, ActiveElementMixin),\n\n  // Note: activeElement cannot be patched on document!\n  Document: utils.extendAll({__patched: 'Document'},\n    NodeMixin, FragmentMixin, ElementMixin, UnderActiveElementMixin)\n\n};\n\nexport let getRootNode = function(node) {\n  return mixinImpl.getRootNode(node);\n}\n\nexport function filterMutations(mutations, target) {\n  const targetRootNode = getRootNode(target);\n  return mutations.filter(function(mutation) {\n    const mutationInScope = (targetRootNode === getRootNode(mutation.target));\n    if (mutationInScope && mutation.addedNodes) {\n      let nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === getRootNode(n));\n      });\n      Object.defineProperty(mutation, 'addedNodes', {\n        value: nodes,\n        configurable: true\n      });\n    }\n    return mutationInScope &&\n      (!mutation.addedNodes || mutation.addedNodes.length);\n  });\n}\n\n// const promise = Promise.resolve();\n\nclass AsyncObserver {\n\n  constructor() {\n    this._scheduled = false;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.callbacks = new Set();\n  }\n\n  schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n      utils.promish.then(() => {\n        this.flush();\n      });\n    }\n  }\n\n  flush() {\n    if (this._scheduled) {\n      this._scheduled = false;\n      let mutations = this.takeRecords();\n      if (mutations.length) {\n        this.callbacks.forEach(function(cb) {\n          cb(mutations);\n        });\n      }\n    }\n  }\n\n  takeRecords() {\n    if (this.addedNodes.length || this.removedNodes.length) {\n      let mutations = [{\n        addedNodes: this.addedNodes,\n        removedNodes: this.removedNodes\n      }];\n      this.addedNodes = [];\n      this.removedNodes = [];\n      return mutations;\n    }\n    return [];\n  }\n\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nexport let observeChildren = function(node, callback) {\n  utils.common.patchNode(node);\n  if (!node.__dom.observer) {\n    node.__dom.observer = new AsyncObserver();\n  }\n  node.__dom.observer.callbacks.add(callback);\n  let observer = node.__dom.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n}\n\nexport let unobserveChildren = function(handle) {\n  let observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__dom.observer = null;\n    }\n  }\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {calculateSplices} from './array-splice'\nimport * as utils from './utils'\nimport {tree} from './tree'\nimport Distributor from './distributor'\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nexport class ShadyRoot {\n\n  constructor(host) {\n    if (!host) {\n      throw 'Must provide a host';\n    }\n    // NOTE: this strange construction is necessary because\n    // DocumentFragment cannot be subclassed on older browsers.\n    let frag = document.createDocumentFragment();\n    frag.__proto__ = ShadyFragmentMixin;\n    frag._init(host);\n    return frag;\n  }\n\n}\n\nlet ShadyMixin = {\n\n  _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // root <=> host\n    host.shadyRoot = this;\n    this.host = host;\n    // logical dom setup\n    tree.Logical.saveChildNodes(host);\n    tree.Logical.saveChildNodes(this);\n    // state flags\n    this._clean = true;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render the \"top\" distributor (this is all that is needed to\n  // distribute this host).\n  update() {\n    let distributionRoot = this._findDistributionRoot(this.host);\n    //console.log('update from', this.host, 'root', distributionRoot.host, distributionRoot._clean);\n    if (distributionRoot._clean) {\n      distributionRoot._clean = false;\n      enqueue(function() {\n        distributionRoot.render();\n      });\n    }\n  },\n\n  // returns the host that's the top of this host's distribution tree\n  _findDistributionRoot(element) {\n    let root = element.shadyRoot;\n    while (element && this._elementNeedsDistribution(element)) {\n      root = element.getRootNode();\n      element = root && root.host;\n    }\n    return root;\n  },\n\n  // Return true if a host's children includes\n  // an insertion point that selects selectively\n  _elementNeedsDistribution(element) {\n    let c$ = tree.Logical.getChildNodes(element);\n    for (let i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (this._distributor.isInsertionPoint(c)) {\n        return element.getRootNode();\n      }\n    }\n  },\n\n  render() {\n    if (!this._clean) {\n      if (!this._skipUpdateInsertionPoints) {\n        this.updateInsertionPoints();\n      } else if (!this._hasRendered) {\n        this._insertionPoints = [];\n      }\n      this._skipUpdateInsertionPoints = false;\n      // TODO(sorvell): previous ShadyDom had a fast path here\n      // that would avoid distribution for initial render if\n      // no insertion points exist. We cannot currently do this because\n      // it relies on elements being in the physical shadowRoot element\n      // so that native methods will be used. The current append code\n      // simply provokes distribution in this case and does not put the\n      // nodes in the shadowRoot. This could be done but we'll need to\n      // consider if the special processing is worth the perf gain.\n      // if (!this._hasRendered && !this._insertionPoints.length) {\n      //   tree.Composed.clearChildNodes(this.host);\n      //   tree.Composed.appendChild(this.host, this);\n      // } else {\n      // logical\n      this.distribute();\n      // physical\n      this.compose();\n      this._clean = true;\n      this._hasRendered = true;\n    }\n  },\n\n  forceRender() {\n    this._clean = false;\n    this.render();\n  },\n\n  distribute() {\n    let dirtyRoots = this._distributor.distribute();\n    for (let i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i].forceRender();\n    }\n  },\n\n  updateInsertionPoints() {\n    let i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (let i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this) {\n          this._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (let i=0, c; i < i$.length; i++) {\n      c = i$[i];\n      tree.Logical.saveChildNodes(c);\n      tree.Logical.saveChildNodes(tree.Logical.getParentNode(c));\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree() {\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    let p$ = this._insertionPoints || [];\n    for (let i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = tree.Logical.getParentNode(p);\n      if ((parent !== this.host) && (parent !== this)) {\n        this._updateChildNodes(parent, this._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children = [];\n    let c$ = tree.Logical.getChildNodes(node.shadyRoot || node);\n    for (let i = 0; i < c$.length; i++) {\n      let child = c$[i];\n      if (this._distributor.isInsertionPoint(child)) {\n        let distributedNodes = child._distributedNodes ||\n          (child._distributedNodes = []);\n        for (let j = 0; j < distributedNodes.length; j++) {\n          let distributedNode = distributedNodes[j];\n          if (this.isFinalDestination(child, distributedNode)) {\n            children.push(distributedNode);\n          }\n        }\n      } else {\n        children.push(child);\n      }\n    }\n    return children;\n  },\n\n  isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children) {\n    let composed = tree.Composed.getChildNodes(container);\n    let splices = calculateSplices(children, composed);\n    // process removals\n    for (let i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (tree.Composed.getParentNode(n) === container) {\n          tree.Composed.removeChild(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i=0, s, next; (i<splices.length) && (s=splices[i]); i++) { //eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j=s.index, n; j < s.index + s.addedCount; j++) {\n        n = children[j];\n        tree.Composed.insertBefore(container, n, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j, 0, n);\n      }\n    }\n  },\n\n  getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n}\n\nlet ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nutils.extend(ShadyFragmentMixin, ShadyMixin);\n\n// let needsUpgrade = window.CustomElements && !CustomElements.useNative;\n\n// function upgradeLogicalChildren(children) {\n//   if (needsUpgrade && children) {\n//     for (let i=0; i < children.length; i++) {\n//       CustomElements.upgrade(children[i]);\n//     }\n//   }\n// }\n\n// render enqueuer/flusher\nlet customElements = window.customElements;\nlet flushList = [];\nlet scheduled;\nlet flushCount = 0;\nlet flushMax = 10;\nexport function enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    utils.promish.then(flush);\n  }\n  flushList.push(callback);\n}\n\nexport function flush() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements && customElements.flush) {\n    customElements.flush();\n  }\n  // continue flushing after elements are upgraded...\n  const isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush.list = flushList;","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\n'use strict';\nimport {tree} from './tree'\nimport * as utils from './utils'\nimport {Mixins} from './element-mixin'\n\nexport let patchedCount = 0;\n\nlet log = false;\n\nlet patchImpl = {\n\n  canPatchNode: function(node) {\n    switch (node) {\n      case document.head:\n      case document.documentElement:\n        return false;\n      default:\n        return true;\n    }\n  },\n\n  hasPrototypeDescriptors: Boolean(Object.getOwnPropertyDescriptor(\n    window.Node.prototype, 'textContent')),\n\n  patch: function(node) {\n    patchedCount++;\n    log && window.console.warn('patch node', node);\n    if (this.hasPrototypeDescriptors) {\n      utils.patchPrototype(node, this.mixinForObject(node));\n    } else {\n      window.console.warn('Patching instance rather than prototype', node);\n      utils.extend(node, this.mixinForNode(node));\n    }\n  },\n\n  mixinForObject: function(obj) {\n    switch (obj.nodeType) {\n      case Node.ELEMENT_NODE:\n        return Mixins.Element;\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        return Mixins.Fragment;\n      case Node.DOCUMENT_NODE:\n        return Mixins.Document;\n      case Node.TEXT_NODE:\n      case Node.COMMENT_NODE:\n        return Mixins.Node;\n    }\n  },\n\n  unpatch: function(obj) {\n    if (obj.__sourceProto) {\n      obj.__proto__ = obj.__sourceProto;\n\n    }\n    // TODO(sorvell): implement unpatching for non-proto patchable browsers\n  }\n\n};\n\nexport function patchNode(node) {\n  if (!utils.settings.inUse) {\n    return;\n  }\n  if (!isNodePatched(node) && patchImpl.canPatchNode(node)) {\n    tree.saveChildNodes(node);\n    patchImpl.patch(node);\n  }\n}\n\nexport function unpatchNode(node) {\n  patchImpl.unpatch(node);\n}\n\nexport function isNodePatched(node) {\n  return Boolean(node.__patched);\n}\n\n// TODO(sorvell): fake export\nutils.common.patchNode = patchNode;\nutils.common.isNodePatched = isNodePatched;","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport * as utils from './utils'\n\nlet origAddEventListener = Element.prototype.addEventListener;\nlet origRemoveEventListener = Element.prototype.removeEventListener;\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nlet alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!utils.isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!utils.isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet EventMixin = {\n\n  __patched: 'Event',\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function(type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  }\n  // put constructor properties on subclass\n  utils.mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  let hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  let path = e.composedPath();\n  let node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (let i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n  Object.defineProperty(e, 'eventPhase', {value: Event.BUBBLING_PHASE});\n  for (let i = 0; i < path.length; i++) {\n    node = path[i];\n    fireHandlers(e, node, 'bubble');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n}\n\nfunction shouldCapture(optionsOrCapture) {\n  return Boolean(typeof optionsOrCapture === 'object' ?\n    optionsOrCapture.capture : optionsOrCapture);\n}\n\nexport function addEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n  // TODO: investigate if this is worth tracking, as it is only used for\n  // deciding if the `slotchanged` event should be fired\n  if (!this.__eventListenerCount) {\n    this.__eventListenerCount = 0;\n  }\n  this.__eventListenerCount++;\n  let wrappedFn = function(e) {\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      utils.patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  fn.__eventWrapper = wrappedFn;\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    if (shouldCapture(optionsOrCapture)) {\n      this.__handlers[type].capture.push(wrappedFn);\n    } else {\n      this.__handlers[type].bubble.push(wrappedFn);\n    }\n  } else {\n    origAddEventListener.call(this, type, wrappedFn, optionsOrCapture);\n  }\n}\n\nexport function removeEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n  let wrapper = fn.__eventWrapper;\n  origRemoveEventListener.call(this, type, wrapper || fn, optionsOrCapture);\n  if (wrapper) {\n    fn.__eventWrapper = null;\n    this.__eventListenerCount--;\n    if (nonBubblingEventsToRetarget[type]) {\n      if (this.__handlers) {\n        if (this.__handlers[type]) {\n          let idx;\n          if (shouldCapture(optionsOrCapture)) {\n            idx = this.__handlers[type].capture.indexOf(wrapper);\n            if (idx > -1) {\n              this.__handlers[type].capture.splice(idx, 1);\n            }\n          } else {\n            idx = this.__handlers[type].bubble.indexOf(wrapper);\n            if (idx > -1) {\n              this.__handlers[type].bubble.splice(idx, 1);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nexport function activateFocusEventOverrides() {\n  for (let ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        utils.patchPrototype(e, EventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\nexport let OriginalEvent = Event;\nexport let PatchedEvent = mixinComposedFlag(Event);\nexport let PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nexport let PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\n'use strict';\nimport * as utils from './utils'\nimport {ShadyRoot, flush, enqueue} from './shady'\nimport * as patch from './patch'\nimport {getRootNode, filterMutations, observeChildren, unobserveChildren}\n  from './element-mixin'\nimport * as events from './event-mixin'\nimport {tree, getNativeProperty} from './tree'\n\nif (utils.settings.inUse) {\n\n  window.ShadyDOM = {\n    tree: tree,\n    getNativeProperty: getNativeProperty,\n    patch: patch.patchNode,\n    isPatched: patch.isNodePatched,\n    unpatch: patch.unpatchNode,\n    isShadyRoot: utils.isShadyRoot,\n    enqueue: enqueue,\n    flush: flush,\n    inUse: utils.settings.inUse,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren\n  };\n\n  let createRootAndEnsurePatched = function(node) {\n    // TODO(sorvell): need to ensure ancestors are patched but this introduces\n    // a timing problem with gathering composed children.\n    // (1) currently the child list is crawled and patched when patching occurs\n    // (this needs to change)\n    // (2) we can only patch when an element has received its parsed children\n    // because we cannot detect them when inserted by parser.\n    // let ancestor = node;\n    // while (ancestor) {\n    //   patchNode(ancestor);\n    //   ancestor = ancestor.parentNode || ancestor.host;\n    // }\n    patch.patchNode(node);\n    let root = new ShadyRoot(node);\n    patch.patchNode(root);\n    return root;\n  }\n\n  Element.prototype.attachShadow = function() {\n    return createRootAndEnsurePatched(this);\n  }\n\n  Node.prototype.addEventListener = events.addEventListener;\n  Node.prototype.removeEventListener = events.removeEventListener;\n  Event = events.PatchedEvent;\n  CustomEvent = events.PatchedCustomEvent;\n  MouseEvent = events.PatchedMouseEvent;\n  events.activateFocusEventOverrides();\n\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get() {\n      return document.documentElement.contains(this);\n    },\n    configurable: true\n  });\n\n  Node.prototype.getRootNode = function(options) {\n    return getRootNode(this, options);\n  }\n\n  Object.defineProperty(Element.prototype, 'slot', {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    },\n    configurable: true\n  });\n\n  Object.defineProperty(Node.prototype, 'assignedSlot', {\n    get() {\n      return this._assignedSlot || null;\n    },\n    configurable: true\n  });\n\n  // TODO(sorvell): super experimental auto patching of document fragment\n  // via appendChild. This either needs to be expanded or contracted.\n  // DocumentFragment.prototype.appendChild = function(node) {\n  //   patchNode(this);\n  //   return this.appendChild(node);\n  // }\n\n}\n"],"sourceRoot":"/source/"}