{"version":3,"sources":["env.js"],"names":["isShadyRoot","obj","__localName","ownerShadyRootForNode","node","root","getRootNode","matchesSelector","element","selector","matches","call","copyOwnProperty","name","source","target","pd","Object","getOwnPropertyDescriptor","defineProperty","extend","n$","getOwnPropertyNames","n","i","length","extendAll","sources","mixin","patchPrototype","proto","getPrototypeOf","hasOwnProperty","patchProto","create","__sourceProto","__patchProto","__proto__","enqueue","callback","scheduled","promish","then","flush","flushList","push","flushCount","shift","customElements$1","isFlushedMaxed","Error","filterMutations","mutations","targetRootNode","map","mutation","mutationInScope","addedNodes","nodes","Array","from","filter","value","configurable","m","getProperty","prop","__shady","hasProperty","escapeReplace","c","escapeAttr","s","replace","escapeAttrRegExp","escapeData","escapeDataRegExp","makeSet","arr","set","getOuterHTML","parentNode","composed","nodeType","Node","ELEMENT_NODE","tagName","localName","attrs","attributes","attr","voidElements","getInnerHTML","TEXT_NODE","data","plaintextParents","COMMENT_NODE","window","console","error","content","c$","childNodes","child","l","nodeWalker","currentNode","firstChild","lastChild","nextSibling","firstElementChild","elementWalker","lastElementChild","previousElementSibling","previousSibling","nextElementSibling","children","innerHTML","textContent","nodeValue","textWalker","document","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","generateSimpleDescriptor","get","nativeTree","insertDOMFrom","appendChild","clearNode","removeChild","getDocumentActiveElement","nativeActiveElementDescriptor","settings","hasDescriptors","activeElement","activeElementForNode","active","isShadyRoot$$1","host","contains","activeRoot","tryExtend","accessors","force","p","objDesc","warn","tryExtendAccessors","OutsideAccessors","InsideAccessors","OtherAccessors","recordInsertBefore","container","ref_node","ensureInsideAccessors","DOCUMENT_FRAGMENT_NODE","linkNode","resetTo","ensureOutsideAccessors","ps","ns","recordRemoveChild","addNode","ownerRoot","ipAdded","__noInsertionPoint","_skipUpdateInsertionPoints","_maybeAddInsertionPoint","handled","_maybeDistribute","shadyRoot","removeNode","logicalParent","distributed","maybeDistributeParent","removedDistributed","_removeDistributedChildren","addedInsertionPoint","getInsertionPointTag","update","_removeOwnerShadyRoot","_scheduleObserver","addedNode","removedNode","observer","removedNodes","schedule","removeNodeFromParent","parent","_hasCachedOwnerRoot","__ownerShadyRoot","documentElement","insertionPointTag","fragContent","querySelector","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","querySelectorAll","np","na","recordChildNodes","hasInsertionPoint","hostNeedsDist","ip$","_insertionPoints","insertionPoint","_contains","dc$","assignedNodes","flatten","j","firstComposedNode","isFinalDestination","distributeAttributeChange","query","matcher","halter","list","_queryElements","elements","_queryElement","result","renderRootNode","render","setAttribute$1","ShadyCSS","ownerDocument","setElementClass","setAttribute","removeAttribute$1","removeAttribute","insertBefore$1","insertBefore","removeChild$1","nativeParent","cloneNode$1","deep","cloneNode","nc","pathComposer","startNode","composedPath","current","startRoot","assignedSlot","retarget","refNode","path","refNodePath","p$","ancestor","lastRoot","rootIdx","indexOf","mixinComposedFlag","Base","klazz","type","options","event","__composed","prototype","fireHandlers","phase","hs","__handlers","fn","__immediatePropagationStopped","retargetNonBubblingEvent","e","__propagationStopped","Event","AT_TARGET","lastFiredRoot","shadowRoot","activateFocusEventOverrides","ev","nonBubblingEventsToRetarget","addEventListener","__target","__relatedTarget","relatedTarget","EventMixin","stopImmediatePropagation","newSplice","index","removed","addedCount","extendGlobal","d","ShadyDOM","hasNativeShadowDOM","Element","attachShadow","desc","hasNerfedDescriptors","inUse","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","Promise","resolve","twiddle","createTextNode","cb","MutationObserver","disconnect","observe","characterData","customElements","AsyncObserver","_scheduled","callbacks","Set","takeRecords","forEach","observeChildren","add","_callback","_observer","_node","unobserveChildren","handle","delete","size","nativeAppendChild","nativeInsertBefore","nativeRemoveChild","nativeSetAttribute","nativeRemoveAttribute","nativeCloneNode","nativeImportNode","Document","importNode","nativeAddEventListener","nativeRemoveEventListener","removeEventListener","nativeMethods","freeze","SHOW_ALL","SHOW_ELEMENT","parentElement","domParser","DOMParser","className","getAttribute","tc","cn","join","text","doc","parseFromString","head","body","ExtraInsideAccessors","getComposedInnerHTML","getComposedChildNodes","__outsideAccessors","__insideAccessors","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","isTrusted","__composedPath","currentTarget","__relatedTargetComposedPath","stopPropagation","PatchedEvent","PatchedCustomEvent","CustomEvent","PatchedMouseEvent","MouseEvent","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","min","reverse","calcSplices","prefixCount","suffixCount","splice","minLength","Math","sharedPrefix","sharedSuffix","ops","splices","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","NormalizedEvent","inType","params","createEvent","initEvent","bubbles","cancelable","Distributor","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","prevAssignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","_prevAssignedSlot","distributeNodeInto","children$$1","setDistributedNodesOnInsertionPoint","_fireSlotChange","slot","savePrevious","slotName","trim","distributedNodes","isInsertionPoint","d$","dispatchEvent","ShadyRoot","frag","createDocumentFragment","ShadyFragmentMixin","_init","ShadyMixin","_renderPending","_hasRendered","_distributor","_getRenderRoot","_rendererForHost","_render","updateInsertionPoints","distribute","compose","forceRender","i$","__insertionPoints","getInsertionPoints","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNode","next","DocumentFragment","defineProperties","assignedSlotDesc","Node$1","optionsOrCapture","capture","once","passive","__eventWrappers","wrapperFn","eventPhase","BUBBLING_PHASE","bubble","idx","replaceChild","isConnected","Text$1","Fragment","Slot","Element$1","Document$1","_activeElement","patch","Text","HTMLSlotElement","nativeHTMLElement","HTMLElement"],"mappings":"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","file":"shadydom.min.js","sourcesContent":["(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nlet desc = Object.getOwnPropertyDescriptor(Node.prototype, 'firstChild');\n\nsettings.hasDescriptors = Boolean(desc && desc.configurable && desc.get);\nsettings.hasNerfedDescriptors = Boolean(desc && !settings.hasDescriptors);\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\nfunction isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nfunction ownerShadyRootForNode(node) {\n  let root = node.getRootNode();\n  if (isShadyRoot(root)) {\n    return root;\n  }\n}\n\nlet p = Element.prototype;\nlet matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nfunction matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  let pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nfunction extend(target, source) {\n  if (target && source) {\n    let n$ = Object.getOwnPropertyNames(source);\n    for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nfunction extendAll(target, ...sources) {\n  for (let i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nfunction mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nfunction patchPrototype(obj, mixin) {\n  let proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    let patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  // old browsers don't have setPrototypeOf\n  obj.__proto__ = proto.__patchProto;\n}\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nlet promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  let twiddle = document.createTextNode('');\n  let content = 0;\n  promish = {\n    then(cb) {\n      // To preserve timing with Promise microtasks\n      // we create a new observer for every callback.\n      let observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n      twiddle.textContent = content++;\n    }\n  };\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// render enqueuer/flusher\nlet customElements$1 = window.customElements;\nlet flushList = [];\nlet scheduled;\nlet flushCount = 0;\nlet flushMax = 100;\nfunction enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    promish.then(flush);\n  }\n  flushList.push(callback);\n}\n\nfunction flush() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements$1 && customElements$1.flush) {\n    customElements$1.flush();\n  }\n  // continue flushing after elements are upgraded...\n  const isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush.list = flushList;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nclass AsyncObserver {\n\n  constructor() {\n    this._scheduled = false;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.callbacks = new Set();\n  }\n\n  schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n      promish.then(() => {\n        this.flush();\n      });\n    }\n  }\n\n  flush() {\n    if (this._scheduled) {\n      this._scheduled = false;\n      let mutations = this.takeRecords();\n      if (mutations.length) {\n        this.callbacks.forEach(function(cb) {\n          cb(mutations);\n        });\n      }\n    }\n  }\n\n  takeRecords() {\n    if (this.addedNodes.length || this.removedNodes.length) {\n      let mutations = [{\n        addedNodes: this.addedNodes,\n        removedNodes: this.removedNodes\n      }];\n      this.addedNodes = [];\n      this.removedNodes = [];\n      return mutations;\n    }\n    return [];\n  }\n\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nlet observeChildren = function(node, callback) {\n  if (!node.__shady.observer) {\n    node.__shady.observer = new AsyncObserver();\n  }\n  node.__shady.observer.callbacks.add(callback);\n  let observer = node.__shady.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n};\n\nlet unobserveChildren = function(handle) {\n  let observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__shady.observer = null;\n    }\n  }\n};\n\nfunction filterMutations(mutations, target) {\n  const targetRootNode = target.getRootNode();\n  return mutations.map(function(mutation) {\n    const mutationInScope = (targetRootNode === mutation.target.getRootNode());\n    if (mutationInScope && mutation.addedNodes) {\n      let nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === n.getRootNode());\n      });\n      if (nodes.length) {\n        mutation = Object.create(mutation);\n        Object.defineProperty(mutation, 'addedNodes', {\n          value: nodes,\n          configurable: true\n        });\n        return mutation;\n      }\n    } else if (mutationInScope) {\n      return mutation;\n    }\n  }).filter(function(m) { return m});\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nativeAppendChild = Element.prototype.appendChild;\nlet appendChild = nativeAppendChild;\n\nlet nativeInsertBefore = Element.prototype.insertBefore;\nlet insertBefore = nativeInsertBefore;\n\nlet nativeRemoveChild = Element.prototype.removeChild;\nlet removeChild = nativeRemoveChild;\n\nlet nativeSetAttribute = Element.prototype.setAttribute;\nlet setAttribute = nativeSetAttribute;\n\nlet nativeRemoveAttribute = Element.prototype.removeAttribute;\nlet removeAttribute = nativeRemoveAttribute;\n\nlet nativeCloneNode = Element.prototype.cloneNode;\nlet cloneNode = nativeCloneNode;\n\nlet nativeImportNode = Document.prototype.importNode;\nlet importNode = nativeImportNode;\n\nlet nativeAddEventListener = Element.prototype.addEventListener;\nlet addEventListener = nativeAddEventListener;\n\nlet nativeRemoveEventListener = Element.prototype.removeEventListener;\nlet removeEventListener = nativeRemoveEventListener;\n\n\nvar nativeMethods = Object.freeze({\n\tappendChild: appendChild,\n\tinsertBefore: insertBefore,\n\tremoveChild: removeChild,\n\tsetAttribute: setAttribute,\n\tremoveAttribute: removeAttribute,\n\tcloneNode: cloneNode,\n\timportNode: importNode,\n\taddEventListener: addEventListener,\n\tremoveEventListener: removeEventListener\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction getProperty(node, prop) {\n  return node.__shady && node.__shady[prop];\n}\n\nfunction hasProperty(node, prop) {\n  return getProperty(node, prop) !== undefined;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nfunction getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nfunction getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  let s = '';\n  let c$ = composed ? composed(node) : node.childNodes;\n  for (let i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nodeWalker = document.createTreeWalker(document, NodeFilter.SHOW_ALL,\n  null, false);\n\nlet elementWalker = document.createTreeWalker(document, NodeFilter.SHOW_ELEMENT,\n  null, false);\n\nfunction parentNode(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.parentNode();\n}\n\nfunction firstChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.firstChild();\n}\n\nfunction lastChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.lastChild();\n}\n\nfunction previousSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.previousSibling();\n}\n\nfunction nextSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.nextSibling();\n}\n\nfunction childNodes(node) {\n  let nodes = [];\n  nodeWalker.currentNode = node;\n  let n = nodeWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = nodeWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction parentElement(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.parentNode();\n}\n\nfunction firstElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.firstChild();\n}\n\nfunction lastElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.lastChild();\n}\n\nfunction previousElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.previousSibling();\n}\n\nfunction nextElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.nextSibling();\n}\n\nfunction children(node) {\n  let nodes = [];\n  elementWalker.currentNode = node;\n  let n = elementWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = elementWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction innerHTML(node) {\n  return getInnerHTML(node, (n) => childNodes(n));\n}\n\nfunction textContent(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    return node.nodeValue;\n  }\n  let textWalker = document.createTreeWalker(node, NodeFilter.SHOW_TEXT,\n    null, false);\n  let content = '', n;\n  while ( (n = textWalker.nextNode()) ) {\n    // TODO(sorvell): can't use textContent since we patch it on Node.prototype!\n    // However, should probably patch it only on element.\n    content += n.nodeValue;\n  }\n  return content;\n}\n\nvar nativeTree = Object.freeze({\n\tparentNode: parentNode,\n\tfirstChild: firstChild,\n\tlastChild: lastChild,\n\tpreviousSibling: previousSibling,\n\tnextSibling: nextSibling,\n\tchildNodes: childNodes,\n\tparentElement: parentElement,\n\tfirstElementChild: firstElementChild,\n\tlastElementChild: lastElementChild,\n\tpreviousElementSibling: previousElementSibling,\n\tnextElementSibling: nextElementSibling,\n\tchildren: children,\n\tinnerHTML: innerHTML,\n\ttextContent: textContent\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction generateSimpleDescriptor(prop) {\n  return {\n    get() {\n      let l = getProperty(this, prop);\n      return l !== undefined ? l : nativeTree[prop](this);\n    },\n    configurable: true\n  }\n}\n\nlet domParser = new DOMParser();\n\nfunction insertDOMFrom(target, from) {\n  let c$ = Array.from(from.childNodes);\n  for (let i=0; i < c$.length; i++) {\n    target.appendChild(c$[i]);\n  }\n}\n\nfunction clearNode(node) {\n  while (node.firstChild) {\n    node.removeChild(node.firstChild);\n  }\n}\n\nlet nativeActiveElementDescriptor = Object.getOwnPropertyDescriptor(\n  Document.prototype, 'activeElement');\nfunction getDocumentActiveElement() {\n  if (nativeActiveElementDescriptor && nativeActiveElementDescriptor.get) {\n    return nativeActiveElementDescriptor.get.call(document);\n  } else if (!settings.hasDescriptors) {\n    return document.activeElement;\n  }\n}\n\nfunction activeElementForNode(node) {\n  let active = getDocumentActiveElement();\n  if (!active) {\n    return null;\n  }\n  let isShadyRoot$$1 = !!(isShadyRoot(node));\n  if (node !== document) {\n    // If this node isn't a document or shady root, then it doesn't have\n    // an active element.\n    if (!isShadyRoot$$1) {\n      return null;\n    }\n    // If this shady root's host is the active element or the active\n    // element is not a descendant of the host (in the composed tree),\n    // then it doesn't have an active element.\n    if (node.host === active ||\n        !node.host.contains(active)) {\n      return null;\n    }\n  }\n  // This node is either the document or a shady root of which the active\n  // element is a (composed) descendant of its host; iterate upwards to\n  // find the active element's most shallow host within it.\n  let activeRoot = ownerShadyRootForNode(active);\n  while (activeRoot && activeRoot !== node) {\n    active = activeRoot.host;\n    activeRoot = ownerShadyRootForNode(active);\n  }\n  if (node === document) {\n    // This node is the document, so activeRoot should be null.\n    return activeRoot ? null : active;\n  } else {\n    // This node is a non-document shady root, and it should be\n    // activeRoot.\n    return activeRoot === node ? active : null;\n  }\n}\n\nlet OutsideAccessors = {\n  // node...\n  parentElement: generateSimpleDescriptor('parentElement'),\n\n  parentNode: generateSimpleDescriptor('parentNode'),\n\n  nextSibling: generateSimpleDescriptor('nextSibling'),\n\n  previousSibling: generateSimpleDescriptor('previousSibling'),\n\n  className: {\n    get() {\n      return this.getAttribute('class');\n    },\n    set(value) {\n      this.setAttribute('class', value);\n    },\n    configurable: true\n  }\n};\n\nlet InsideAccessors = {\n  childNodes: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        if (!this.__shady.childNodes) {\n          this.__shady.childNodes = [];\n          for (let n=this.firstChild; n; n=n.nextSibling) {\n            this.__shady.childNodes.push(n);\n          }\n        }\n        return this.__shady.childNodes;\n      } else {\n        return childNodes(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: generateSimpleDescriptor('firstChild'),\n\n  lastChild: generateSimpleDescriptor('lastChild'),\n\n  textContent: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let tc = [];\n        for (let i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      } else {\n        return textContent(this);\n      }\n    },\n    set(text) {\n      if (this.nodeType !== Node.ELEMENT_NODE) {\n        // TODO(sorvell): can't do this if patch nodeValue.\n        this.nodeValue = text;\n      } else {\n        clearNode(this);\n        if (text) {\n          this.appendChild(document.createTextNode(text));\n        }\n      }\n    },\n    configurable: true\n  },\n\n  // fragment, element, document\n  firstElementChild: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let n = this.firstChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return firstElementChild(this);\n      }\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get() {\n      if (hasProperty(this, 'lastChild')) {\n        let n = this.lastChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return lastElementChild(this);\n      }\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get() {\n      if (hasProperty(this, 'nextSibling')) {\n        let n = this.nextSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return nextElementSibling(this);\n      }\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get() {\n      if (hasProperty(this, 'previousSibling')) {\n        let n = this.previousSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return previousElementSibling(this);\n      }\n    },\n    configurable: true\n  },\n\n  children: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return children(this);\n      }\n    },\n    configurable: true\n  },\n\n  // element (HTMLElement on IE11)\n  innerHTML: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        return getInnerHTML(this);\n      } else {\n        return innerHTML(this);\n      }\n    },\n    set(text) {\n      clearNode(this);\n      let doc = domParser.parseFromString(text, 'text/html');\n      if (doc.head) {\n        insertDOMFrom(this, doc.head);\n      }\n      if (doc.body) {\n        insertDOMFrom(this, doc.body);\n      }\n    },\n    configurable: true\n  }\n};\n\nlet ExtraInsideAccessors = {\n  shadowRoot: {\n    get() {\n      return this.shadyRoot;\n    },\n    set(value) {\n      this.shadyRoot = value;\n    },\n    configurable: true\n  }\n};\n\nlet OtherAccessors = {\n\n  activeElement: {\n    get() {\n      return activeElementForNode(this);\n    },\n    set() {},\n    configurable: true\n  }\n\n};\n\nlet getComposedInnerHTML = function(node) {\n  return getInnerHTML(node, (n) => childNodes(n));\n};\n\nlet getComposedChildNodes = function(node) {\n  return childNodes(node);\n};\n\nfunction tryExtend(obj, accessors, force) {\n  for (let p in accessors) {\n    let objDesc = Object.getOwnPropertyDescriptor(obj, p);\n    if ((objDesc && objDesc.configurable) ||\n      (!objDesc && force)) {\n      Object.defineProperty(obj, p, accessors[p]);\n    } else if (force) {\n      console.warn('Could not define', p, 'on', obj);\n    }\n  }\n}\n\nfunction tryExtendAccessors(proto) {\n  tryExtend(proto, OutsideAccessors);\n  tryExtend(proto, InsideAccessors);\n  tryExtend(proto, OtherAccessors);\n}\n\nlet ensureOutsideAccessors = settings.hasDescriptors ?\n  function() {} : function(element) {\n    if (!(element.__shady && element.__shady.__outsideAccessors)) {\n      element.__shady = element.__shady || {};\n      element.__shady.__outsideAccessors = true;\n      tryExtend(element, OutsideAccessors, true);\n    }\n  };\n\nlet ensureInsideAccessors = settings.hasDescriptors ?\n  function() {} : function(element) {\n    if (!(element.__shady && element.__shady.__insideAccessors)) {\n      element.__shady = element.__shady || {};\n      element.__shady.__insideAccessors = true;\n      tryExtend(element, InsideAccessors, true);\n      tryExtend(element, ExtraInsideAccessors, true);\n    }\n  };\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction recordInsertBefore(node, container, ref_node) {\n  ensureInsideAccessors(container);\n  container.__shady = container.__shady || {};\n  if (hasProperty(container, 'firstChild')) {\n    container.__shady.childNodes = null;\n  }\n  // handle document fragments\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    let c$ = node.childNodes;\n    for (let i=0; i < c$.length; i++) {\n      linkNode(c$[i], container, ref_node);\n    }\n    // cleanup logical dom in doc fragment.\n    node.__shady = node.__shady || {};\n    let resetTo = hasProperty(node, 'firstChild') ? null : undefined;\n    node.__shady.firstChild = node.__shady.lastChild = resetTo;\n    node.__shady.childNodes = resetTo;\n  } else {\n    linkNode(node, container, ref_node);\n  }\n}\n\nfunction linkNode(node, container, ref_node) {\n  ensureOutsideAccessors(node);\n  ref_node = ref_node || null;\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (ref_node) {\n    ref_node.__shady = ref_node.__shady || {};\n  }\n  // update ref_node.previousSibling <-> node\n  node.__shady.previousSibling = ref_node ? ref_node.__shady.previousSibling :\n    container.lastChild;\n  let ps = node.__shady.previousSibling;\n  if (ps && ps.__shady) {\n    ps.__shady.nextSibling = node;\n  }\n  // update node <-> ref_node\n  let ns = node.__shady.nextSibling = ref_node;\n  if (ns && ns.__shady) {\n    ns.__shady.previousSibling = node;\n  }\n  // update node <-> container\n  node.__shady.parentNode = container;\n  if (ref_node) {\n    if (ref_node === container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  } else {\n    container.__shady.lastChild = node;\n    if (!container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  }\n  // remove caching of childNodes\n  container.__shady.childNodes = null;\n}\n\nfunction recordRemoveChild(node, container) {\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (node === container.__shady.firstChild) {\n    container.__shady.firstChild = node.__shady.nextSibling;\n  }\n  if (node === container.__shady.lastChild) {\n    container.__shady.lastChild = node.__shady.previousSibling;\n  }\n  let p = node.__shady.previousSibling;\n  let n = node.__shady.nextSibling;\n  if (p) {\n    p.__shady = p.__shady || {};\n    p.__shady.nextSibling = n;\n  }\n  if (n) {\n    n.__shady = n.__shady || {};\n    n.__shady.previousSibling = p;\n  }\n  // When an element is removed, logical data is no longer tracked.\n  // Explicitly set `undefined` here to indicate this. This is disginguished\n  // from `null` which is set if info is null.\n  node.__shady.parentNode = node.__shady.previousSibling =\n    node.__shady.nextSibling = undefined;\n  if (hasProperty(container, 'childNodes')) {\n    // remove caching of childNodes\n    container.__shady.childNodes = null;\n  }\n}\n\nlet recordChildNodes = function(node) {\n  if (!hasProperty(node, 'firstChild')) {\n    node.__shady = node.__shady || {};\n    node.__shady.firstChild = firstChild(node);\n    node.__shady.lastChild = lastChild(node);\n    ensureInsideAccessors(node);\n    let c$ = node.__shady.childNodes = childNodes(node);\n    for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n      n.__shady = n.__shady || {};\n      n.__shady.parentNode = node;\n      n.__shady.nextSibling = c$[i+1] || null;\n      n.__shady.previousSibling = c$[i-1] || null;\n      ensureOutsideAccessors(n);\n    }\n  }\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Try to add node. Record logical info, track insertion points, perform\n// distribution iff needed. Return true if the add is handled.\nfunction addNode(container, node, ref_node) {\n  let ownerRoot = ownerShadyRootForNode(container);\n  let ipAdded;\n  if (ownerRoot) {\n    // optimization: special insertion point tracking\n    // TODO(sorvell): verify that the renderPending check here should not be needed.\n    // if (node.__noInsertionPoint && !ownerRoot._renderPending) {\n    if (node.__noInsertionPoint) {\n      ownerRoot._skipUpdateInsertionPoints = true;\n    }\n    // note: we always need to see if an insertion point is added\n    // since this saves logical tree info; however, invalidation state\n    // needs\n    ipAdded = _maybeAddInsertionPoint(node, container, ownerRoot);\n    // invalidate insertion points IFF not already invalid!\n    if (ipAdded) {\n      ownerRoot._skipUpdateInsertionPoints = false;\n    }\n  }\n  if (hasProperty(container, 'firstChild')) {\n    recordInsertBefore(node, container, ref_node);\n  }\n  // if not distributing and not adding to host, do a fast path addition\n  // TODO(sorvell): revisit flow since `ipAdded` needed here if\n  // node is a fragment that has a patched QSA.\n  let handled = _maybeDistribute(node, container, ownerRoot, ipAdded) ||\n    container.shadyRoot;\n  return handled;\n}\n\n// Try to remove node: update logical info and perform distribution iff\n// needed. Return true if the removal has been handled.\n// note that it's possible for both the node's host and its parent\n// to require distribution... both cases are handled here.\nfunction removeNode(node) {\n  // important that we want to do this only if the node has a logical parent\n  let logicalParent = hasProperty(node, 'parentNode') &&\n    getProperty(node, 'parentNode');\n  let distributed;\n  let ownerRoot = ownerShadyRootForNode(node);\n  if (logicalParent || ownerRoot) {\n    // distribute node's parent iff needed\n    distributed = maybeDistributeParent(node);\n    if (logicalParent) {\n      recordRemoveChild(node, logicalParent);\n    }\n    // remove node from root and distribute it iff needed\n    let removedDistributed = ownerRoot &&\n      _removeDistributedChildren(ownerRoot, node);\n    let addedInsertionPoint = (logicalParent && ownerRoot &&\n      logicalParent.localName === ownerRoot.getInsertionPointTag());\n    if (removedDistributed || addedInsertionPoint) {\n      ownerRoot._skipUpdateInsertionPoints = false;\n      ownerRoot.update();\n    }\n  }\n  _removeOwnerShadyRoot(node);\n  return distributed;\n}\n\n\nfunction _scheduleObserver(node, addedNode, removedNode) {\n  let observer = node.__shady && node.__shady.observer;\n  if (observer) {\n    if (addedNode) {\n      observer.addedNodes.push(addedNode);\n    }\n    if (removedNode) {\n      observer.removedNodes.push(removedNode);\n    }\n    observer.schedule();\n  }\n}\n\nfunction removeNodeFromParent(node, parent) {\n  if (parent) {\n    _scheduleObserver(parent, null, node);\n    return removeNode(node);\n  } else {\n    _removeOwnerShadyRoot(node);\n  }\n}\n\nfunction _hasCachedOwnerRoot(node) {\n  return Boolean(node.__ownerShadyRoot !== undefined);\n}\n\nfunction getRootNode(node) {\n  if (!node || !node.nodeType) {\n    return;\n  }\n  let root = node.__ownerShadyRoot;\n  if (root === undefined) {\n    if (isShadyRoot(node)) {\n      root = node;\n    } else {\n      let parent = node.parentNode;\n      root = parent ? getRootNode(parent) : node;\n    }\n    // memo-ize result for performance but only memo-ize\n    // result if node is in the document. This avoids a problem where a root\n    // can be cached while an element is inside a fragment.\n    // If this happens and we cache the result, the value can become stale\n    // because for perf we avoid processing the subtree of added fragments.\n    if (document.documentElement.contains(node)) {\n      node.__ownerShadyRoot = root;\n    }\n  }\n  return root;\n}\n\nfunction _maybeDistribute(node, container, ownerRoot, ipAdded) {\n  // TODO(sorvell): technically we should check non-fragment nodes for\n  // <content> children but since this case is assumed to be exceedingly\n  // rare, we avoid the cost and will address with some specific api\n  // when the need arises.  For now, the user must call\n  // distributeContent(true), which updates insertion points manually\n  // and forces distribution.\n  let insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n  let fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n    !node.__noInsertionPoint &&\n    insertionPointTag && node.querySelector(insertionPointTag);\n  let wrappedContent = fragContent &&\n    (fragContent.parentNode.nodeType !==\n    Node.DOCUMENT_FRAGMENT_NODE);\n  let hasContent = fragContent || (node.localName === insertionPointTag);\n  // There are 3 possible cases where a distribution may need to occur:\n  // 1. <content> being inserted (the host of the shady root where\n  //    content is inserted needs distribution)\n  // 2. children being inserted into parent with a shady root (parent\n  //    needs distribution)\n  // 3. container is an insertionPoint\n  if (hasContent || (container.localName === insertionPointTag) || ipAdded) {\n    if (ownerRoot) {\n      // note, insertion point list update is handled after node\n      // mutations are complete\n      ownerRoot.update();\n    }\n  }\n  let needsDist = _nodeNeedsDistribution(container);\n  if (needsDist) {\n    container.shadyRoot.update();\n  }\n  // Return true when distribution will fully handle the composition\n  // Note that if a content was being inserted that was wrapped by a node,\n  // and the parent does not need distribution, return false to allow\n  // the nodes to be added directly, after which children may be\n  // distributed and composed into the wrapping node(s)\n  return needsDist || (hasContent && !wrappedContent);\n}\n\n/* note: parent argument is required since node may have an out\nof date parent at this point; returns true if a <content> is being added */\nfunction _maybeAddInsertionPoint(node, parent, root) {\n  let added;\n  let insertionPointTag = root.getInsertionPointTag();\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n    !node.__noInsertionPoint) {\n    let c$ = node.querySelectorAll(insertionPointTag);\n    for (let i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n      np = n.parentNode;\n      // don't allow node's parent to be fragment itself\n      if (np === node) {\n        np = parent;\n      }\n      na = _maybeAddInsertionPoint(n, np, root);\n      added = added || na;\n    }\n  } else if (node.localName === insertionPointTag) {\n    recordChildNodes(parent);\n    recordChildNodes(node);\n    added = true;\n  }\n  return added;\n}\n\nfunction _nodeNeedsDistribution(node) {\n  return node && node.shadyRoot &&\n    node.shadyRoot.hasInsertionPoint();\n}\n\nfunction _removeDistributedChildren(root, container) {\n  let hostNeedsDist;\n  let ip$ = root._insertionPoints;\n  for (let i=0; i<ip$.length; i++) {\n    let insertionPoint = ip$[i];\n    if (_contains(container, insertionPoint)) {\n      let dc$ = insertionPoint.assignedNodes({flatten: true});\n      for (let j=0; j<dc$.length; j++) {\n        hostNeedsDist = true;\n        let node = dc$[j];\n        let parent = parentNode(node);\n        if (parent) {\n          removeChild.call(parent, node);\n        }\n      }\n    }\n  }\n  return hostNeedsDist;\n}\n\nfunction _contains(container, node) {\n  while (node) {\n    if (node == container) {\n      return true;\n    }\n    node = node.parentNode;\n  }\n}\n\nfunction _removeOwnerShadyRoot(node) {\n  // optimization: only reset the tree if node is actually in a root\n  if (_hasCachedOwnerRoot(node)) {\n    let c$ = node.childNodes;\n    for (let i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n      _removeOwnerShadyRoot(n);\n    }\n  }\n  node.__ownerShadyRoot = undefined;\n}\n\n// TODO(sorvell): This will fail if distribution that affects this\n// question is pending; this is expected to be exceedingly rare, but if\n// the issue comes up, we can force a flush in this case.\nfunction firstComposedNode(insertionPoint) {\n  let n$ = insertionPoint.assignedNodes({flatten: true});\n  let root = getRootNode(insertionPoint);\n  for (let i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n    // means that we're composed to this spot.\n    if (root.isFinalDestination(insertionPoint, n)) {\n      return n;\n    }\n  }\n}\n\nfunction maybeDistributeParent(node) {\n  let parent = node.parentNode;\n  if (_nodeNeedsDistribution(parent)) {\n    parent.shadyRoot.update();\n    return true;\n  }\n}\n\nfunction distributeAttributeChange(node, name) {\n  if (name === 'slot') {\n    maybeDistributeParent(node);\n  } else if (node.localName === 'slot' && name === 'name') {\n    let root = ownerShadyRootForNode(node);\n    if (root) {\n      root.update();\n    }\n  }\n}\n\n// NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n// but it's also generally useful to recurse through the element tree\n// and is used by Polymer's styling system.\nfunction query(node, matcher, halter) {\n  let list = [];\n  _queryElements(node.childNodes, matcher,\n    halter, list);\n  return list;\n}\n\nfunction _queryElements(elements, matcher, halter, list) {\n  for (let i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n    if (c.nodeType === Node.ELEMENT_NODE &&\n        _queryElement(c, matcher, halter, list)) {\n      return true;\n    }\n  }\n}\n\nfunction _queryElement(node, matcher, halter, list) {\n  let result = matcher(node);\n  if (result) {\n    list.push(node);\n  }\n  if (halter && halter(result)) {\n    return result;\n  }\n  _queryElements(node.childNodes, matcher,\n    halter, list);\n}\n\nfunction renderRootNode(element) {\n  var root = element.getRootNode();\n  if (isShadyRoot(root)) {\n    root.render();\n  }\n}\n\nfunction setAttribute$1(node, attr, value) {\n  // avoid scoping elements in non-main document to avoid template documents\n  if (window.ShadyCSS && attr === 'class' && node.ownerDocument === document) {\n    window.ShadyCSS.setElementClass(node, value);\n  } else {\n    setAttribute.call(node, attr, value);\n    distributeAttributeChange(node, attr);\n  }\n}\n\nfunction removeAttribute$1(node, attr) {\n  removeAttribute.call(node, attr);\n  distributeAttributeChange(node, name);\n}\n\n// cases in which we may not be able to just do standard native call\n// 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n// has an insertion point)\n// 2. container is a shadyRoot (don't distribute, instead set\n// container to container.host.\n// 3. node is <content> (host of container needs distribution)\nfunction insertBefore$1(parent, node, ref_node) {\n  if (ref_node) {\n    let p = getProperty(ref_node, 'parentNode');\n    if (p !== undefined && p !== parent) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n  }\n  // remove node from its current position iff it's in a tree.\n  if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n    let parent = getProperty(node, 'parentNode');\n    removeNodeFromParent(node, parent);\n  }\n  if (!addNode(parent, node, ref_node)) {\n    if (ref_node) {\n      // if ref_node is an insertion point replace with first distributed node\n      let root = ownerShadyRootForNode(ref_node);\n      if (root) {\n        ref_node = ref_node.localName === root.getInsertionPointTag() ?\n          firstComposedNode(ref_node) : ref_node;\n      }\n    }\n    // if adding to a shadyRoot, add to host instead\n    let container = isShadyRoot(parent) ?\n      parent.host : parent;\n    if (ref_node) {\n      insertBefore.call(container, node, ref_node);\n    } else {\n      appendChild.call(container, node);\n    }\n  }\n  _scheduleObserver(parent, node);\n  return node;\n}\n\n/**\n  Removes the given `node` from the element's `lightChildren`.\n  This method also performs dom composition.\n*/\nfunction removeChild$1(parent, node) {\n  if (node.parentNode !== parent) {\n    throw Error('The node to be removed is not a child of this node: ' +\n      node);\n  }\n  if (!removeNode(node)) {\n    // if removing from a shadyRoot, remove form host instead\n    let container = isShadyRoot(parent) ?\n      parent.host :\n      parent;\n    // not guaranteed to physically be in container; e.g.\n    // undistributed nodes.\n    let nativeParent = parentNode(node);\n    if (container === nativeParent) {\n      removeChild.call(container, node);\n    }\n  }\n  _scheduleObserver(parent, null, node);\n  return node;\n}\n\nfunction cloneNode$1(node, deep) {\n  if (node.localName == 'template') {\n    return cloneNode.call(node, deep);\n  } else {\n    let n = cloneNode.call(node, false);\n    if (deep) {\n      let c$ = node.childNodes;\n      for (let i=0, nc; i < c$.length; i++) {\n        nc = c$[i].cloneNode(true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nlet alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.nodeType === Node.DOCUMENT_FRAGMENT_NODE && current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet EventMixin = {\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function(type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  };\n  // put constructor properties on subclass\n  mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  let hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  let path = e.composedPath();\n  let node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (let i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    // capture phase fires all capture handlers\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n\n  // set the event phase to `AT_TARGET` as in spec\n  Object.defineProperty(e, 'eventPhase', {value: Event.AT_TARGET});\n\n  // the event only needs to be fired when owner roots change when iterating the event path\n  // keep track of the last seen owner root\n  let lastFiredRoot;\n  for (let i = 0; i < path.length; i++) {\n    node = path[i];\n    if (i === 0 || (node.shadowRoot && node.shadowRoot === lastFiredRoot)) {\n      fireHandlers(e, node, 'bubble');\n      // don't bother with window, it doesn't have `getRootNode` and will be last in the path anyway\n      if (node !== window) {\n        lastFiredRoot = node.getRootNode();\n      }\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction addEventListener$1(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // The callback `fn` might be used for multiple nodes/events. Since we generate\n  // a wrapper function, we need to keep track of it when we remove the listener.\n  // It's more efficient to store the node/type/options information as Array in\n  // `fn` itself rather than the node (we assume that the same callback is used\n  // for few nodes at most, whereas a node will likely have many event listeners).\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  if (fn.__eventWrappers) {\n    // Stop if the wrapper function has already been created.\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        return;\n      }\n    }\n  } else {\n    fn.__eventWrappers = [];\n  }\n\n  const wrapperFn = function(e) {\n    // Support `once` option.\n    if (once) {\n      this.removeEventListener(type, fn, optionsOrCapture);\n    }\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  // Store the wrapper information.\n  fn.__eventWrappers.push({\n    node: this,\n    type: type,\n    capture: capture,\n    once: once,\n    passive: passive,\n    wrapperFn: wrapperFn\n  });\n\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n  } else {\n    addEventListener.call(this, type, wrapperFn, optionsOrCapture);\n  }\n}\n\nfunction removeEventListener$1(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  // Search the wrapped function.\n  let wrapperFn = undefined;\n  if (fn.__eventWrappers) {\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        wrapperFn = fn.__eventWrappers.splice(i, 1)[0].wrapperFn;\n        // Cleanup.\n        if (!fn.__eventWrappers.length) {\n          fn.__eventWrappers = undefined;\n        }\n        break;\n      }\n    }\n  }\n\n  removeEventListener.call(this, type, wrapperFn || fn, optionsOrCapture);\n  if (wrapperFn && nonBubblingEventsToRetarget[type] &&\n      this.__handlers && this.__handlers[type]) {\n    const arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    const idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (let ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        patchPrototype(e, EventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\n\nlet PatchedEvent = mixinComposedFlag(Event);\nlet PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nlet PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\nlet ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    // \"Deletion\" columns\n    let rowCount = oldEnd - oldStart + 1;\n    let columnCount = currentEnd - currentStart + 1;\n    let distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (let i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (let j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (let i = 1; i < rowCount; i++) {\n      for (let j = 1; j < columnCount; j++) {\n        if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n          distances[i][j] = distances[i - 1][j - 1];\n        else {\n          let north = distances[i - 1][j] + 1;\n          let west = distances[i][j - 1] + 1;\n          distances[i][j] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances(distances) {\n    let i = distances.length - 1;\n    let j = distances[0].length - 1;\n    let current = distances[i][j];\n    let edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      let northWest = distances[i - 1][j - 1];\n      let west = distances[i - 1][j];\n      let north = distances[i][j - 1];\n\n      let min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    let prefixCount = 0;\n    let suffixCount = 0;\n    let splice;\n\n    let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    let ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    let splices = [];\n    let index = currentStart;\n    let oldIndex = oldStart;\n    for (let i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix(current, old, searchLength) {\n    for (let i = 0; i < searchLength; i++)\n      if (!this.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix(current, old, searchLength) {\n    let index1 = current.length;\n    let index2 = old.length;\n    let count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nlet calculateSplices = (current, previous) =>\n  ArraySplice.calculateSplices(current, previous);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// NOTE: normalize event contruction where necessary (IE11)\nlet NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nvar Distributor = class {\n\n  constructor(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  getInsertionPoints() {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  }\n\n  hasInsertionPoint() {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  }\n\n  isInsertionPoint(node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  }\n\n  distribute() {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  }\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  collectPool() {\n    let host = this.root.host;\n    let pool=[], i=0;\n    for (let n=host.firstChild; n; n=n.nextSibling) {\n      pool[i++] = n;\n    }\n    return pool;\n  }\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  distributePool(node, pool) {\n    let dirtyRoots = [];\n    let p$ = this.root._insertionPoints;\n    for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      let parent = p.parentNode;\n      if (parent && parent.shadyRoot &&\n          this.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (let i=0; i < pool.length; i++) {\n      let p = pool[i];\n      if (p) {\n        p.__shady = p.__shady || {};\n        p.__shady.assignedSlot = undefined;\n        // remove undistributed elements from physical dom.\n        let parent = parentNode(p);\n        if (parent) {\n          removeChild.call(parent, p);\n        }\n      }\n    }\n    return dirtyRoots;\n  }\n\n  distributeInsertionPoint(insertionPoint, pool) {\n    let prevAssignedNodes = insertionPoint.__shady.assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint.__shady.assignedNodes = [];\n    let needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    let anyDistributed = false;\n    for (let i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      let children$$1 = insertionPoint.childNodes;\n      for (let j = 0, node; j < children$$1.length; j++) {\n        node = children$$1[j];\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (let i=0; i < prevAssignedNodes.length; i++) {\n        prevAssignedNodes[i].__shady._prevAssignedSlot = null;\n      }\n      if (insertionPoint.__shady.assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  }\n\n  clearAssignedSlots(slot, savePrevious) {\n    let n$ = slot.__shady.assignedNodes;\n    if (n$) {\n      for (let i=0; i < n$.length; i++) {\n        let n = n$[i];\n        if (savePrevious) {\n          n.__shady._prevAssignedSlot = n.__shady.assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n.__shady.assignedSlot === slot) {\n          n.__shady.assignedSlot = null;\n        }\n      }\n    }\n  }\n\n  matchesInsertionPoint(node, insertionPoint) {\n    let slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    let slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  }\n\n  distributeNodeInto(child, insertionPoint) {\n    insertionPoint.__shady.assignedNodes.push(child);\n    child.__shady.assignedSlot = insertionPoint;\n  }\n\n  setDistributedNodesOnInsertionPoint(insertionPoint) {\n    let n$ = insertionPoint.__shady.assignedNodes;\n    insertionPoint.__shady.distributedNodes = [];\n    for (let i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this.isInsertionPoint(n)) {\n        let d$ = n.__shady.distributedNodes;\n        if (d$) {\n          for (let j=0; j < d$.length; j++) {\n            insertionPoint.__shady.distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint.__shady.distributedNodes.push(n$[i]);\n      }\n    }\n  }\n\n  _fireSlotChange(insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint.__shady.assignedSlot) {\n      this._fireSlotChange(insertionPoint.__shady.assignedSlot);\n    }\n  }\n\n  isFinalDestination(insertionPoint) {\n    return !(insertionPoint.__shady.assignedSlot);\n  }\n\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nclass ShadyRoot {\n\n  constructor(host) {\n    if (!host) {\n      throw 'Must provide a host';\n    }\n    // NOTE: this strange construction is necessary because\n    // DocumentFragment cannot be subclassed on older browsers.\n    let frag = document.createDocumentFragment();\n    frag.__proto__ = ShadyFragmentMixin;\n    frag._init(host);\n    return frag;\n  }\n\n}\n\nlet ShadyMixin = {\n\n  _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // logical dom setup\n    recordChildNodes(host);\n    recordChildNodes(this);\n    // root <=> host\n    host.shadowRoot = this;\n    this.host = host;\n    // state flags\n    this._renderPending = false;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render\n  update() {\n    if (!this._renderPending) {\n      this._renderPending = true;\n      enqueue(() => this.render());\n    }\n  },\n\n  _getRenderRoot() {\n    let root = this._rendererForHost();\n    // TODO(sorvell): actually want the highest dirty root in distribution tree\n    return root ? root._getRenderRoot() : this;\n  },\n\n  // Returns the shadyRoot `this.host` if `this.host`\n  // has children that require distribution.\n  _rendererForHost() {\n    let root = this.host.getRootNode();\n    if (isShadyRoot(root)) {\n      let c$ = this.host.childNodes;\n      for (let i=0, c; i < c$.length; i++) {\n        c = c$[i];\n        if (this._distributor.isInsertionPoint(c)) {\n          return root;\n        }\n      }\n    }\n  },\n\n  render() {\n    if (this._renderPending) {\n      this._getRenderRoot()._render();\n    }\n  },\n\n  _render() {\n    this._renderPending = false;\n    if (!this._skipUpdateInsertionPoints) {\n      this.updateInsertionPoints();\n    } else if (!this._hasRendered) {\n      this._insertionPoints = [];\n    }\n    this._skipUpdateInsertionPoints = false;\n    // TODO(sorvell): can add a first render optimization here\n    // to use if there are no insertion points\n    // 1. clear host node of composed children\n    // 2. appendChild the shadowRoot itself or (more robust) its logical children\n    // NOTE: this didn't seem worth it in perf testing\n    // but not ready to delete this info.\n    // logical\n    this.distribute();\n    // physical\n    this.compose();\n    this._hasRendered = true;\n  },\n\n  forceRender() {\n    this._renderPending = true;\n    this.render();\n  },\n\n  distribute() {\n    let dirtyRoots = this._distributor.distribute();\n    for (let i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i]._render();\n    }\n  },\n\n  updateInsertionPoints() {\n    let i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (let i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this) {\n          this._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (let i=0, c; i < i$.length; i++) {\n      c = i$[i];\n      c.__shady = c.__shady || {};\n      recordChildNodes(c);\n      recordChildNodes(c.parentNode);\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree() {\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    let p$ = this._insertionPoints || [];\n    for (let i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = p.parentNode;\n      if ((parent !== this.host) && (parent !== this)) {\n        this._updateChildNodes(parent, this._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children$$1 = [];\n    let c$ = (node.shadyRoot || node).childNodes;\n    for (let i = 0; i < c$.length; i++) {\n      let child = c$[i];\n      if (this._distributor.isInsertionPoint(child)) {\n        let distributedNodes = child.__shady.distributedNodes ||\n          (child.__shady.distributedNodes = []);\n        for (let j = 0; j < distributedNodes.length; j++) {\n          let distributedNode = distributedNodes[j];\n          if (this.isFinalDestination(child, distributedNode)) {\n            children$$1.push(distributedNode);\n          }\n        }\n      } else {\n        children$$1.push(child);\n      }\n    }\n    return children$$1;\n  },\n\n  isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children$$1) {\n    let composed = Array.from(isShadyRoot(container) ?\n      container.childNodes :\n      childNodes(container));\n    let splices = calculateSplices(children$$1, composed);\n    // process removals\n    for (let i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (parentNode(n) === container) {\n          removeChild.call(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i=0, s, next; (i<splices.length) && (s=splices[i]); i++) { //eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j=s.index, n; j < s.index + s.addedCount; j++) {\n        n = children$$1[j];\n        insertBefore.call(container, n, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j, 0, n);\n      }\n    }\n  },\n\n  getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n};\n\nlet ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nextendAll(ShadyFragmentMixin, ShadyMixin);\n// ensure element descriptors (IE/Edge don't have em)\nObject.defineProperties(ShadyFragmentMixin, {\n  activeElement: OtherAccessors.activeElement,\n  innerHTML: InsideAccessors.innerHTML,\n  firstElementChild: InsideAccessors.firstElementChild,\n  lastElementChild: InsideAccessors.lastElementChild,\n  children: InsideAccessors.children\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet assignedSlotDesc = {\n  get() {\n    return getProperty(this, 'assignedSlot') || null;\n  },\n  configurable: true\n};\n\nlet Node$1 = {\n\n  addEventListener: addEventListener$1,\n\n  removeEventListener: removeEventListener$1,\n\n  appendChild(node) {\n    return insertBefore$1(this, node);\n  },\n\n  insertBefore(node, ref_node) {\n    return insertBefore$1(this, node, ref_node);\n  },\n\n  removeChild(node) {\n    return removeChild$1(this, node);\n  },\n\n  replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  cloneNode(deep) {\n    return cloneNode$1(this, deep);\n  },\n\n  getRootNode(options) {\n    return getRootNode(this, options);\n  }\n\n};\n\nObject.defineProperties(Node$1, {\n  isConnected: {\n    get() {\n      return document.documentElement.contains(this);\n    },\n    configurable: true\n  }\n});\n\n// NOTE: For some reason `Text` redefines `assignedSlot`\nlet Text$1 = {};\n\nObject.defineProperties(Text$1, {\n  assignedSlot: assignedSlotDesc\n});\n\nlet Fragment = {\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector(selector) {\n    // match selector and halt on first result.\n    let result = query(this, function(n) {\n      return matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll(selector) {\n    return query(this, function(n) {\n      return matchesSelector(n, selector);\n    });\n  }\n\n};\n\nlet assignedNodes = function(options) {\n  if (this.localName === 'slot') {\n    renderRootNode(this);\n    return this.__shady ?\n      ((options && options.flatten ? this.__shady.distributedNodes :\n      this.__shady.assignedNodes) || []) :\n      [];\n  }\n};\n\nlet Slot = {\n  assignedNodes: assignedNodes\n};\n\nlet Element$1 = extendAll({}, Fragment, Slot, {\n\n  setAttribute(name, value) {\n    setAttribute$1(this, name, value);\n  },\n\n  removeAttribute(name) {\n    removeAttribute$1(this, name);\n  },\n\n  attachShadow() {\n    return new ShadyRoot(this);\n  }\n\n});\n\nObject.defineProperties(Element$1, {\n\n  assignedSlot: assignedSlotDesc,\n\n  shadowRoot: ExtraInsideAccessors.shadowRoot,\n\n  slot: {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    },\n    configurable: true\n  }\n});\n\n// TODO(sorvell): importNode\nlet Document$1 = extendAll({}, Fragment);\n\nfunction extendGlobal(proto, obj) {\n  let n$ = Object.getOwnPropertyNames(obj);\n  for (let i=0; i < n$.length; i++) {\n    let n = n$[i];\n    let d = Object.getOwnPropertyDescriptor(obj, n);\n    if (d.value) {\n      proto[n] = d.value;\n    } else {\n      Object.defineProperty(proto, n, d);\n    }\n  }\n}\n\nObject.defineProperties(Document$1, {\n  _activeElement: OtherAccessors.activeElement\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nif (settings.inUse) {\n\n  window.ShadyDOM = {\n    // TODO(sorvell): remove when Polymer does not depend on this.\n    inUse: settings.inUse,\n    // TODO(sorvell): remove when Polymer does not depend on this.\n    patch: function(node) { return node; },\n    getComposedInnerHTML: getComposedInnerHTML,\n    getComposedChildNodes: getComposedChildNodes,\n    isShadyRoot: isShadyRoot,\n    // TODO(sorvell): exposed for testing only, worth it?\n    enqueue: enqueue,\n    flush: flush,\n    settings: settings,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren,\n    nativeMethods: nativeMethods\n  };\n\n  window.Event = PatchedEvent;\n  window.CustomEvent = PatchedCustomEvent;\n  window.MouseEvent = PatchedMouseEvent;\n  activateFocusEventOverrides();\n\n  extendGlobal(Node.prototype, Node$1);\n  extendGlobal(Text.prototype, Text$1);\n  extendGlobal(DocumentFragment.prototype, Fragment);\n  extendGlobal(Element.prototype, Element$1);\n  extendGlobal(Document.prototype, Document$1);\n  if (window.HTMLSlotElement) {\n    extendGlobal(window.HTMLSlotElement.prototype, Slot);\n  }\n\n  tryExtendAccessors(Node.prototype);\n  tryExtendAccessors(Text.prototype);\n  tryExtendAccessors(DocumentFragment.prototype);\n  tryExtendAccessors(Element.prototype);\n  let nativeHTMLElement =\n    (window.customElements && customElements.nativeHTMLElement) ||\n    HTMLElement;\n  tryExtendAccessors(nativeHTMLElement.prototype);\n  tryExtendAccessors(Document.prototype);\n  if (window.HTMLSlotElement) {\n    tryExtendAccessors(window.HTMLSlotElement.prototype);\n  }\n\n  if (!settings.hasDescriptors) {\n    Object.defineProperty(document, '_activeElement', OtherAccessors.activeElement);\n  }\n\n}\n\n}());\n"]}