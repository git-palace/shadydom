{"version":3,"sources":["env.js"],"names":["isShadyRoot","obj","__localName","matchesSelector","element","selector","matches","call","copyOwnProperty","name","source","target","pd","Object","getOwnPropertyDescriptor","defineProperty","extend","n$","getOwnPropertyNames","n","i","length","extendAll","sources","mixin","patchPrototype","proto","getPrototypeOf","hasOwnProperty","patchProto","create","__sourceProto","__patchProto","setPrototypeOf","newSplice","index","removed","addedCount","enqueue","callback","scheduled","promish","then","flush","flushList","push","flushCount","shift","customElements$1","isFlushedMaxed","Error","escapeReplace","c","escapeAttr","s","replace","escapeAttrRegExp","escapeData","escapeDataRegExp","makeSet","arr","set","getOuterHTML","node","parentNode","composed","nodeType","Node","ELEMENT_NODE","tagName","localName","attrs","attributes","attr","value","voidElements","getInnerHTML","TEXT_NODE","data","plaintextParents","COMMENT_NODE","window","console","error","content","c$","childNodes","child","l","nodeWalker","currentNode","firstChild","lastChild","nodes","nextSibling","firstElementChild","elementWalker","lastElementChild","previousElementSibling","previousSibling","nextElementSibling","children","innerHTML","textContent","nodeValue","textWalker","document","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","getProperty","prop","__shady","hasProperty","recordInsertBefore","container","ref_node","DOCUMENT_FRAGMENT_NODE","linkNode","resetTo","ps","ns","recordRemoveChild","p","appendChild","parent","nativeAppendChild","insertBefore","nativeInsertBefore","removeChild","nativeRemoveChild","setAttribute","nativeSetAttribute","getDocumentActiveElement","activeElementDesc","get","generateSimpleDescriptor","nativeTree","configurable","filterMutations","mutations","targetRootNode","getRootNode","map","mutation","mutationInScope","addedNodes","Array","from","filter","m","pathComposer","startNode","composedPath","current","startRoot","assignedSlot","host","retarget","refNode","path","refNodePath","p$","ancestor","lastRoot","root","rootIdx","indexOf","mixinComposedFlag","Base","klazz","type","options","event","__composed","prototype","fireHandlers","phase","hs","__handlers","fn","__immediatePropagationStopped","retargetNonBubblingEvent","e","__propagationStopped","Event","AT_TARGET","lastFiredRoot","shadowRoot","addEventListener","optionsOrCapture","capture","once","passive","__eventWrappers","wrapperFn","removeEventListener","__target","__relatedTarget","relatedTarget","EventMixin","eventPhase","BUBBLING_PHASE","stopImmediatePropagation","nonBubblingEventsToRetarget","bubble","origAddEventListener","splice","origRemoveEventListener","idx","activateFocusEventOverrides","ev","settings","ShadyDOM","hasNativeShadowDOM","Element","attachShadow","desc","hasDescriptors","hasNerfedDescriptors","inUse","force","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","__proto__","Promise","resolve","twiddle","createTextNode","cb","observer","MutationObserver","disconnect","observe","characterData","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","j","equals","north","west","spliceOperationsFromEditDistances","edits","min","northWest","reverse","calcSplices","prefixCount","suffixCount","minLength","Math","sharedPrefix","sharedSuffix","ops","splices","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","customElements","list","SHOW_ALL","SHOW_ELEMENT","freeze","parentElement","recordChildNodes","Document","mixinImpl","addNode","ownerRoot","ownerShadyRootForNode","ipAdded","__noInsertionPoint","_skipUpdateInsertionPoints","_maybeAddInsertionPoint","handled","_maybeDistribute","shadyRoot","removeNode","distributed","logicalParent","maybeDistributeParent","removedDistributed","_removeDistributedChildren","addedInsertionPoint","getInsertionPointTag","update","_removeOwnerShadyRoot","_scheduleObserver","addedNode","removedNode","removedNodes","schedule","removeNodeFromParent","_hasCachedOwnerRoot","__ownerShadyRoot","documentElement","contains","insertionPointTag","fragContent","querySelector","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","querySelectorAll","np","na","hasInsertionPoint","hostNeedsDist","ip$","_insertionPoints","insertionPoint","_contains","dc$","assignedNodes","flatten","firstComposedNode","isFinalDestination","clearNode","maybeDistributeAttributeChange","query","matcher","halter","_queryElements","elements","_queryElement","result","activeElementForNode","active","isShadyRoot$$1","activeRoot","renderRootNode","render","nativeCloneNode","cloneNode","nativeRemoveAttribute$1","removeAttribute","setAttribute$1","ShadyCSS","ownerDocument","setElementClass","assignedSlotDesc","NodeMixin","replaceChild","deep","nc","defineProperties","tc","cn","join","text","TextMixin","FragmentMixin","childrenDescriptor","domParser","DOMParser","insertDOMFrom","innerHTMLDescriptor","doc","parseFromString","head","body","SlotMixin","distributedNodes","ElementMixin","slot","getAttribute","HTMLElementMixin","activeElementDescriptor","ActiveElementMixin","activeElement","UnderActiveElementMixin","_activeElement","Mixins","Fragment","Text","Slot","HTMLElement","mixin$$1","ifExists","__nativeProps","sd","warn","md","getComposedInnerHTML","getComposedChildNodes","NormalizedEvent","inType","params","createEvent","initEvent","bubbles","cancelable","Distributor","constructor","getInsertionPoints","isInsertionPoint","distribute","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","prevAssignedNodes","clearAssignedSlots","needsSlotChange","anyDistributed","matchesInsertionPoint","_prevAssignedSlot","distributeNodeInto","children$$1","setDistributedNodesOnInsertionPoint","_fireSlotChange","savePrevious","slotName","trim","d$","dispatchEvent","ShadyRoot","frag","createDocumentFragment","ShadyFragmentMixin","_init","ShadyMixin","_renderPending","_hasRendered","_distributor","_getRenderRoot","_rendererForHost","_render","updateInsertionPoints","compose","forceRender","i$","__insertionPoints","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNode","d","next","DocumentFragment","AsyncObserver","_scheduled","callbacks","Set","takeRecords","forEach","observeChildren","add","_callback","_observer","_node","unobserveChildren","handle","delete","size","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","__patched","isTrusted","__composedPath","currentTarget","__relatedTargetComposedPath","stopPropagation","PatchedEvent","PatchedCustomEvent","CustomEvent","PatchedMouseEvent","MouseEvent","patch","createRootAndEnsurePatched","__nativeSetAttribute","classNameDescriptor","h","nativeHTMLElement","he","HTMLSlotElement"],"mappings":"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","file":"shadydom.min.js","sourcesContent":["(function () {\n'use strict';\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet settings = window.ShadyDOM || {};\n\nsettings.hasNativeShadowDOM = Boolean(Element.prototype.attachShadow && Node.prototype.getRootNode);\n\nlet desc = Object.getOwnPropertyDescriptor(Node.prototype, 'firstChild');\n\nsettings.hasDescriptors = Boolean(desc && desc.configurable && desc.get);\nsettings.hasNerfedDescriptors = Boolean(desc && !settings.hasDescriptors);\n\n\nsettings.inUse = settings.force || !settings.hasNativeShadowDOM;\n\n\n\nfunction isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nlet p = Element.prototype;\nlet matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nfunction matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  let pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nfunction extend(target, source) {\n  if (target && source) {\n    let n$ = Object.getOwnPropertyNames(source);\n    for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nfunction extendAll(target, ...sources) {\n  for (let i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nfunction mixin(target, source) {\n  for (var i in source) {\n    target[i] = source[i];\n  }\n  return target;\n}\n\nlet setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n  obj.__proto__ = proto;\n  return obj;\n};\n\nfunction patchPrototype(obj, mixin) {\n  let proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    let patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  setPrototypeOf(obj, proto.__patchProto);\n}\n\n\n\n\n\n// TODO(sorvell): actually rely on a real Promise polyfill...\nlet promish;\nif (window.Promise) {\n  promish = Promise.resolve();\n} else {\n  let twiddle = document.createTextNode('');\n  let content = 0;\n  promish = {\n    then(cb) {\n      // To preserve timing with Promise microtasks\n      // we create a new observer for every callback.\n      let observer = new MutationObserver(function() {\n        observer.disconnect();\n        cb();\n      });\n      observer.observe(twiddle, {characterData: true});\n      twiddle.textContent = content++;\n    }\n  };\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\nlet ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    // \"Deletion\" columns\n    let rowCount = oldEnd - oldStart + 1;\n    let columnCount = currentEnd - currentStart + 1;\n    let distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (let i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (let j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (let i = 1; i < rowCount; i++) {\n      for (let j = 1; j < columnCount; j++) {\n        if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n          distances[i][j] = distances[i - 1][j - 1];\n        else {\n          let north = distances[i - 1][j] + 1;\n          let west = distances[i][j - 1] + 1;\n          distances[i][j] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances(distances) {\n    let i = distances.length - 1;\n    let j = distances[0].length - 1;\n    let current = distances[i][j];\n    let edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      let northWest = distances[i - 1][j - 1];\n      let west = distances[i - 1][j];\n      let north = distances[i][j - 1];\n\n      let min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    let prefixCount = 0;\n    let suffixCount = 0;\n    let splice;\n\n    let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    let ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    let splices = [];\n    let index = currentStart;\n    let oldIndex = oldStart;\n    for (let i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix(current, old, searchLength) {\n    for (let i = 0; i < searchLength; i++)\n      if (!this.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix(current, old, searchLength) {\n    let index1 = current.length;\n    let index2 = old.length;\n    let count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nlet calculateSplices = (current, previous) =>\n  ArraySplice.calculateSplices(current, previous);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// render enqueuer/flusher\nlet customElements$1 = window.customElements;\nlet flushList = [];\nlet scheduled;\nlet flushCount = 0;\nlet flushMax = 100;\nfunction enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    promish.then(flush);\n  }\n  flushList.push(callback);\n}\n\nfunction flush() {\n  scheduled = false;\n  flushCount++;\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements$1 && customElements$1.flush) {\n    customElements$1.flush();\n  }\n  // continue flushing after elements are upgraded...\n  const isFlushedMaxed = (flushCount > flushMax);\n  if (flushList.length && !isFlushedMaxed) {\n      flush();\n  }\n  flushCount = 0;\n  if (isFlushedMaxed) {\n    throw new Error('Loop detected in ShadyDOM distribution, aborting.')\n  }\n}\n\nflush.list = flushList;\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nfunction getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nfunction getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  let s = '';\n  let c$ = composed ? composed(node) : node.childNodes;\n  for (let i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nodeWalker = document.createTreeWalker(document, NodeFilter.SHOW_ALL,\n  null, false);\n\nlet elementWalker = document.createTreeWalker(document, NodeFilter.SHOW_ELEMENT,\n  null, false);\n\nfunction parentNode(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.parentNode();\n}\n\nfunction firstChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.firstChild();\n}\n\nfunction lastChild(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.lastChild();\n}\n\nfunction previousSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.previousSibling();\n}\n\nfunction nextSibling(node) {\n  nodeWalker.currentNode = node;\n  return nodeWalker.nextSibling();\n}\n\nfunction childNodes(node) {\n  let nodes = [];\n  nodeWalker.currentNode = node;\n  let n = nodeWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = nodeWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction parentElement(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.parentNode();\n}\n\nfunction firstElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.firstChild();\n}\n\nfunction lastElementChild(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.lastChild();\n}\n\nfunction previousElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.previousSibling();\n}\n\nfunction nextElementSibling(node) {\n  elementWalker.currentNode = node;\n  return elementWalker.nextSibling();\n}\n\nfunction children(node) {\n  let nodes = [];\n  elementWalker.currentNode = node;\n  let n = elementWalker.firstChild();\n  while (n) {\n    nodes.push(n);\n    n = elementWalker.nextSibling();\n  }\n  return nodes;\n}\n\nfunction innerHTML(node) {\n  return getInnerHTML(node, (n) => childNodes(n));\n}\n\nfunction textContent(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) {\n    return node.nodeValue;\n  }\n  let textWalker = document.createTreeWalker(node, NodeFilter.SHOW_TEXT,\n    null, false);\n  let content = '', n;\n  while ( (n = textWalker.nextNode()) ) {\n    // TODO(sorvell): can't use textContent since we patch it on Node.prototype!\n    // However, should probably patch it only on element.\n    content += n.nodeValue;\n  }\n  return content;\n}\n\nvar nativeTree = Object.freeze({\n\tparentNode: parentNode,\n\tfirstChild: firstChild,\n\tlastChild: lastChild,\n\tpreviousSibling: previousSibling,\n\tnextSibling: nextSibling,\n\tchildNodes: childNodes,\n\tparentElement: parentElement,\n\tfirstElementChild: firstElementChild,\n\tlastElementChild: lastElementChild,\n\tpreviousElementSibling: previousElementSibling,\n\tnextElementSibling: nextElementSibling,\n\tchildren: children,\n\tinnerHTML: innerHTML,\n\ttextContent: textContent\n});\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nfunction getProperty(node, prop) {\n  return node.__shady && node.__shady[prop];\n}\n\nfunction hasProperty(node, prop) {\n  return getProperty(node, prop) !== undefined;\n}\n\nfunction recordInsertBefore(node, container, ref_node) {\n  container.__shady = container.__shady || {};\n  if (hasProperty(container, 'firstChild')) {\n    container.__shady.childNodes = null;\n  }\n  // handle document fragments\n  if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n    let c$ = node.childNodes;\n    for (let i=0; i < c$.length; i++) {\n      linkNode(c$[i], container, ref_node);\n    }\n    // cleanup logical dom in doc fragment.\n    node.__shady = node.__shady || {};\n    let resetTo = hasProperty(node, 'firstChild') ? null : undefined;\n    node.__shady.firstChild = node.__shady.lastChild = resetTo;\n    node.__shady.childNodes = resetTo;\n  } else {\n    linkNode(node, container, ref_node);\n  }\n}\n\nfunction linkNode(node, container, ref_node) {\n  ref_node = ref_node || null;\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (ref_node) {\n    ref_node.__shady = ref_node.__shady || {};\n  }\n  // update ref_node.previousSibling <-> node\n  node.__shady.previousSibling = ref_node ? ref_node.__shady.previousSibling :\n    container.lastChild;\n  let ps = node.__shady.previousSibling;\n  if (ps && ps.__shady) {\n    ps.__shady.nextSibling = node;\n  }\n  // update node <-> ref_node\n  let ns = node.__shady.nextSibling = ref_node;\n  if (ns && ns.__shady) {\n    ns.__shady.previousSibling = node;\n  }\n  // update node <-> container\n  node.__shady.parentNode = container;\n  if (ref_node) {\n    if (ref_node === container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  } else {\n    container.__shady.lastChild = node;\n    if (!container.__shady.firstChild) {\n      container.__shady.firstChild = node;\n    }\n  }\n  // remove caching of childNodes\n  container.__shady.childNodes = null;\n}\n\nfunction recordRemoveChild(node, container) {\n  node.__shady = node.__shady || {};\n  container.__shady = container.__shady || {};\n  if (node === container.__shady.firstChild) {\n    container.__shady.firstChild = node.__shady.nextSibling;\n  }\n  if (node === container.__shady.lastChild) {\n    container.__shady.lastChild = node.__shady.previousSibling;\n  }\n  let p = node.__shady.previousSibling;\n  let n = node.__shady.nextSibling;\n  if (p) {\n    p.__shady = p.__shady || {};\n    p.__shady.nextSibling = n;\n  }\n  if (n) {\n    n.__shady = n.__shady || {};\n    n.__shady.previousSibling = p;\n  }\n  // When an element is removed, logical data is no longer tracked.\n  // Explicitly set `undefined` here to indicate this. This is disginguished\n  // from `null` which is set if info is null.\n  node.__shady.parentNode = node.__shady.previousSibling =\n    node.__shady.nextSibling = undefined;\n  if (hasProperty(container, 'childNodes')) {\n    // remove caching of childNodes\n    container.__shady.childNodes = null;\n  }\n}\n\nlet recordChildNodes = function(node) {\n  if (!hasProperty(node, 'firstChild')) {\n    node.__shady = node.__shady || {};\n    node.__shady.firstChild = firstChild(node);\n    node.__shady.lastChild = lastChild(node);\n    let c$ = node.__shady.childNodes = childNodes(node);\n    for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n      n.__shady = n.__shady || {};\n      n.__shady.parentNode = node;\n      n.__shady.nextSibling = c$[i+1] || null;\n      n.__shady.previousSibling = c$[i-1] || null;\n    }\n  }\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet nativeAppendChild = Element.prototype.appendChild;\nlet nativeInsertBefore = Element.prototype.insertBefore;\nlet nativeRemoveChild = Element.prototype.removeChild;\nlet nativeSetAttribute = Element.prototype.setAttribute;\nfunction appendChild(parent, child) {\n  return nativeAppendChild.call(parent, child);\n}\n\nfunction insertBefore(parent, child, ref_node) {\n  return nativeInsertBefore.call(parent, child, ref_node);\n}\nfunction removeChild(parent, child) {\n  return nativeRemoveChild.call(parent, child);\n}\n\nfunction setAttribute(node, name, value) {\n  nativeSetAttribute.call(node, name, value);\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet activeElementDesc = Object.getOwnPropertyDescriptor(Document.prototype, 'activeElement');\nfunction getDocumentActiveElement() {\n  if (activeElementDesc && activeElementDesc.get) {\n    return activeElementDesc.get.call(document);\n  }\n}\n\nlet mixinImpl = {\n\n  // Try to add node. Record logical info, track insertion points, perform\n  // distribution iff needed. Return true if the add is handled.\n  addNode(container, node, ref_node) {\n    let ownerRoot = this.ownerShadyRootForNode(container);\n    let ipAdded;\n    if (ownerRoot) {\n      // optimization: special insertion point tracking\n      // TODO(sorvell): verify that the renderPending check here should not be needed.\n      // if (node.__noInsertionPoint && !ownerRoot._renderPending) {\n      if (node.__noInsertionPoint) {\n        ownerRoot._skipUpdateInsertionPoints = true;\n      }\n      // note: we always need to see if an insertion point is added\n      // since this saves logical tree info; however, invalidation state\n      // needs\n      ipAdded = this._maybeAddInsertionPoint(node, container, ownerRoot);\n      // invalidate insertion points IFF not already invalid!\n      if (ipAdded) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n      }\n    }\n    if (hasProperty(container, 'firstChild')) {\n      recordInsertBefore(node, container, ref_node);\n    }\n    // if not distributing and not adding to host, do a fast path addition\n    // TODO(sorvell): revisit flow since `ipAdded` needed here if\n    // node is a fragment that has a patched QSA.\n    let handled = this._maybeDistribute(node, container, ownerRoot, ipAdded) ||\n      container.shadyRoot;\n    return handled;\n  },\n\n  // Try to remove node: update logical info and perform distribution iff\n  // needed. Return true if the removal has been handled.\n  // note that it's possible for both the node's host and its parent\n  // to require distribution... both cases are handled here.\n  removeNode(node) {\n    // important that we want to do this only if the node has a logical parent\n    let logicalParent = hasProperty(node, 'parentNode') &&\n      getProperty(node, 'parentNode');\n    let distributed;\n    let ownerRoot = this.ownerShadyRootForNode(node);\n    if (logicalParent || ownerRoot) {\n      // distribute node's parent iff needed\n      distributed = this.maybeDistributeParent(node);\n      if (logicalParent) {\n        recordRemoveChild(node, logicalParent);\n      }\n      // remove node from root and distribute it iff needed\n      let removedDistributed = ownerRoot &&\n        this._removeDistributedChildren(ownerRoot, node);\n      let addedInsertionPoint = (logicalParent && ownerRoot &&\n        logicalParent.localName === ownerRoot.getInsertionPointTag());\n      if (removedDistributed || addedInsertionPoint) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n        ownerRoot.update();\n      }\n    }\n    this._removeOwnerShadyRoot(node);\n    return distributed;\n  },\n\n\n  _scheduleObserver(node, addedNode, removedNode) {\n    let observer = node.__shady && node.__shady.observer;\n    if (observer) {\n      if (addedNode) {\n        observer.addedNodes.push(addedNode);\n      }\n      if (removedNode) {\n        observer.removedNodes.push(removedNode);\n      }\n      observer.schedule();\n    }\n  },\n\n  removeNodeFromParent(node, parent) {\n    if (parent) {\n      this._scheduleObserver(parent, null, node);\n      return this.removeNode(node);\n    } else {\n      this._removeOwnerShadyRoot(node);\n    }\n  },\n\n  _hasCachedOwnerRoot(node) {\n    return Boolean(node.__ownerShadyRoot !== undefined);\n  },\n\n  getRootNode(node) {\n    if (!node || !node.nodeType) {\n      return;\n    }\n    let root = node.__ownerShadyRoot;\n    if (root === undefined) {\n      if (isShadyRoot(node)) {\n        root = node;\n      } else {\n        let parent = node.parentNode;\n        root = parent ? this.getRootNode(parent) : node;\n      }\n      // memo-ize result for performance but only memo-ize\n      // result if node is in the document. This avoids a problem where a root\n      // can be cached while an element is inside a fragment.\n      // If this happens and we cache the result, the value can become stale\n      // because for perf we avoid processing the subtree of added fragments.\n      if (document.documentElement.contains(node)) {\n        node.__ownerShadyRoot = root;\n      }\n    }\n    return root;\n  },\n\n  ownerShadyRootForNode(node) {\n    let root = this.getRootNode(node);\n    if (isShadyRoot(root)) {\n      return root;\n    }\n  },\n\n  _maybeDistribute(node, container, ownerRoot, ipAdded) {\n    // TODO(sorvell): technically we should check non-fragment nodes for\n    // <content> children but since this case is assumed to be exceedingly\n    // rare, we avoid the cost and will address with some specific api\n    // when the need arises.  For now, the user must call\n    // distributeContent(true), which updates insertion points manually\n    // and forces distribution.\n    let insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n    let fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n      !node.__noInsertionPoint &&\n      insertionPointTag && node.querySelector(insertionPointTag);\n    let wrappedContent = fragContent &&\n      (fragContent.parentNode.nodeType !==\n      Node.DOCUMENT_FRAGMENT_NODE);\n    let hasContent = fragContent || (node.localName === insertionPointTag);\n    // There are 3 possible cases where a distribution may need to occur:\n    // 1. <content> being inserted (the host of the shady root where\n    //    content is inserted needs distribution)\n    // 2. children being inserted into parent with a shady root (parent\n    //    needs distribution)\n    // 3. container is an insertionPoint\n    if (hasContent || (container.localName === insertionPointTag) || ipAdded) {\n      if (ownerRoot) {\n        // note, insertion point list update is handled after node\n        // mutations are complete\n        ownerRoot.update();\n      }\n    }\n    let needsDist = this._nodeNeedsDistribution(container);\n    if (needsDist) {\n      container.shadyRoot.update();\n    }\n    // Return true when distribution will fully handle the composition\n    // Note that if a content was being inserted that was wrapped by a node,\n    // and the parent does not need distribution, return false to allow\n    // the nodes to be added directly, after which children may be\n    // distributed and composed into the wrapping node(s)\n    return needsDist || (hasContent && !wrappedContent);\n  },\n\n  /* note: parent argument is required since node may have an out\n  of date parent at this point; returns true if a <content> is being added */\n  _maybeAddInsertionPoint(node, parent, root) {\n    let added;\n    let insertionPointTag = root.getInsertionPointTag();\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      !node.__noInsertionPoint) {\n      let c$ = node.querySelectorAll(insertionPointTag);\n      for (let i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n        np = n.parentNode;\n        // don't allow node's parent to be fragment itself\n        if (np === node) {\n          np = parent;\n        }\n        na = this._maybeAddInsertionPoint(n, np, root);\n        added = added || na;\n      }\n    } else if (node.localName === insertionPointTag) {\n      recordChildNodes(parent);\n      recordChildNodes(node);\n      added = true;\n    }\n    return added;\n  },\n\n  _nodeNeedsDistribution(node) {\n    return node && node.shadyRoot &&\n      node.shadyRoot.hasInsertionPoint();\n  },\n\n  _removeDistributedChildren(root, container) {\n    let hostNeedsDist;\n    let ip$ = root._insertionPoints;\n    for (let i=0; i<ip$.length; i++) {\n      let insertionPoint = ip$[i];\n      if (this._contains(container, insertionPoint)) {\n        let dc$ = insertionPoint.assignedNodes({flatten: true});\n        for (let j=0; j<dc$.length; j++) {\n          hostNeedsDist = true;\n          let node = dc$[j];\n          let parent = parentNode(node);\n          if (parent) {\n            removeChild(parent, node);\n          }\n        }\n      }\n    }\n    return hostNeedsDist;\n  },\n\n  _contains(container, node) {\n    while (node) {\n      if (node == container) {\n        return true;\n      }\n      node = node.parentNode;\n    }\n  },\n\n  _removeOwnerShadyRoot(node) {\n    // optimization: only reset the tree if node is actually in a root\n    if (this._hasCachedOwnerRoot(node)) {\n      let c$ = node.childNodes;\n      for (let i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n        this._removeOwnerShadyRoot(n);\n      }\n    }\n    node.__ownerShadyRoot = undefined;\n  },\n\n  // TODO(sorvell): This will fail if distribution that affects this\n  // question is pending; this is expected to be exceedingly rare, but if\n  // the issue comes up, we can force a flush in this case.\n  firstComposedNode(insertionPoint) {\n    let n$ = insertionPoint.assignedNodes({flatten: true});\n    let root = this.getRootNode(insertionPoint);\n    for (let i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n      // means that we're composed to this spot.\n      if (root.isFinalDestination(insertionPoint, n)) {\n        return n;\n      }\n    }\n  },\n\n  clearNode(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  },\n\n  maybeDistributeParent(node) {\n    let parent = node.parentNode;\n    if (this._nodeNeedsDistribution(parent)) {\n      parent.shadyRoot.update();\n      return true;\n    }\n  },\n\n  maybeDistributeAttributeChange(node, name) {\n    if (name === 'slot') {\n      this.maybeDistributeParent(node);\n    } else if (node.localName === 'slot' && name === 'name') {\n      let root = this.ownerShadyRootForNode(node);\n      if (root) {\n        root.update();\n      }\n    }\n  },\n\n  // NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n  // but it's also generally useful to recurse through the element tree\n  // and is used by Polymer's styling system.\n  query(node, matcher, halter) {\n    let list = [];\n    this._queryElements(node.childNodes, matcher,\n      halter, list);\n    return list;\n  },\n\n  _queryElements(elements, matcher, halter, list) {\n    for (let i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n      if (c.nodeType === Node.ELEMENT_NODE &&\n          this._queryElement(c, matcher, halter, list)) {\n        return true;\n      }\n    }\n  },\n\n  _queryElement(node, matcher, halter, list) {\n    let result = matcher(node);\n    if (result) {\n      list.push(node);\n    }\n    if (halter && halter(result)) {\n      return result;\n    }\n    this._queryElements(node.childNodes, matcher,\n      halter, list);\n  },\n\n  activeElementForNode(node) {\n    let active = getDocumentActiveElement();\n    if (!active) {\n      return null;\n    }\n    let isShadyRoot$$1 = !!(isShadyRoot(node));\n    if (node !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot$$1) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (node.host === active ||\n          !node.host.contains(active)) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    let activeRoot = this.ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== node) {\n      active = activeRoot.host;\n      activeRoot = this.ownerShadyRootForNode(active);\n    }\n    if (node === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === node ? active : null;\n    }\n  },\n\n  renderRootNode(element) {\n    var root = element.getRootNode();\n    if (isShadyRoot(root)) {\n      root.render();\n    }\n  }\n\n};\n\nlet nativeCloneNode = Element.prototype.cloneNode;\nlet nativeRemoveAttribute$1 = Element.prototype.removeAttribute;\n\nlet setAttribute$1 = function(attr, value) {\n  // avoid scoping elements in non-main document to avoid template documents\n  if (window.ShadyCSS && attr === 'class' && this.ownerDocument === document) {\n    window.ShadyCSS.setElementClass(this, value);\n  } else {\n    setAttribute(this, attr, value);\n  }\n};\n\nfunction generateSimpleDescriptor(prop) {\n  return {\n    get() {\n      let l = getProperty(this, prop);\n      return l !== undefined ? l : nativeTree[prop](this);\n    },\n    configurable: true\n  }\n}\n\nlet assignedSlotDesc = {\n  get() {\n    return getProperty(this, 'assignedSlot') || null;\n  },\n  configurable: true\n};\n\nlet NodeMixin = {\n\n  appendChild(node) {\n    return this.insertBefore(node);\n  },\n\n  // cases in which we may not be able to just do standard native call\n  // 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n  // has an insertion point)\n  // 2. container is a shadyRoot (don't distribute, instead set\n  // container to container.host.\n  // 3. node is <content> (host of container needs distribution)\n  insertBefore(node, ref_node) {\n    if (ref_node) {\n      let p = getProperty(ref_node, 'parentNode');\n      if (p !== undefined && p !== this) {\n        throw Error('The ref_node to be inserted before is not a child ' +\n          'of this node');\n      }\n    }\n    // remove node from its current position iff it's in a tree.\n    if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n      let parent = getProperty(node, 'parentNode');\n      mixinImpl.removeNodeFromParent(node, parent);\n    }\n    if (!mixinImpl.addNode(this, node, ref_node)) {\n      if (ref_node) {\n        // if ref_node is an insertion point replace with first distributed node\n        let root = mixinImpl.ownerShadyRootForNode(ref_node);\n        if (root) {\n          ref_node = ref_node.localName === root.getInsertionPointTag() ?\n            mixinImpl.firstComposedNode(ref_node) : ref_node;\n        }\n      }\n      // if adding to a shadyRoot, add to host instead\n      let container = isShadyRoot(this) ?\n        this.host : this;\n      if (ref_node) {\n        insertBefore(container, node, ref_node);\n      } else {\n        appendChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, node);\n    return node;\n  },\n\n  /**\n    Removes the given `node` from the element's `lightChildren`.\n    This method also performs dom composition.\n  */\n  removeChild(node) {\n    if (node.parentNode !== this) {\n      throw Error('The node to be removed is not a child of this node: ' +\n        node);\n    }\n    if (!mixinImpl.removeNode(node)) {\n      // if removing from a shadyRoot, remove form host instead\n      let container = isShadyRoot(this) ?\n        this.host :\n        this;\n      // not guaranteed to physically be in container; e.g.\n      // undistributed nodes.\n      let parent = parentNode(node);\n      if (container === parent) {\n        removeChild(container, node);\n      }\n    }\n    mixinImpl._scheduleObserver(this, null, node);\n    return node;\n  },\n\n  replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  cloneNode(deep) {\n    if (this.localName == 'template') {\n      return nativeCloneNode.call(this, deep);\n    } else {\n      let n = nativeCloneNode.call(this, false);\n      if (deep) {\n        let c$ = this.childNodes;\n        for (let i=0, nc; i < c$.length; i++) {\n          nc = c$[i].cloneNode(true);\n          n.appendChild(nc);\n        }\n      }\n      return n;\n    }\n  }\n};\n\nObject.defineProperties(NodeMixin, {\n\n  parentElement: generateSimpleDescriptor('parentElement'),\n\n  parentNode: generateSimpleDescriptor('parentNode'),\n\n  nextSibling: generateSimpleDescriptor('nextSibling'),\n\n  previousSibling: generateSimpleDescriptor('previousSibling'),\n\n  childNodes: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        if (!this.__shady.childNodes) {\n          this.__shady.childNodes = [];\n          for (let n=this.firstChild; n; n=n.nextSibling) {\n            this.__shady.childNodes.push(n);\n          }\n        }\n        return this.__shady.childNodes;\n      } else {\n        return childNodes(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: generateSimpleDescriptor('firstChild'),\n\n  lastChild: generateSimpleDescriptor('lastChild'),\n\n  textContent: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let tc = [];\n        for (let i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      } else {\n        return textContent(this);\n      }\n    },\n    set(text) {\n      if (this.nodeType !== Node.ELEMENT_NODE) {\n        // TODO(sorvell): can't do this if patch nodeValue.\n        this.nodeValue = text;\n      } else {\n        mixinImpl.clearNode(this);\n        if (text) {\n          this.appendChild(document.createTextNode(text));\n        }\n      }\n    },\n    configurable: true\n  }\n});\n\n// NOTE: For some reason `Text` redefines `assignedSlot`\nlet TextMixin = extend({}, NodeMixin);\nObject.defineProperties(TextMixin, {\n  assignedSlot: assignedSlotDesc\n});\n\nlet FragmentMixin = {\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector(selector) {\n    // match selector and halt on first result.\n    let result = mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll(selector) {\n    return mixinImpl.query(this, function(n) {\n      return matchesSelector(n, selector);\n    });\n  }\n\n};\n\nlet childrenDescriptor = {\n  get() {\n    if (hasProperty(this, 'firstChild')) {\n      return Array.prototype.filter.call(this.childNodes, function(n) {\n        return (n.nodeType === Node.ELEMENT_NODE);\n      });\n    } else {\n      return children(this);\n    }\n  },\n  configurable: true\n};\n\nlet domParser = new DOMParser();\n\nlet insertDOMFrom = function(target, from) {\n  let c$ = Array.from(from.childNodes);\n  for (let i=0; i < c$.length; i++) {\n    target.appendChild(c$[i]);\n  }\n};\n\nlet innerHTMLDescriptor = {\n  get() {\n    if (hasProperty(this, 'firstChild')) {\n      return getInnerHTML(this);\n    } else {\n      return innerHTML(this);\n    }\n  },\n  set(text) {\n    mixinImpl.clearNode(this);\n    let doc = domParser.parseFromString(text, 'text/html');\n    if (doc.head) {\n      insertDOMFrom(this, doc.head);\n    }\n    if (doc.body) {\n      insertDOMFrom(this, doc.body);\n    }\n  },\n  configurable: true\n};\n\nObject.defineProperties(FragmentMixin, {\n\n  children: childrenDescriptor,\n\n  innerHTML: innerHTMLDescriptor,\n\n  firstElementChild: {\n    get() {\n      if (hasProperty(this, 'firstChild')) {\n        let n = this.firstChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return firstElementChild(this);\n      }\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get() {\n      if (hasProperty(this, 'lastChild')) {\n        let n = this.lastChild;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return lastElementChild(this);\n      }\n    },\n    configurable: true\n  }\n\n});\n\nlet SlotMixin = {\n  assignedNodes(options) {\n    if (this.localName === 'slot') {\n      mixinImpl.renderRootNode(this);\n      return this.__shady ?\n        ((options && options.flatten ? this.__shady.distributedNodes :\n        this.__shady.assignedNodes) || []) :\n        [];\n    }\n  }\n};\n\nlet ElementMixin = extendAll({}, FragmentMixin, SlotMixin, {\n  // importNode(externalNode, deep) {\n  //   // for convenience use this node's ownerDoc if the node isn't a document\n  //   let doc = this instanceof Document ? this :\n  //     this.ownerDocument;\n  //   let n = nativeImportNode.call(doc, externalNode, false);\n  //   if (deep) {\n  //     let c$ = externalNode.childNodes;\n  //     for (let i=0, nc; i < c$.length; i++) {\n  //       nc = doc.importNode(c$[i], true);\n  //       n.appendChild(nc);\n  //     }\n  //   }\n  //   return n;\n  // },\n\n  // TODO(sorvell): should only exist on <slot>\n\n  setAttribute(name, value) {\n    setAttribute$1.call(this, name, value);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  },\n\n  removeAttribute(name) {\n    nativeRemoveAttribute$1.call(this, name);\n    mixinImpl.maybeDistributeAttributeChange(this, name);\n  }\n});\n\nObject.defineProperties(ElementMixin, {\n\n  assignedSlot: assignedSlotDesc,\n\n  shadowRoot: {\n    get() {\n      return this.shadyRoot;\n    },\n    set(value) {\n      this.shadyRoot = value;\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get() {\n      if (hasProperty(this, 'nextSibling')) {\n        let n = this.nextSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.nextSibling;\n        }\n        return n;\n      } else {\n        return nextElementSibling(this);\n      }\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get() {\n      if (hasProperty(this, 'previousSibling')) {\n        let n = this.previousSibling;\n        while (n && n.nodeType !== Node.ELEMENT_NODE) {\n          n = n.previousSibling;\n        }\n        return n;\n      } else {\n        return previousElementSibling(this);\n      }\n    },\n    configurable: true\n  },\n\n  slot: {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    }\n  }\n\n});\n\nlet HTMLElementMixin = {};\n\nObject.defineProperties(HTMLElementMixin, {\n\n  children: childrenDescriptor,\n\n  innerHTML: innerHTMLDescriptor\n\n});\n\nlet activeElementDescriptor = {\n  get() {\n    return mixinImpl.activeElementForNode(this);\n  }\n};\n\nlet ActiveElementMixin = {};\nObject.defineProperties(ActiveElementMixin, {\n  activeElement: activeElementDescriptor\n});\n\nlet UnderActiveElementMixin = {};\nObject.defineProperties(UnderActiveElementMixin, {\n  _activeElement: activeElementDescriptor\n});\n\n\n\nlet Mixins = {\n\n  Node: NodeMixin,\n\n  Fragment: FragmentMixin,\n\n  Text: TextMixin,\n\n  Slot: SlotMixin,\n\n  Element: ElementMixin,\n\n  HTMLElement: HTMLElementMixin,\n\n  // Note: activeElement cannot be patched on document!\n  Document: extendAll({}, ElementMixin,\n    UnderActiveElementMixin, ActiveElementMixin)\n\n};\n\nlet patchProto = function(proto, mixin$$1, ifExists) {\n  proto.__nativeProps = Object.create(proto.__nativeProps || {});\n  let n$ = Object.getOwnPropertyNames(mixin$$1);\n  for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n    let sd = Object.getOwnPropertyDescriptor(proto, n);\n    if (sd) {\n      if (!sd.configurable) {\n        window.console.warn('Could not patch', n, 'on', proto);\n        return;\n      }\n      proto.__nativeProps[n] = sd;\n    }\n    if (!ifExists || (sd && sd.configurable)) {\n      let md = Object.getOwnPropertyDescriptor(mixin$$1, n);\n      Object.defineProperty(proto, n, md);\n    }\n  }\n};\n\nlet getRootNode = function(node) {\n  return mixinImpl.getRootNode(node);\n};\n\nlet getComposedInnerHTML = function(node) {\n  return getInnerHTML(node, (n) => getComposedChildNodes(n));\n};\n\nlet getComposedChildNodes = function(node) {\n  return childNodes(node);\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n// NOTE: normalize event contruction where necessary (IE11)\nlet NormalizedEvent = typeof Event === 'function' ? Event :\n  function(inType, params) {\n    params = params || {};\n    var e = document.createEvent('Event');\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable));\n    return e;\n  };\n\nvar Distributor = class {\n\n  constructor(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  getInsertionPoints() {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  }\n\n  hasInsertionPoint() {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  }\n\n  isInsertionPoint(node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  }\n\n  distribute() {\n    if (this.hasInsertionPoint()) {\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  }\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  collectPool() {\n    let host = this.root.host;\n    let pool=[], i=0;\n    for (let n=host.firstChild; n; n=n.nextSibling) {\n      pool[i++] = n;\n    }\n    return pool;\n  }\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into storage\n  // array where applicable.\n  distributePool(node, pool) {\n    let dirtyRoots = [];\n    let p$ = this.root._insertionPoints;\n    for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      let parent = p.parentNode;\n      if (parent && parent.shadyRoot &&\n          this.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    for (let i=0; i < pool.length; i++) {\n      let p = pool[i];\n      if (p) {\n        p.__shady = p.__shady || {};\n        p.__shady.assignedSlot = undefined;\n        // remove undistributed elements from physical dom.\n        let parent = parentNode(p);\n        if (parent) {\n          removeChild(parent, p);\n        }\n      }\n    }\n    return dirtyRoots;\n  }\n\n  distributeInsertionPoint(insertionPoint, pool) {\n    let prevAssignedNodes = insertionPoint.__shady.assignedNodes;\n    if (prevAssignedNodes) {\n      this.clearAssignedSlots(insertionPoint, true);\n    }\n    insertionPoint.__shady.assignedNodes = [];\n    let needsSlotChange = false;\n    // distribute nodes from the pool that this selector matches\n    let anyDistributed = false;\n    for (let i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this.matchesInsertionPoint(node, insertionPoint)) {\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      let children$$1 = insertionPoint.childNodes;\n      for (let j = 0, node; j < children$$1.length; j++) {\n        node = children$$1[j];\n        if (node.__shady._prevAssignedSlot != insertionPoint) {\n          needsSlotChange = true;\n        }\n        this.distributeNodeInto(node, insertionPoint);\n      }\n    }\n    // we're already dirty if a node was newly added to the slot\n    // and we're also dirty if the assigned count decreased.\n    if (prevAssignedNodes) {\n      // TODO(sorvell): the tracking of previously assigned slots\n      // could instead by done with a Set and then we could\n      // avoid needing to iterate here to clear the info.\n      for (let i=0; i < prevAssignedNodes.length; i++) {\n        prevAssignedNodes[i].__shady._prevAssignedSlot = null;\n      }\n      if (insertionPoint.__shady.assignedNodes.length < prevAssignedNodes.length) {\n        needsSlotChange = true;\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n    if (needsSlotChange) {\n      this._fireSlotChange(insertionPoint);\n    }\n  }\n\n  clearAssignedSlots(slot, savePrevious) {\n    let n$ = slot.__shady.assignedNodes;\n    if (n$) {\n      for (let i=0; i < n$.length; i++) {\n        let n = n$[i];\n        if (savePrevious) {\n          n.__shady._prevAssignedSlot = n.__shady.assignedSlot;\n        }\n        // only clear if it was previously set to this slot;\n        // this helps ensure that if the node has otherwise been distributed\n        // ignore it.\n        if (n.__shady.assignedSlot === slot) {\n          n.__shady.assignedSlot = null;\n        }\n      }\n    }\n  }\n\n  matchesInsertionPoint(node, insertionPoint) {\n    let slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    let slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  }\n\n  distributeNodeInto(child, insertionPoint) {\n    insertionPoint.__shady.assignedNodes.push(child);\n    child.__shady.assignedSlot = insertionPoint;\n  }\n\n  setDistributedNodesOnInsertionPoint(insertionPoint) {\n    let n$ = insertionPoint.__shady.assignedNodes;\n    insertionPoint.__shady.distributedNodes = [];\n    for (let i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this.isInsertionPoint(n)) {\n        let d$ = n.__shady.distributedNodes;\n        if (d$) {\n          for (let j=0; j < d$.length; j++) {\n            insertionPoint.__shady.distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint.__shady.distributedNodes.push(n$[i]);\n      }\n    }\n  }\n\n  _fireSlotChange(insertionPoint) {\n    // NOTE: cannot bubble correctly here so not setting bubbles: true\n    // Safari tech preview does not bubble but chrome does\n    // Spec says it bubbles (https://dom.spec.whatwg.org/#mutation-observers)\n    insertionPoint.dispatchEvent(new NormalizedEvent('slotchange'));\n    if (insertionPoint.__shady.assignedSlot) {\n      this._fireSlotChange(insertionPoint.__shady.assignedSlot);\n    }\n  }\n\n  isFinalDestination(insertionPoint) {\n    return !(insertionPoint.__shady.assignedSlot);\n  }\n\n};\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nclass ShadyRoot {\n\n  constructor(host) {\n    if (!host) {\n      throw 'Must provide a host';\n    }\n    // NOTE: this strange construction is necessary because\n    // DocumentFragment cannot be subclassed on older browsers.\n    let frag = document.createDocumentFragment();\n    frag.__proto__ = ShadyFragmentMixin;\n    frag._init(host);\n    return frag;\n  }\n\n}\n\nlet ShadyMixin = {\n\n  _init(host) {\n    // NOTE: set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // root <=> host\n    host.shadowRoot = this;\n    this.host = host;\n    // logical dom setup\n    recordChildNodes(host);\n    recordChildNodes(this);\n    // state flags\n    this._renderPending = false;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render\n  update() {\n    if (!this._renderPending) {\n      this._renderPending = true;\n      enqueue(() => this.render());\n    }\n  },\n\n  _getRenderRoot() {\n    let root = this._rendererForHost();\n    // TODO(sorvell): actually want the highest dirty root in distribution tree\n    return root ? root._getRenderRoot() : this;\n  },\n\n  // Returns the shadyRoot `this.host` if `this.host`\n  // has children that require distribution.\n  _rendererForHost() {\n    let root = this.host.getRootNode();\n    if (isShadyRoot(root)) {\n      let c$ = this.host.childNodes;\n      for (let i=0, c; i < c$.length; i++) {\n        c = c$[i];\n        if (this._distributor.isInsertionPoint(c)) {\n          return root;\n        }\n      }\n    }\n  },\n\n  render() {\n    if (this._renderPending) {\n      this._getRenderRoot()._render();\n    }\n  },\n\n  _render() {\n    this._renderPending = false;\n    if (!this._skipUpdateInsertionPoints) {\n      this.updateInsertionPoints();\n    } else if (!this._hasRendered) {\n      this._insertionPoints = [];\n    }\n    this._skipUpdateInsertionPoints = false;\n    // TODO(sorvell): can add a first render optimization here\n    // to use if there are no insertion points\n    // 1. clear host node of composed children\n    // 2. appendChild the shadowRoot itself or (more robust) its logical children\n    // NOTE: this didn't seem worth it in perf testing\n    // but not ready to delete this info.\n    // logical\n    this.distribute();\n    // physical\n    this.compose();\n    this._hasRendered = true;\n  },\n\n  forceRender() {\n    this._renderPending = true;\n    this.render();\n  },\n\n  distribute() {\n    let dirtyRoots = this._distributor.distribute();\n    for (let i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i]._render();\n    }\n  },\n\n  updateInsertionPoints() {\n    let i$ = this.__insertionPoints;\n    // if any insertion points have been removed, clear their distribution info\n    if (i$) {\n      for (let i=0, c; i < i$.length; i++) {\n        c = i$[i];\n        if (c.getRootNode() !== this) {\n          this._distributor.clearAssignedSlots(c);\n        }\n      }\n    }\n    i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (let i=0, c; i < i$.length; i++) {\n      c = i$[i];\n      c.__shady = c.__shady || {};\n      recordChildNodes(c);\n      recordChildNodes(c.parentNode);\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree() {\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    let p$ = this._insertionPoints || [];\n    for (let i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = p.parentNode;\n      if ((parent !== this.host) && (parent !== this)) {\n        this._updateChildNodes(parent, this._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children$$1 = [];\n    let c$ = (node.shadyRoot || node).childNodes;\n    for (let i = 0; i < c$.length; i++) {\n      let child = c$[i];\n      if (this._distributor.isInsertionPoint(child)) {\n        let distributedNodes = child.__shady.distributedNodes ||\n          (child.__shady.distributedNodes = []);\n        for (let j = 0; j < distributedNodes.length; j++) {\n          let distributedNode = distributedNodes[j];\n          if (this.isFinalDestination(child, distributedNode)) {\n            children$$1.push(distributedNode);\n          }\n        }\n      } else {\n        children$$1.push(child);\n      }\n    }\n    return children$$1;\n  },\n\n  isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children$$1) {\n    let composed = Array.from(isShadyRoot(container) ?\n      container.childNodes :\n      childNodes(container));\n    let splices = calculateSplices(children$$1, composed);\n    // process removals\n    for (let i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (parentNode(n) === container) {\n          removeChild(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i=0, s, next; (i<splices.length) && (s=splices[i]); i++) { //eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j=s.index, n; j < s.index + s.addedCount; j++) {\n        n = children$$1[j];\n        insertBefore(container, n, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j, 0, n);\n      }\n    }\n  },\n\n  getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n};\n\nlet ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nextendAll(ShadyFragmentMixin, ShadyMixin, Mixins.Fragment);\nObject.defineProperty(ShadyFragmentMixin, 'activeElement', activeElementDescriptor);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nclass AsyncObserver {\n\n  constructor() {\n    this._scheduled = false;\n    this.addedNodes = [];\n    this.removedNodes = [];\n    this.callbacks = new Set();\n  }\n\n  schedule() {\n    if (!this._scheduled) {\n      this._scheduled = true;\n      promish.then(() => {\n        this.flush();\n      });\n    }\n  }\n\n  flush() {\n    if (this._scheduled) {\n      this._scheduled = false;\n      let mutations = this.takeRecords();\n      if (mutations.length) {\n        this.callbacks.forEach(function(cb) {\n          cb(mutations);\n        });\n      }\n    }\n  }\n\n  takeRecords() {\n    if (this.addedNodes.length || this.removedNodes.length) {\n      let mutations = [{\n        addedNodes: this.addedNodes,\n        removedNodes: this.removedNodes\n      }];\n      this.addedNodes = [];\n      this.removedNodes = [];\n      return mutations;\n    }\n    return [];\n  }\n\n}\n\n// TODO(sorvell): consider instead polyfilling MutationObserver\n// directly so that users do not have to fork their code.\n// Supporting the entire api may be challenging: e.g. filtering out\n// removed nodes in the wrong scope and seeing non-distributing\n// subtree child mutations.\nlet observeChildren = function(node, callback) {\n  //utils.common.patchNode(node);\n  if (!node.__shady.observer) {\n    node.__shady.observer = new AsyncObserver();\n  }\n  node.__shady.observer.callbacks.add(callback);\n  let observer = node.__shady.observer;\n  return {\n    _callback: callback,\n    _observer: observer,\n    _node: node,\n    takeRecords() {\n      return observer.takeRecords()\n    }\n  };\n};\n\nlet unobserveChildren = function(handle) {\n  let observer = handle && handle._observer;\n  if (observer) {\n    observer.callbacks.delete(handle._callback);\n    if (!observer.callbacks.size) {\n      handle._node.__shady.observer = null;\n    }\n  }\n};\n\nfunction filterMutations(mutations, target) {\n  const targetRootNode = target.getRootNode();\n  return mutations.map(function(mutation) {\n    const mutationInScope = (targetRootNode === mutation.target.getRootNode());\n    if (mutationInScope && mutation.addedNodes) {\n      let nodes = Array.from(mutation.addedNodes).filter(function(n) {\n        return (targetRootNode === n.getRootNode());\n      });\n      if (nodes.length) {\n        mutation = Object.create(mutation);\n        Object.defineProperty(mutation, 'addedNodes', {\n          value: nodes,\n          configurable: true\n        });\n        return mutation;\n      }\n    } else if (mutationInScope) {\n      return mutation;\n    }\n  }).filter(function(m) { return m});\n}\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\nlet origAddEventListener = Element.prototype.addEventListener;\nlet origRemoveEventListener = Element.prototype.removeEventListener;\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nlet alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.nodeType === Node.DOCUMENT_FRAGMENT_NODE && current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet EventMixin = {\n\n  __patched: 5,\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function(type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  };\n  // put constructor properties on subclass\n  mixin(klazz, Base);\n  klazz.prototype = Base.prototype;\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  let hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  let path = e.composedPath();\n  let node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(e, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (let i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    // capture phase fires all capture handlers\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n\n  // set the event phase to `AT_TARGET` as in spec\n  Object.defineProperty(e, 'eventPhase', {value: Event.AT_TARGET});\n\n  // the event only needs to be fired when owner roots change when iterating the event path\n  // keep track of the last seen owner root\n  let lastFiredRoot;\n  for (let i = 0; i < path.length; i++) {\n    node = path[i];\n    if (i === 0 || (node.shadowRoot && node.shadowRoot === lastFiredRoot)) {\n      fireHandlers(e, node, 'bubble');\n      // don't bother with window, it doesn't have `getRootNode` and will be last in the path anyway\n      if (node !== window) {\n        lastFiredRoot = node.getRootNode();\n      }\n      if (e.__propagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction addEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // The callback `fn` might be used for multiple nodes/events. Since we generate\n  // a wrapper function, we need to keep track of it when we remove the listener.\n  // It's more efficient to store the node/type/options information as Array in\n  // `fn` itself rather than the node (we assume that the same callback is used\n  // for few nodes at most, whereas a node will likely have many event listeners).\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  if (fn.__eventWrappers) {\n    // Stop if the wrapper function has already been created.\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        return;\n      }\n    }\n  } else {\n    fn.__eventWrappers = [];\n  }\n\n  const wrapperFn = function(e) {\n    // Support `once` option.\n    if (once) {\n      this.removeEventListener(type, fn, optionsOrCapture);\n    }\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  // Store the wrapper information.\n  fn.__eventWrappers.push({\n    node: this,\n    type: type,\n    capture: capture,\n    once: once,\n    passive: passive,\n    wrapperFn: wrapperFn\n  });\n\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    this.__handlers[type][capture ? 'capture' : 'bubble'].push(wrapperFn);\n  } else {\n    origAddEventListener.call(this, type, wrapperFn, optionsOrCapture);\n  }\n}\n\nfunction removeEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n\n  // NOTE(valdrin) invoking external functions is costly, inline has better perf.\n  let capture, once, passive;\n  if (typeof optionsOrCapture === 'object') {\n    capture = Boolean(optionsOrCapture.capture);\n    once = Boolean(optionsOrCapture.once);\n    passive = Boolean(optionsOrCapture.passive);\n  } else {\n    capture = Boolean(optionsOrCapture);\n    once = false;\n    passive = false;\n  }\n  // Search the wrapped function.\n  let wrapperFn = undefined;\n  if (fn.__eventWrappers) {\n    for (let i = 0; i < fn.__eventWrappers.length; i++) {\n      if (fn.__eventWrappers[i].node === this &&\n          fn.__eventWrappers[i].type === type &&\n          fn.__eventWrappers[i].capture === capture &&\n          fn.__eventWrappers[i].once === once &&\n          fn.__eventWrappers[i].passive === passive) {\n        wrapperFn = fn.__eventWrappers.splice(i, 1)[0].wrapperFn;\n        // Cleanup.\n        if (!fn.__eventWrappers.length) {\n          fn.__eventWrappers = undefined;\n        }\n        break;\n      }\n    }\n  }\n\n  origRemoveEventListener.call(this, type, wrapperFn || fn, optionsOrCapture);\n  if (wrapperFn && nonBubblingEventsToRetarget[type] &&\n      this.__handlers && this.__handlers[type]) {\n    const arr = this.__handlers[type][capture ? 'capture' : 'bubble'];\n    const idx = arr.indexOf(wrapperFn);\n    if (idx > -1) {\n      arr.splice(idx, 1);\n    }\n  }\n}\n\nfunction activateFocusEventOverrides() {\n  for (let ev in nonBubblingEventsToRetarget) {\n    window.addEventListener(ev, function(e) {\n      if (!e.__target) {\n        e.__target = e.target;\n        e.__relatedTarget = e.relatedTarget;\n        patchPrototype(e, EventMixin);\n        retargetNonBubblingEvent(e);\n        e.stopImmediatePropagation();\n      }\n    }, true);\n  }\n}\n\n\nlet PatchedEvent = mixinComposedFlag(Event);\nlet PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nlet PatchedMouseEvent = mixinComposedFlag(MouseEvent);\n\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\nif (settings.inUse) {\n\n  window.ShadyDOM = {\n    // TODO(sorvell): remove when no one depends on this.\n    patch: function() {},\n    getComposedInnerHTML: getComposedInnerHTML,\n    getComposedChildNodes: getComposedChildNodes,\n    isShadyRoot: isShadyRoot,\n    // TODO(sorvell): exposed for testing only, worth it?\n    enqueue: enqueue,\n    flush: flush,\n    settings: settings,\n    filterMutations: filterMutations,\n    observeChildren: observeChildren,\n    unobserveChildren: unobserveChildren\n  };\n\n  let createRootAndEnsurePatched = function(node) {\n    // TODO(sorvell): need to ensure ancestors are patched but this introduces\n    // a timing problem with gathering composed children.\n    // (1) currently the child list is crawled and patched when patching occurs\n    // (this needs to change)\n    // (2) we can only patch when an element has received its parsed children\n    // because we cannot detect them when inserted by parser.\n    // let ancestor = node;\n    // while (ancestor) {\n    //   patchNode(ancestor);\n    //   ancestor = ancestor.parentNode || ancestor.host;\n    // }\n    //patch.patchNode(node);\n    let root = new ShadyRoot(node);\n    //patch.patchNode(root);\n    return root;\n  };\n\n  Element.prototype.attachShadow = function() {\n    return createRootAndEnsurePatched(this);\n  };\n\n  Node.prototype.addEventListener = addEventListener;\n  Node.prototype.removeEventListener = removeEventListener;\n  Event = PatchedEvent;\n  CustomEvent = PatchedCustomEvent;\n  MouseEvent = PatchedMouseEvent;\n  activateFocusEventOverrides();\n\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get() {\n      return document.documentElement.contains(this);\n    },\n    configurable: true\n  });\n\n  Node.prototype.getRootNode = function(options) {\n    return getRootNode(this, options);\n  };\n\n  Object.defineProperty(Element.prototype, 'slot', {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    },\n    configurable: true\n  });\n\n  Object.defineProperty(Node.prototype, 'assignedSlot', {\n    get() {\n      return (this.__shady && this.__shady.assignedSlot) || null;\n    },\n    configurable: true\n  });\n\n  let nativeSetAttribute = Element.prototype.setAttribute;\n  Element.prototype.setAttribute = setAttribute$1;\n  // NOTE: expose native setAttribute to allow hooking native method\n  // (e.g. this is done in ShadyCSS)\n  Element.prototype.__nativeSetAttribute = nativeSetAttribute;\n\n  let classNameDescriptor = {\n    get() {\n      return this.getAttribute('class');\n    },\n    set(value) {\n      this.setAttribute('class', value);\n    },\n    configurable: true\n  };\n\n\n  // Safari 9 `className` is not configurable\n  let cn = Object.getOwnPropertyDescriptor(Element.prototype, 'className');\n  if (cn && cn.configurable) {\n    Object.defineProperty(Element.prototype, 'className', classNameDescriptor);\n  } else {\n    // on IE `className` is on Element\n    let h = window.customElements && window.customElements.nativeHTMLElement ||\n      HTMLElement;\n    cn = Object.getOwnPropertyDescriptor(h.prototype, 'className');\n    if (cn && cn.configurable) {\n      Object.defineProperty(h.prototype, 'className', classNameDescriptor);\n    }\n  }\n\n  patchProto(Node.prototype, Mixins.Node);\n  patchProto(Text.prototype, Mixins.Text);\n  patchProto(DocumentFragment.prototype, Mixins.Fragment);\n  patchProto(Element.prototype, Mixins.Element);\n  let he = (window.customElements && customElements.nativeHTMLElement) ||\n    HTMLElement;\n  patchProto(he.prototype, Mixins.HTMLElement, true);\n  patchProto(Document.prototype, Mixins.Document);\n  if (window.HTMLSlotElement) {\n    patchProto(HTMLSlotElement.prototype, Mixins.Slot);\n  }\n\n  // Safari 9 testing\n  // patchProto(Text.prototype, Mixins.Node);\n  // patchProto(he.prototype, Mixins.Node);\n  // patchProto(he.prototype, Mixins.Element);\n\n}\n\n}());\n"]}