{"version":3,"sources":[" [synthetic:base] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:es6/symbol] "," [synthetic:es6/util/makeiterator] "," [synthetic:es6/util/arrayfromiterator] "," [synthetic:es6/util/arrayfromiterable] "," [synthetic:util/polyfill] "," [synthetic:es6/object/setprototypeof] "," [synthetic:util/owns] "," [synthetic:es6/object/assign] "," [synthetic:es6/reflect/apply] "," [synthetic:es6/reflect/construct] ","src/ShadyDOM/array-splice.js","src/ShadyDOM/utils.js","src/ShadyDOM/tree.js","src/ShadyDOM/distributor.js","src/ShadyDOM/innerHTML.js","src/ShadyDOM/element-mixin.js","src/ShadyDOM/shady.js","src/ShadyDOM/patch.js","src/ShadyDOM/event-mixin.js","src/ShadyDOM/env.js","src/ShadyCSS/css-parse.js","src/ShadyCSS/style-settings.js","src/ShadyCSS/style-util.js","src/ShadyCSS/style-transformer.js","src/ShadyCSS/style-info.js","src/ShadyCSS/style-properties.js","src/ShadyCSS/template-map.js","src/ShadyCSS/style-placeholder.js","src/ShadyCSS/apply-shim.js","src/ShadyCSS/ShadyCSS.js","src/ShadyCSS/custom-style.js"],"names":["newSplice$$module$$src$ShadyDOM$array_splice","newSplice","index","removed","addedCount","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","current","currentStart","currentEnd","old","oldStart","oldEnd","rowCount","columnCount","distances","Array","i","j","equals","north","west","spliceOperationsFromEditDistances","length","edits","push","northWest","min","reverse","calcSplices","prefixCount","suffixCount","minLength","Math","sharedPrefix","sharedSuffix","splice","ops","undefined","splices","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","calculateSplices$$module$$src$ShadyDOM$array_splice","module$$src$ShadyDOM$array_splice","settings","window","ShadyDOM","inUse","dom","Element","prototype","attachShadow","isShadyRoot$$module$$src$ShadyDOM$utils","isShadyRoot","obj","__localName","p","matches","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","matchesSelector$$module$$src$ShadyDOM$utils","element","selector","call","copyOwnProperty$$module$$src$ShadyDOM$utils","copyOwnProperty","name","source","target","pd","Object","getOwnPropertyDescriptor","defineProperty","extend$$module$$src$ShadyDOM$utils","extend","n$","getOwnPropertyNames","n","extendAll$$module$$src$ShadyDOM$utils","extendAll","sources","patchPrototype$$module$$src$ShadyDOM$utils","patchPrototype","mixin","proto","getPrototypeOf","hasOwnProperty","patchProto","create","__sourceProto","__patchProto","setPrototypeOf","unpatchPrototype$$module$$src$ShadyDOM$utils","unpatchPrototype","common","module$$src$ShadyDOM$utils","nativeInsertBefore","insertBefore","nativeAppendChild","appendChild","nativeRemoveChild","removeChild","tree","arrayCopyChildNodes","parent","copy","firstChild","nextSibling","arrayCopyChildren","firstElementChild","nextElementSibling","arrayCopy","a$","l","saveChildNodes","node","Logical","Composed","hasParentNode","saveComposedData","__dom","parentNode","hasChildNodes","childNodes","getChildNodes","_getChildNodes","getFirstChild","getNextSibling","getParentNode","getLastChild","lastChild","getPreviousSibling","previousSibling","getFirstElementChild","_getFirstElementChild","nodeType","Node","ELEMENT_NODE","getLastElementChild","_getLastElementChild","getNextElementSibling","_getNextElementSibling","getPreviousElementSibling","_getPreviousElementSibling","c$","patchNode","recordInsertBefore","container","ref_node","DOCUMENT_FRAGMENT_NODE","_linkNode","recordRemoveChild","$parentNode","$childNodes","__patched","$firstChild","$nextSibling","getComposedChildNodes","$lastChild","$previousSibling","lastElementChild","previousElementSibling","clearChildNodes","c","saveParentNode","newChild","refChild","_addChild","currentParent","_removeChild","isFrag","oldParent","descriptors","getNativeProperty$$module$$src$ShadyDOM$tree","getNativeProperty","property","HTMLElement","get","assertNative$$module$$src$ShadyDOM$tree","assertNative","tracked","native","console","warn","module$$src$ShadyDOM$tree","$jscompDefaultExport","constructor","root","insertionPointTag","getInsertionPoints","querySelectorAll","hasInsertionPoint","_insertionPoints","isInsertionPoint","localName","reset","children","host","resetChild","p$","resetInsertionPoint","child","_assignedSlot","insertionPoint","_distributedNodes","_assignedNodes","distribute","distributePool","collectPool","pool","dirtyRoots","distributeInsertionPoint","shadyRoot","anyDistributed","matchesInsertionPoint","distributeNodeInto","setDistributedNodesOnInsertionPoint","slotName","getAttribute","trim","slot","d$","isFinalDestination","rendered","ip$","__eventListenerCount","dispatchEvent","Event","cancelable","module$$src$ShadyDOM$distributor","default","escapeAttrRegExp","escapeDataRegExp","escapeReplace$$module$$src$ShadyDOM$innerHTML","escapeReplace","escapeAttr$$module$$src$ShadyDOM$innerHTML","escapeAttr","s","replace","escapeData$$module$$src$ShadyDOM$innerHTML","escapeData","makeSet$$module$$src$ShadyDOM$innerHTML","makeSet","arr","set","voidElements","plaintextParents","getOuterHTML$$module$$src$ShadyDOM$innerHTML","getOuterHTML","composed","tagName","attrs","attributes","attr","value","getInnerHTML","TEXT_NODE","data","COMMENT_NODE","error","Error","getInnerHTML$$module$$src$ShadyDOM$innerHTML","content","module$$src$ShadyDOM$innerHTML","mixinImpl","addNode","ownerRoot","ownerShadyRootForNode","__noInsertionPoint","_skipUpdateInsertionPoints","_maybeAddInsertionPoint","ipAdded","_addedNode","handled","_maybeDistribute","removeNode","logicalParent","distributed","maybeDistributeParent","_removeDistributedChildren","getInsertionPointTag","update","_removeOwnerShadyRoot","_removedNode","removeNodeFromParent","_hasCachedOwnerRoot","__ownerShadyRoot","getRootNode","document","contains","fragContent","querySelector","wrappedContent","hasContent","needsDist","_nodeNeedsDistribution","added","np","na","hostNeedsDist","_contains","dc$","assignedNodes","flatten","firstComposedNode","clearNode","maybeDistributeAttributeChange","query","matcher","halter","list","_queryElements","elements","_queryElement","result","activeElementForNode","active","activeElement","activeRoot","nativeCloneNode","cloneNode","nativeImportNode","Document","importNode","nativeSetAttribute","setAttribute","nativeRemoveAttribute","removeAttribute","NodeMixin","defineProperties","parentElement","configurable","assignedSlot","FragmentMixin","replaceChild","deep","nc","externalNode","doc","ownerDocument","isArray","filter","textContent","tc","cn","join","text","createTextNode","innerHTML","d","createElement","ElementMixin","options","shadowRoot","activeElementDescriptor","ActiveElementMixin","UnderActiveElementMixin","_activeElement","Mixins","Fragment","module$$src$ShadyDOM$element_mixin","ShadyRoot","frag","createDocumentFragment","__proto__","ShadyFragmentMixin","_init","ShadyMixin","_clean","_hasRendered","_distributor","distributionRoot","_findDistributionRoot","enqueue","render","_elementNeedsDistribution","updateInsertionPoints","compose","forceRender","i$","__insertionPoints","insertionPoints","_composeTree","_updateChildNodes","_composeNode","distributedNodes","distributedNode","next","DocumentFragment","customElements","CustomElements","flushList","scheduled","enqueue$$module$$src$ShadyDOM$shady","callback","Promise","resolve","then","flush","flush$$module$$src$ShadyDOM$shady","shift","takeRecords","module$$src$ShadyDOM$shady","patchedCount","log","patchImpl","canPatchNode","head","documentElement","hasPrototypeDescriptors","patch","mixinForObject","mixinForNode","DOCUMENT_NODE","unpatch","patchNode$$module$$src$ShadyDOM$patch","isNodePatched","unpatchNode$$module$$src$ShadyDOM$patch","unpatchNode","isNodePatched$$module$$src$ShadyDOM$patch","module$$src$ShadyDOM$patch","origAddEventListener","addEventListener","origRemoveEventListener","removeEventListener","alwaysComposed","blur","focus","focusin","focusout","click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel","beforeinput","input","keydown","keyup","compositionstart","compositionupdate","compositionend","touchstart","touchend","touchmove","touchcancel","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","dragstart","drag","dragenter","dragleave","dragover","drop","dragend","DOMActivate","DOMFocusIn","DOMFocusOut","keypress","pathComposer$$module$$src$ShadyDOM$event_mixin","pathComposer","startNode","composedPath","startRoot","retarget$$module$$src$ShadyDOM$event_mixin","retarget","refNode","path","refNodePath","ancestor","lastRoot","rootIdx","indexOf","EventMixin","isTrusted","__composed","type","__composedPath","__target","currentTarget","relatedTarget","__relatedTarget","__relatedTargetComposedPath","stopPropagation","__propagationStopped","stopImmediatePropagation","__immediatePropagationStopped","mixinComposedFlag$$module$$src$ShadyDOM$event_mixin","mixinComposedFlag","Base","klazz","event","nonBubblingEventsToRetarget","fireHandlers$$module$$src$ShadyDOM$event_mixin","fireHandlers","phase","hs","__handlers","fn","retargetNonBubblingEvent$$module$$src$ShadyDOM$event_mixin","retargetNonBubblingEvent","e","BUBBLING_PHASE","shouldCapture$$module$$src$ShadyDOM$event_mixin","shouldCapture","optionsOrCapture","capture","addEventListener$$module$$src$ShadyDOM$event_mixin","wrappedFn","eventPhase","__eventWrapper","bubble","removeEventListener$$module$$src$ShadyDOM$event_mixin","wrapper","idx","ev","OriginalEvent","PatchedEvent","PatchedCustomEvent","CustomEvent","PatchedMouseEvent","MouseEvent","module$$src$ShadyDOM$event_mixin","isPatched","createRootAndEnsurePatched","Element.prototype.attachShadow","Node.prototype.getRootNode","parse$$module$$src$ShadyCSS$css_parse","parse","clean","parseCss","lex","clean$$module$$src$ShadyCSS$css_parse","cssText","RX","comments","port","lex$$module$$src$ShadyCSS$css_parse","start","end","OPEN_BRACE","rules","CLOSE_BRACE","parseCss$$module$$src$ShadyCSS$css_parse","t","substring","parsedCssText","ss","_expandUnicodeEscapes","multipleSpaces","lastIndexOf","parsedSelector","atRule","AT_START","MEDIA_START","types","MEDIA_RULE","match","keyframesRule","KEYFRAMES_RULE","keyframesName","split","pop","VAR_START","MIXIN_RULE","STYLE_RULE","r$","r","_expandUnicodeEscapes$$module$$src$ShadyCSS$css_parse","code","repeat","stringify$$module$$src$ShadyCSS$css_parse","stringify","preserveProperties","_hasMixinRules","removeCustomProps","_hasMixinRules$$module$$src$ShadyCSS$css_parse","removeCustomProps$$module$$src$ShadyCSS$css_parse","removeCustomPropAssignment","removeCustomPropApply","removeCustomPropAssignment$$module$$src$ShadyCSS$css_parse","customProp","mixinProp","removeCustomPropApply$$module$$src$ShadyCSS$css_parse","mixinApply","varApply","WCT","types$$module$$src$ShadyCSS$css_parse","module$$src$ShadyCSS$css_parse","nativeShadow","forceShimCssProperties","WebComponents","flags","shimcssproperties","nativeCssVariables","navigator","userAgent","CSS","supports","detectNativeApply$$module$$src$ShadyCSS$style_settings","detectNativeApply","style","nativeCssApply","sheet","cssRules","module$$src$ShadyCSS$style_settings","toCssText$$module$$src$ShadyCSS$style_util","toCssText","forEachRule","rulesForStyle$$module$$src$ShadyCSS$style_util","rulesForStyle","__cssRules","isKeyframesSelector$$module$$src$ShadyCSS$style_util","isKeyframesSelector","rule","forEachRule$$module$$src$ShadyCSS$style_util","styleRuleCallback","keyframesRuleCallback","onlyActiveRules","skipRules","matchMedia","rx","MEDIA_MATCH","applyCss$$module$$src$ShadyCSS$style_util","applyCss","moniker","contextNode","createScopeStyle","applyStyle","applyStyle$$module$$src$ShadyCSS$style_util","after","lastHeadApplyNode","createScopeStyle$$module$$src$ShadyCSS$style_util","applyStylePlaceHolder$$module$$src$ShadyCSS$style_util","applyStylePlaceHolder","placeHolder","createComment","scope","isTargetedBuild$$module$$src$ShadyCSS$style_util","isTargetedBuild","buildType","getCssBuildType$$module$$src$ShadyCSS$style_util","getCssBuildType","findMatchingParen$$module$$src$ShadyCSS$style_util","findMatchingParen","level","processVariableAndFallback$$module$$src$ShadyCSS$style_util","processVariableAndFallback","str","inner","prefix","suffix","comma","fallback","VAR_ASSIGN","MIXIN_MATCH","VAR_CONSUMED","ANIMATION_MATCH","IS_VAR","BRACKETED","HOST_PREFIX","HOST_SUFFIX","module$$src$ShadyCSS$style_util","StyleTransformer","shouldRemoveScope","__styleScoped","_transformDom","classList","_content","remove","SCOPE_NAME","add","CLASS","elementStyles","styleRules","cssBuildType","__cssBuild","css","is","extends","ext","hostScope","_calcHostScope","_calcElementScope","self","isScoped","CSS_CLASS_PREFIX","_transformRule","_transformComplexSelector","transformer","transformedSelector","_transformRuleCss","COMPLEX_SELECTOR_SEP","stop","SIMPLE_SELECTOR_SEP","m","info","_transformCompoundSelector","combinator","slottedIndex","SLOTTED","HOST","_transformHostSelector","_transformSimpleSelector","slotted","SLOTTED_PAREN","paren","PSEUDO_PREFIX","HOST_PAREN","SIMPLE_SELECTOR_PREFIX","typeSelector","SELECTOR_NO_MATCH","documentRule","normalizeRootSelector","_transformDocumentSelector","ROOT","SCOPE_DOC_SELECTOR","module$$src$ShadyCSS$style_transformer","StyleInfo","ast","placeholder","ownStylePropertyNames","elementName","typeExtension","cssBuild","overrideStyleProperties","notStyleScopeCacheable","customStyle","scopeSelector","ownStyleProperties","styleProperties","__styleInfo","styleInfo","module$$src$ShadyCSS$style_info","IS_IE","StyleProperties","decorateStyles","props","keyframes","ruleIndex","decorateRule","whenHostOrRootRule","ruleTypes","isHost","hostContextOrFunction","some","collectPropertiesInCssText","propertyInfo","onKeyframesRule","_keyframes","names","properties","collectProperties","hasProperties","collectCssText","assign","exec","any","collectConsumingCssText","reify","valueForProperty","valueForProperties","propertyValue","parts","lastIndex","colon","pp","slice","applyProperties","output","applyKeyframeTransforms","keyframeTransforms","hasAnimations","test","keyframeNamesToTransform","keyframe","transform","propertyDataFromStyles","o","selectorToMatch","addToBitMask","key","isRoot","hostAndRootPropertiesForScope","hostProps","rootProps","_element","transformStyles","hostSelector","rxHostSelector","hostRx","RegExp","_elementKeyframeTransforms","_scopeSelector","keyframesRules","_scopeKeyframes","_keyframesRuleTransformer","keyframesNameRx","transformedKeyframesName","scopeId","applyElementScopeSelector","v","XSCOPE_NAME","applyElementStyle","_useCount","applyCustomStyle","addToBitMask$$module$$src$ShadyCSS$style_properties","bits","parseInt","module$$src$ShadyCSS$style_properties","templateMap","module$$src$ShadyCSS$template_map","placeholderMap","ce","origDefine","define","ce$$module$$src$ShadyCSS$style_placeholder.define","args","module$$src$ShadyCSS$style_placeholder","APPLY_NAME_CLEAN","INITIAL_INHERIT","MIXIN_VAR_SEP","MixinMap","_map","dependants","ApplyShim","_measureElement","_currentTemplate","_separator","_boundProduceCssProperties","this._boundProduceCssProperties","matchText","propertyName","valueProperty","valueMixin","_produceCssProperties","transformStyle","transformRules","transformRule","__applyShimInvalid","transformCssText","_consumeCssProperties","_getInitialValueForProperty","all","getComputedStyle","getPropertyValue","mixinName","applyPos","afterApplyPos","textBeforeApply","textAfterApply","defaults","_cssTextToMap","replacement","_atApplyToCssProperties","fallbacks","vars","mixinEntry","f","_replaceInitialOrInherit","out","sp","_invalidateMixinEntry","mixinAsProperties","combinedProps","mixinValues","oldProps","needToInvalidate","applyShim","module$$src$ShadyCSS$apply_shim","ShadyCSS","scopeCounter","nativeCss","_documentOwner","_documentOwnerStyleInfo","_generateScopeSelector","id","getStyleAst","styleAstToString","_gatherStyles","template","styles","_getCssBuild","prepareTemplate","_prepared","_styleAst","ownPropertyNames","_generateStaticStyle","_style","_ownPropertyNames","shadowroot","_prepareHost","_cssBuild","overrideProps","CustomStyle","CS","_documentDirty","findStyles","_revalidateApplyShim","_updateProperties","applyStyles","_updateNativeProperties","_applyStyleProperties","_isRootOwner","_applyToDescendants","_styleOwnerForNode","oldScopeSelector","owner","ownerStyleInfo","hostAndRootProps","propertiesMatchingHost","_mixinOverrideStyles","ownProps","overrides","removeProperty","setProperty","updateStyles","_transformCustomStyleForDocument","_applyCustomStyleToDocument","module$$src$ShadyCSS$ShadyCSS","enqueued","customStyles","hookFn","enqueueDocumentValidation","HTMLImports","whenReady","validateDocument","readyState","requestAnimationFrame","Reflect","construct","processHook","_customStyles","CustomStyle.findStyles","_findStyle","CustomStyle._revalidateApplyShim","CustomStyle.applyStyles","_applyStyle","writable","CustomStyle.prototype._findStyle","__appliedStyle","CustomStyle.prototype._applyStyle"],"mappings":"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","file":"ShadyDOM.min.js","sourcesContent":[null,null,null,null,null,null,null,null,null,null,null,null,null,"/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nfunction newSplice(index, removed, addedCount) {\n  return {\n    index: index,\n    removed: removed,\n    addedCount: addedCount\n  };\n}\n\nconst EDIT_LEAVE = 0;\nconst EDIT_UPDATE = 1;\nconst EDIT_ADD = 2;\nconst EDIT_DELETE = 3;\n\nlet ArraySplice = {\n\n  // Note: This function is *based* on the computation of the Levenshtein\n  // \"edit\" distance. The one change is that \"updates\" are treated as two\n  // edits - not one. With Array splices, an update is really a delete\n  // followed by an add. By retaining this, we optimize for \"keeping\" the\n  // maximum array items in the original array. For example:\n  //\n  //   'xxxx123' -> '123yyyy'\n  //\n  // With 1-edit updates, the shortest path would be just to update all seven\n  // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n  // leaves the substring '123' intact.\n  calcEditDistances(current, currentStart, currentEnd,\n                              old, oldStart, oldEnd) {\n    // \"Deletion\" columns\n    let rowCount = oldEnd - oldStart + 1;\n    let columnCount = currentEnd - currentStart + 1;\n    let distances = new Array(rowCount);\n\n    // \"Addition\" rows. Initialize null column.\n    for (let i = 0; i < rowCount; i++) {\n      distances[i] = new Array(columnCount);\n      distances[i][0] = i;\n    }\n\n    // Initialize null row\n    for (let j = 0; j < columnCount; j++)\n      distances[0][j] = j;\n\n    for (let i = 1; i < rowCount; i++) {\n      for (let j = 1; j < columnCount; j++) {\n        if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n          distances[i][j] = distances[i - 1][j - 1];\n        else {\n          let north = distances[i - 1][j] + 1;\n          let west = distances[i][j - 1] + 1;\n          distances[i][j] = north < west ? north : west;\n        }\n      }\n    }\n\n    return distances;\n  },\n\n  // This starts at the final weight, and walks \"backward\" by finding\n  // the minimum previous weight recursively until the origin of the weight\n  // matrix.\n  spliceOperationsFromEditDistances(distances) {\n    let i = distances.length - 1;\n    let j = distances[0].length - 1;\n    let current = distances[i][j];\n    let edits = [];\n    while (i > 0 || j > 0) {\n      if (i == 0) {\n        edits.push(EDIT_ADD);\n        j--;\n        continue;\n      }\n      if (j == 0) {\n        edits.push(EDIT_DELETE);\n        i--;\n        continue;\n      }\n      let northWest = distances[i - 1][j - 1];\n      let west = distances[i - 1][j];\n      let north = distances[i][j - 1];\n\n      let min;\n      if (west < north)\n        min = west < northWest ? west : northWest;\n      else\n        min = north < northWest ? north : northWest;\n\n      if (min == northWest) {\n        if (northWest == current) {\n          edits.push(EDIT_LEAVE);\n        } else {\n          edits.push(EDIT_UPDATE);\n          current = northWest;\n        }\n        i--;\n        j--;\n      } else if (min == west) {\n        edits.push(EDIT_DELETE);\n        i--;\n        current = west;\n      } else {\n        edits.push(EDIT_ADD);\n        j--;\n        current = north;\n      }\n    }\n\n    edits.reverse();\n    return edits;\n  },\n\n  /**\n   * Splice Projection functions:\n   *\n   * A splice map is a representation of how a previous array of items\n   * was transformed into a new array of items. Conceptually it is a list of\n   * tuples of\n   *\n   *   <index, removed, addedCount>\n   *\n   * which are kept in ascending index order of. The tuple represents that at\n   * the |index|, |removed| sequence of items were removed, and counting forward\n   * from |index|, |addedCount| items were added.\n   */\n\n  /**\n   * Lacking individual splice mutation information, the minimal set of\n   * splices can be synthesized given the previous state and final state of an\n   * array. The basic approach is to calculate the edit distance matrix and\n   * choose the shortest path through it.\n   *\n   * Complexity: O(l * p)\n   *   l: The length of the current array\n   *   p: The length of the old array\n   */\n  calcSplices(current, currentStart, currentEnd,\n                        old, oldStart, oldEnd) {\n    let prefixCount = 0;\n    let suffixCount = 0;\n    let splice;\n\n    let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n    if (currentStart == 0 && oldStart == 0)\n      prefixCount = this.sharedPrefix(current, old, minLength);\n\n    if (currentEnd == current.length && oldEnd == old.length)\n      suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n    currentStart += prefixCount;\n    oldStart += prefixCount;\n    currentEnd -= suffixCount;\n    oldEnd -= suffixCount;\n\n    if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n      return [];\n\n    if (currentStart == currentEnd) {\n      splice = newSplice(currentStart, [], 0);\n      while (oldStart < oldEnd)\n        splice.removed.push(old[oldStart++]);\n\n      return [ splice ];\n    } else if (oldStart == oldEnd)\n      return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n    let ops = this.spliceOperationsFromEditDistances(\n        this.calcEditDistances(current, currentStart, currentEnd,\n                               old, oldStart, oldEnd));\n\n    splice = undefined;\n    let splices = [];\n    let index = currentStart;\n    let oldIndex = oldStart;\n    for (let i = 0; i < ops.length; i++) {\n      switch(ops[i]) {\n        case EDIT_LEAVE:\n          if (splice) {\n            splices.push(splice);\n            splice = undefined;\n          }\n\n          index++;\n          oldIndex++;\n          break;\n        case EDIT_UPDATE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n        case EDIT_ADD:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.addedCount++;\n          index++;\n          break;\n        case EDIT_DELETE:\n          if (!splice)\n            splice = newSplice(index, [], 0);\n\n          splice.removed.push(old[oldIndex]);\n          oldIndex++;\n          break;\n      }\n    }\n\n    if (splice) {\n      splices.push(splice);\n    }\n    return splices;\n  },\n\n  sharedPrefix(current, old, searchLength) {\n    for (let i = 0; i < searchLength; i++)\n      if (!this.equals(current[i], old[i]))\n        return i;\n    return searchLength;\n  },\n\n  sharedSuffix(current, old, searchLength) {\n    let index1 = current.length;\n    let index2 = old.length;\n    let count = 0;\n    while (count < searchLength && this.equals(current[--index1], old[--index2]))\n      count++;\n\n    return count;\n  },\n\n  calculateSplices(current, previous) {\n    return this.calcSplices(current, 0, current.length, previous, 0,\n                            previous.length);\n  },\n\n  equals(currentValue, previousValue) {\n    return currentValue === previousValue;\n  }\n\n};\n\nexport let calculateSplices = (current, previous) =>\n  ArraySplice.calculateSplices(current, previous);\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport let settings = window.ShadyDOM || {};\n\nsettings.inUse = settings.dom || !Element.prototype.attachShadow;\n\nexport function isShadyRoot(obj) {\n  return Boolean(obj.__localName === 'ShadyRoot');\n}\n\nlet p = Element.prototype;\nlet matches = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nexport function matchesSelector(element, selector) {\n  return matches.call(element, selector);\n}\n\nfunction copyOwnProperty(name, source, target) {\n  let pd = Object.getOwnPropertyDescriptor(source, name);\n  if (pd) {\n    Object.defineProperty(target, name, pd);\n  }\n}\n\nexport function extend(target, source) {\n  if (target && source) {\n    let n$ = Object.getOwnPropertyNames(source);\n    for (let i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n      copyOwnProperty(n, source, target);\n    }\n  }\n  return target || source;\n}\n\nexport function extendAll(target, ...sources) {\n  for (let i=0; i < sources.length; i++) {\n    extend(target, sources[i]);\n  }\n  return target;\n}\n\nexport function patchPrototype(obj, mixin) {\n  let proto = Object.getPrototypeOf(obj);\n  if (!proto.hasOwnProperty('__patchProto')) {\n    let patchProto = Object.create(proto);\n    patchProto.__sourceProto = proto;\n    extend(patchProto, mixin);\n    proto.__patchProto = patchProto;\n  }\n  Object.setPrototypeOf(obj, proto.__patchProto);\n}\n\nexport function unpatchPrototype(obj) {\n  if (obj.__sourceProto) {\n    Object.setPrototypeOf(obj, obj.__sourceProto);\n  }\n}\n\nexport let common = {};","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n// TODO(sorvell): circular (patch loads tree and tree loads patch)\n// for now this is stuck on `utils`\n//import {patchNode} from './patch'\nimport * as utils from './utils'\n\n// native add/remove\nlet nativeInsertBefore = Element.prototype.insertBefore;\nlet nativeAppendChild = Element.prototype.appendChild;\nlet nativeRemoveChild = Element.prototype.removeChild;\n\n/**\n * `tree` is a dom manipulation library used by ShadyDom to\n * manipulate composed and logical trees.\n */\nexport let tree = {\n\n  // sad but faster than slice...\n  arrayCopyChildNodes(parent) {\n    let copy=[], i=0;\n    for (let n=parent.firstChild; n; n=n.nextSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopyChildren(parent) {\n    let copy=[], i=0;\n    for (let n=parent.firstElementChild; n; n=n.nextElementSibling) {\n      copy[i++] = n;\n    }\n    return copy;\n  },\n\n  arrayCopy(a$) {\n    let l = a$.length;\n    let copy = new Array(l);\n    for (let i=0; i < l; i++) {\n      copy[i] = a$[i];\n    }\n    return copy;\n  },\n\n  saveChildNodes(node) {\n    tree.Logical.saveChildNodes(node);\n    if (!tree.Composed.hasParentNode(node)) {\n      tree.Composed.saveComposedData(node);\n      //tree.Composed.saveParentNode(node);\n    }\n    tree.Composed.saveChildNodes(node);\n  }\n\n};\n\ntree.Logical = {\n\n  hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.parentNode);\n  },\n\n  hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.childNodes !== undefined);\n  },\n\n  getChildNodes(node) {\n    // note: we're distinguishing here between undefined and false-y:\n    // hasChildNodes uses undefined check to see if this element has logical\n    // children; the false-y check indicates whether or not we should rebuild\n    // the cached childNodes array.\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      tree.Composed.getChildNodes(node);\n  },\n\n  _getChildNodes(node) {\n    if (!node.__dom.childNodes) {\n      node.__dom.childNodes = [];\n      for (let n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        node.__dom.childNodes.push(n);\n      }\n    }\n    return node.__dom.childNodes;\n  },\n\n  // NOTE: __dom can be created under 2 conditions: (1) an element has a\n  // logical tree, or (2) an element is in a logical tree. In case (1), the\n  // element will store firstChild/lastChild, and in case (2), the element\n  // will store parentNode, nextSibling, previousSibling. This means that\n  // the mere existence of __dom is not enough to know if the requested\n  // logical data is available and instead we do an explicit undefined check.\n  getParentNode(node) {\n    return node.__dom && node.__dom.parentNode !== undefined ?\n      node.__dom.parentNode : tree.Composed.getParentNode(node);\n  },\n\n  getFirstChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      node.__dom.firstChild : tree.Composed.getFirstChild(node);\n  },\n\n  getLastChild(node) {\n    return node.__dom && node.__dom.lastChild  !== undefined ?\n      node.__dom.lastChild : tree.Composed.getLastChild(node);\n  },\n\n  getNextSibling(node) {\n    return node.__dom && node.__dom.nextSibling  !== undefined ?\n      node.__dom.nextSibling : tree.Composed.getNextSibling(node);\n  },\n\n  getPreviousSibling(node) {\n    return node.__dom && node.__dom.previousSibling  !== undefined ?\n      node.__dom.previousSibling : tree.Composed.getPreviousSibling(node);\n  },\n\n  getFirstElementChild(node) {\n    return node.__dom && node.__dom.firstChild !== undefined ?\n      this._getFirstElementChild(node) :\n      tree.Composed.getFirstElementChild(node);\n  },\n\n  _getFirstElementChild(node) {\n    let n = node.__dom.firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild(node) {\n    return node.__dom && node.__dom.lastChild !== undefined ?\n      this._getLastElementChild(node) :\n      tree.Composed.getLastElementChild(node);\n  },\n\n  _getLastElementChild(node) {\n    let n = node.__dom.lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling(node) {\n    return node.__dom && node.__dom.nextSibling !== undefined ?\n      this._getNextElementSibling(node) :\n      tree.Composed.getNextElementSibling(node);\n  },\n\n  _getNextElementSibling(node) {\n    let n = node.__dom.nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling(node) {\n    return node.__dom && node.__dom.previousSibling !== undefined ?\n      this._getPreviousElementSibling(node) :\n      tree.Composed.getPreviousElementSibling(node);\n  },\n\n  _getPreviousElementSibling(node) {\n    let n = node.__dom.previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  // Capture the list of light children. It's important to do this before we\n  // start transforming the DOM into \"rendered\" state.\n  // Children may be added to this list dynamically. It will be treated as the\n  // source of truth for the light children of the element. This element's\n  // actual children will be treated as the rendered state once this function\n  // has been called.\n  saveChildNodes(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.firstChild;\n      node.__dom.lastChild = node.lastChild;\n      let c$ = node.__dom.childNodes = tree.arrayCopyChildNodes(node);\n      for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        n.__dom = n.__dom || {};\n        n.__dom.parentNode = node;\n        n.__dom.nextSibling = c$[i+1] || null;\n        n.__dom.previousSibling = c$[i-1] || null;\n        utils.common.patchNode(n);\n      }\n    }\n  },\n\n  // TODO(sorvell): may need to patch saveChildNodes iff the tree has\n  // already been distributed.\n  // NOTE: ensure `node` is patched...\n  recordInsertBefore(node, container, ref_node) {\n    container.__dom.childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      let c$ = tree.arrayCopyChildNodes(node);\n      for (let i=0; i < c$.length; i++) {\n        this._linkNode(c$[i], container, ref_node);\n      }\n      // cleanup logical dom in doc fragment.\n      node.__dom = node.__dom || {};\n      node.__dom.firstChild = node.__dom.lastChild = undefined;\n      node.__dom.childNodes = null;\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode(node, container, ref_node) {\n    utils.common.patchNode(node);\n    ref_node = ref_node || null;\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.previousSibling = ref_node ? ref_node.__dom.previousSibling :\n      container.__dom.lastChild;\n    if (node.__dom.previousSibling) {\n      node.__dom.previousSibling.__dom.nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.nextSibling = ref_node;\n    if (node.__dom.nextSibling) {\n      node.__dom.nextSibling.__dom.previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    } else {\n      container.__dom.lastChild = node;\n      if (!container.__dom.firstChild) {\n        container.__dom.firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  },\n\n  recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.firstChild) {\n      container.__dom.firstChild = node.__dom.nextSibling;\n    }\n    if (node === container.__dom.lastChild) {\n      container.__dom.lastChild = node.__dom.previousSibling;\n    }\n    let p = node.__dom.previousSibling;\n    let n = node.__dom.nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.previousSibling = p;\n    }\n    // When an element is removed, logical data is no longer tracked.\n    // Explicitly set `undefined` here to indicate this. This is disginguished\n    // from `null` which is set if info is null.\n    node.__dom.parentNode = node.__dom.previousSibling =\n      node.__dom.nextSibling = undefined;\n    // remove caching of childNodes\n    container.__dom.childNodes = null;\n  }\n\n}\n\n\n// TODO(sorvell): composed tree manipulation is made available\n// (1) to maninpulate the composed tree, and (2) to track changes\n// to the tree for optional patching pluggability.\ntree.Composed = {\n\n  hasParentNode(node) {\n    return Boolean(node.__dom && node.__dom.$parentNode !== undefined);\n  },\n\n  hasChildNodes(node) {\n    return Boolean(node.__dom && node.__dom.$childNodes !== undefined);\n  },\n\n  getChildNodes(node) {\n    return this.hasChildNodes(node) ? this._getChildNodes(node) :\n      (!node.__patched && tree.arrayCopy(node.childNodes));\n  },\n\n  _getChildNodes(node) {\n    if (!node.__dom.$childNodes) {\n      node.__dom.$childNodes = [];\n      for (let n=node.__dom.$firstChild; n; n=n.__dom.$nextSibling) {\n        node.__dom.$childNodes.push(n);\n      }\n    }\n    return node.__dom.$childNodes;\n  },\n\n  getComposedChildNodes(node) {\n    return node.__dom.$childNodes;\n  },\n\n  getParentNode(node) {\n    return this.hasParentNode(node) ? node.__dom.$parentNode :\n      (!node.__patched && node.parentNode);\n  },\n\n  getFirstChild(node) {\n    return node.__patched ? node.__dom.$firstChild : node.firstChild;\n  },\n\n  getLastChild(node) {\n    return node.__patched ? node.__dom.$lastChild : node.lastChild;\n  },\n\n  getNextSibling(node) {\n    return node.__patched ? node.__dom.$nextSibling : node.nextSibling;\n  },\n\n  getPreviousSibling(node) {\n    return node.__patched ? node.__dom.$previousSibling : node.previousSibling;\n  },\n\n  getFirstElementChild(node) {\n    return node.__patched ? this._getFirstElementChild(node) :\n      node.firstElementChild;\n  },\n\n  _getFirstElementChild(node) {\n    let n = node.__dom.$firstChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$nextSibling;\n    }\n    return n;\n  },\n\n  getLastElementChild(node) {\n    return node.__patched ? this._getLastElementChild(node) :\n      node.lastElementChild;\n  },\n\n  _getLastElementChild(node) {\n    let n = node.__dom.$lastChild;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = n.__dom.$previousSibling;\n    }\n    return n;\n  },\n\n  getNextElementSibling(node) {\n    return node.__patched ? this._getNextElementSibling(node) :\n      node.nextElementSibling;\n  },\n\n  _getNextElementSibling(node) {\n    let n = node.__dom.$nextSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getNextSibling(n);\n    }\n    return n;\n  },\n\n  getPreviousElementSibling(node) {\n    return node.__patched ? this._getPreviousElementSibling(node) :\n      node.previousElementSibling;\n  },\n\n  _getPreviousElementSibling(node) {\n    let n = node.__dom.$previousSibling;\n    while (n && n.nodeType !== Node.ELEMENT_NODE) {\n      n = this.getPreviousSibling(n);\n    }\n    return n;\n  },\n\n  saveChildNodes(node) {\n    if (!this.hasChildNodes(node)) {\n      node.__dom = node.__dom || {};\n      node.__dom.$firstChild = node.firstChild;\n      node.__dom.$lastChild = node.lastChild;\n      let c$ = node.__dom.$childNodes = tree.arrayCopyChildNodes(node);\n      for (let i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n        this.saveComposedData(n);\n      }\n    }\n  },\n\n  saveComposedData(node) {\n    node.__dom = node.__dom || {};\n    if (node.__dom.$parentNode === undefined) {\n      node.__dom.$parentNode = node.parentNode;\n    }\n    if (node.__dom.$nextSibling === undefined) {\n      node.__dom.$nextSibling = node.nextSibling;\n    }\n    if (node.__dom.$previousSibling === undefined) {\n      node.__dom.$previousSibling = node.previousSibling;\n    }\n  },\n\n  recordInsertBefore(node, container, ref_node) {\n    container.__dom.$childNodes = null;\n    // handle document fragments\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      // TODO(sorvell): remember this for patching:\n      // the act of setting this info can affect patched nodes\n      // getters; therefore capture childNodes before patching.\n      for (let n=this.getFirstChild(node); n; n=this.getNextSibling(n)) {\n        this._linkNode(n, container, ref_node);\n      }\n    } else {\n      this._linkNode(node, container, ref_node);\n    }\n  },\n\n  _linkNode(node, container, ref_node) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (ref_node) {\n      ref_node.__dom = ref_node.__dom || {};\n    }\n    // update ref_node.previousSibling <-> node\n    node.__dom.$previousSibling = ref_node ? ref_node.__dom.$previousSibling :\n      container.__dom.$lastChild;\n    if (node.__dom.$previousSibling) {\n      node.__dom.$previousSibling.__dom.$nextSibling = node;\n    }\n    // update node <-> ref_node\n    node.__dom.$nextSibling = ref_node;\n    if (node.__dom.$nextSibling) {\n      node.__dom.$nextSibling.__dom.$previousSibling = node;\n    }\n    // update node <-> container\n    node.__dom.$parentNode = container;\n    if (ref_node) {\n      if (ref_node === container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    } else {\n      container.__dom.$lastChild = node;\n      if (!container.__dom.$firstChild) {\n        container.__dom.$firstChild = node;\n      }\n    }\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  recordRemoveChild(node, container) {\n    node.__dom = node.__dom || {};\n    container.__dom = container.__dom || {};\n    if (node === container.__dom.$firstChild) {\n      container.__dom.$firstChild = node.__dom.$nextSibling;\n    }\n    if (node === container.__dom.$lastChild) {\n      container.__dom.$lastChild = node.__dom.$previousSibling;\n    }\n    let p = node.__dom.$previousSibling;\n    let n = node.__dom.$nextSibling;\n    if (p) {\n      p.__dom = p.__dom || {};\n      p.__dom.$nextSibling = n;\n    }\n    if (n) {\n      n.__dom = n.__dom || {};\n      n.__dom.$previousSibling = p;\n    }\n    node.__dom.$parentNode = node.__dom.$previousSibling =\n      node.__dom.$nextSibling = null;\n    // remove caching of childNodes\n    container.__dom.$childNodes = null;\n  },\n\n  clearChildNodes(node) {\n    let c$ = this.getChildNodes(node);\n    for (let i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      this.recordRemoveChild(c, node);\n      nativeRemoveChild.call(node, c)\n    }\n  },\n\n  saveParentNode(node) {\n    node.__dom = node.__dom || {};\n    node.__dom.$parentNode = node.parentNode;\n  },\n\n  insertBefore(parentNode, newChild, refChild) {\n    this.saveChildNodes(parentNode);\n    // remove from current location.\n    this._addChild(parentNode, newChild, refChild);\n    return nativeInsertBefore.call(parentNode, newChild, refChild || null);\n  },\n\n  appendChild(parentNode, newChild) {\n    this.saveChildNodes(parentNode);\n    this._addChild(parentNode, newChild);\n    return nativeAppendChild.call(parentNode, newChild);\n  },\n\n  removeChild(parentNode, node) {\n    let currentParent = this.getParentNode(node);\n    this.saveChildNodes(parentNode);\n    this._removeChild(parentNode, node);\n    if (currentParent === parentNode) {\n      return nativeRemoveChild.call(parentNode, node);\n    }\n  },\n\n  _addChild(parentNode, newChild, refChild) {\n    let isFrag = (newChild.nodeType === Node.DOCUMENT_FRAGMENT_NODE);\n    let oldParent = this.getParentNode(newChild);\n    if (oldParent) {\n      this._removeChild(oldParent, newChild);\n    }\n    if (isFrag) {\n      let c$ = this.getChildNodes(newChild);\n      for (let i=0; i < c$.length; i++) {\n        let c = c$[i];\n        // unlink document fragment children\n        this._removeChild(newChild, c);\n        this.recordInsertBefore(c, parentNode, refChild);\n      }\n    } else {\n      this.recordInsertBefore(newChild, parentNode, refChild);\n    }\n  },\n\n  _removeChild(parentNode, node) {\n    this.recordRemoveChild(node, parentNode);\n  }\n\n};\n\n// for testing...\nlet descriptors = {};\nexport function getNativeProperty(element, property) {\n  if (!descriptors[property]) {\n    descriptors[property] = Object.getOwnPropertyDescriptor(\n      HTMLElement.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Element.prototype, property) ||\n    Object.getOwnPropertyDescriptor(\n      Node.prototype, property);\n  }\n  return descriptors[property].get.call(element);\n}\n\n// for testing...\nfunction assertNative(element, property, tracked) {\n  let native = getNativeProperty(element, property);\n  if (native != tracked && element.__patched) {\n    window.console.warn('tracked', tracked, 'native', native);\n  }\n  return tracked;\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {tree} from './tree'\n\nexport default class {\n\n  constructor(root) {\n    this.root = root;\n    this.insertionPointTag = 'slot';\n  }\n\n  getInsertionPoints() {\n    return this.root.querySelectorAll(this.insertionPointTag);\n  }\n\n  hasInsertionPoint() {\n    return Boolean(this.root._insertionPoints &&\n      this.root._insertionPoints.length);\n  }\n\n  isInsertionPoint(node) {\n    return node.localName && node.localName == this.insertionPointTag;\n  }\n\n  reset() {\n    // light children\n    let children = tree.Logical.getChildNodes(this.root.host);\n    for (let i = 0; i < children.length; i++) {\n      this.resetChild(children[i]);\n    }\n    // insertion points\n    let p$ = this.root._insertionPoints;\n    for (let j = 0; j < p$.length; j++) {\n      this.resetInsertionPoint(p$[j]);\n    }\n  }\n\n  resetChild(child) {\n    child._assignedSlot = undefined;\n  }\n\n  resetInsertionPoint(insertionPoint) {\n    insertionPoint._distributedNodes = [];\n    insertionPoint._assignedNodes = [];\n  }\n\n  distribute() {\n    if (this.hasInsertionPoint()) {\n      this.reset();\n      return this.distributePool(this.root, this.collectPool());\n    }\n    return [];\n  }\n\n  // Gather the pool of nodes that should be distributed. We will combine\n  // these with the \"content root\" to arrive at the composed tree.\n  collectPool() {\n    return tree.arrayCopy(\n      tree.Logical.getChildNodes(this.root.host));\n  }\n\n  // perform \"logical\" distribution; note, no actual dom is moved here,\n  // instead elements are distributed into a `content._distributedNodes`\n  // array where applicable.\n  distributePool(node, pool) {\n    let dirtyRoots = [];\n    let p$ = this.root._insertionPoints;\n    for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n      this.distributeInsertionPoint(p, pool);\n      // provoke redistribution on insertion point parents\n      // must do this on all candidate hosts since distribution in this\n      // scope invalidates their distribution.\n      // only get logical parent.\n      let parent = tree.Logical.getParentNode(p);\n      if (parent && parent.shadyRoot &&\n          this.hasInsertionPoint(parent.shadyRoot)) {\n        dirtyRoots.push(parent.shadyRoot);\n      }\n    }\n    return dirtyRoots;\n  }\n\n  distributeInsertionPoint(insertionPoint, pool) {\n    // distribute nodes from the pool that this selector matches\n    let anyDistributed = false;\n    for (let i=0, l=pool.length, node; i < l; i++) {\n      node=pool[i];\n      // skip nodes that were already used\n      if (!node) {\n        continue;\n      }\n      // distribute this node if it matches\n      if (this.matchesInsertionPoint(node, insertionPoint)) {\n        this.distributeNodeInto(node, insertionPoint);\n        // remove this node from the pool\n        pool[i] = undefined;\n        // since at least one node matched, we won't need fallback content\n        anyDistributed = true;\n      }\n    }\n    // Fallback content if nothing was distributed here\n    if (!anyDistributed) {\n      let children = tree.Logical.getChildNodes(insertionPoint);\n      for (let j = 0; j < children.length; j++) {\n        this.distributeNodeInto(children[j], insertionPoint);\n      }\n    }\n    this.setDistributedNodesOnInsertionPoint(insertionPoint);\n  }\n\n  matchesInsertionPoint(node, insertionPoint) {\n    let slotName = insertionPoint.getAttribute('name');\n    slotName = slotName ? slotName.trim() : '';\n    let slot = node.getAttribute && node.getAttribute('slot');\n    slot = slot ? slot.trim() : '';\n    return (slot == slotName);\n  }\n\n  distributeNodeInto(child, insertionPoint) {\n    insertionPoint._assignedNodes.push(child);\n    child._assignedSlot = insertionPoint;\n  }\n\n  setDistributedNodesOnInsertionPoint(insertionPoint) {\n    let n$ = insertionPoint._assignedNodes;\n    insertionPoint._distributedNodes = [];\n    for (let i=0, n; (i<n$.length) && (n=n$[i]) ; i++) {\n      if (this.isInsertionPoint(n)) {\n        let d$ = n._distributedNodes;\n        if (d$) {\n          for (let j=0; j < d$.length; j++) {\n            insertionPoint._distributedNodes.push(d$[j]);\n          }\n        }\n      } else {\n        insertionPoint._distributedNodes.push(n$[i]);\n      }\n    }\n  }\n\n  isFinalDestination(insertionPoint) {\n    return !(insertionPoint._assignedSlot);\n  }\n\n  rendered() {\n    let ip$ = this.root._insertionPoints;\n    for (let i=0, slot; i < ip$.length; i++) {\n      slot = ip$[i];\n      if (slot.__eventListenerCount) {\n        // NOTE: cannot bubble correctly here so not setting bubbles: true\n        slot.dispatchEvent(new Event('slotchange', { cancelable: true }));\n      }\n    }\n  }\n\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\n// Cribbed from ShadowDOM polyfill\n// https://github.com/webcomponents/webcomponentsjs/blob/master/src/ShadowDOM/wrappers/HTMLElement.js#L28\n/////////////////////////////////////////////////////////////////////////////\n// innerHTML and outerHTML\n\n// http://www.whatwg.org/specs/web-apps/current-work/multipage/the-end.html#escapingString\nlet escapeAttrRegExp = /[&\\u00A0\"]/g;\nlet escapeDataRegExp = /[&\\u00A0<>]/g;\n\nfunction escapeReplace(c) {\n  switch (c) {\n    case '&':\n      return '&amp;';\n    case '<':\n      return '&lt;';\n    case '>':\n      return '&gt;';\n    case '\"':\n      return '&quot;';\n    case '\\u00A0':\n      return '&nbsp;';\n  }\n}\n\nfunction escapeAttr(s) {\n  return s.replace(escapeAttrRegExp, escapeReplace);\n}\n\nfunction escapeData(s) {\n  return s.replace(escapeDataRegExp, escapeReplace);\n}\n\nfunction makeSet(arr) {\n  let set = {};\n  for (let i = 0; i < arr.length; i++) {\n    set[arr[i]] = true;\n  }\n  return set;\n}\n\n// http://www.whatwg.org/specs/web-apps/current-work/#void-elements\nlet voidElements = makeSet([\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr'\n]);\n\nlet plaintextParents = makeSet([\n  'style',\n  'script',\n  'xmp',\n  'iframe',\n  'noembed',\n  'noframes',\n  'plaintext',\n  'noscript'\n]);\n\nexport function getOuterHTML(node, parentNode, composed) {\n  switch (node.nodeType) {\n    case Node.ELEMENT_NODE: {\n      let tagName = node.localName;\n      let s = '<' + tagName;\n      let attrs = node.attributes;\n      for (let i = 0, attr; (attr = attrs[i]); i++) {\n        s += ' ' + attr.name + '=\"' + escapeAttr(attr.value) + '\"';\n      }\n      s += '>';\n      if (voidElements[tagName]) {\n        return s;\n      }\n      return s + getInnerHTML(node, composed) + '</' + tagName + '>';\n    }\n    case Node.TEXT_NODE: {\n      let data = node.data;\n      if (parentNode && plaintextParents[parentNode.localName]) {\n        return data;\n      }\n      return escapeData(data);\n    }\n    case Node.COMMENT_NODE: {\n      return '<!--' + node.data + '-->';\n    }\n    default: {\n      window.console.error(node);\n      throw new Error('not implemented');\n    }\n  }\n}\n\nexport function getInnerHTML(node, composed) {\n  if (node.localName === 'template') {\n    node = node.content;\n  }\n  let s = '';\n  let c$ = composed ? composed(node) : node.childNodes;\n  for (let i=0, l=c$.length, child; (i<l) && (child=c$[i]); i++) {\n    s += getOuterHTML(child, node, composed);\n  }\n  return s;\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport * as utils from './utils'\nimport {getInnerHTML} from './innerHTML'\nimport {tree} from './tree'\n\nlet mixinImpl = {\n\n  // Try to add node. Record logical info, track insertion points, perform\n  // distribution iff needed. Return true if the add is handled.\n  addNode(container, node, ref_node) {\n    let ownerRoot = this.ownerShadyRootForNode(container);\n    if (ownerRoot) {\n      // optimization: special insertion point tracking\n      if (node.__noInsertionPoint) {\n        ownerRoot._skipUpdateInsertionPoints = true;\n      }\n      // note: we always need to see if an insertion point is added\n      // since this saves logical tree info; however, invalidation state\n      // needs\n      let ipAdded = this._maybeAddInsertionPoint(node, container, ownerRoot);\n      // invalidate insertion points IFF not already invalid!\n      if (ipAdded) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n      }\n      this._addedNode(node, ownerRoot);\n    }\n    if (tree.Logical.hasChildNodes(container)) {\n      tree.Logical.recordInsertBefore(node, container, ref_node);\n    }\n    // if not distributing and not adding to host, do a fast path addition\n    let handled = this._maybeDistribute(node, container, ownerRoot) ||\n      container.shadyRoot;\n    // TODO(sorvell): Can we do this cleanup code before distribution?\n    // if shady is handling this node,\n    // the actual dom may not be removed if the node or fragment contents\n    // remain undistributed so we ensure removal here.\n    // NOTE: we only remove from existing location iff shady dom is involved.\n    // This is because a node fragment is passed to the native add method\n    // which expects to see fragment children. Regular elements must also\n    // use this check because not doing so causes separation of\n    // attached/detached and breaks, for example,\n    // dom-if's attached/detached checks.\n    if (handled) {\n      if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n        // TODO(sorvell): copy nodes ahead of time to avoid iloop\n        // that can occur when parent is not patched and child is...\n        let c$ = tree.arrayCopyChildNodes(node);\n        for (let i=0; i < c$.length; i++) {\n          tree.Composed.removeChild(node, c$[i]);\n        }\n      } else {\n        let parent = tree.Composed.getParentNode(node);\n        if (parent) {\n          tree.Composed.removeChild(parent, node);\n        }\n      }\n    }\n    return handled;\n  },\n\n  // Try to remove node: update logical info and perform distribution iff\n  // needed. Return true if the removal has been handled.\n  // note that it's possible for both the node's host and its parent\n  // to require distribution... both cases are handled here.\n  removeNode(node) {\n    // important that we want to do this only if the node has a logical parent\n    let logicalParent = tree.Logical.hasParentNode(node) &&\n      tree.Logical.getParentNode(node);\n    let distributed;\n    let ownerRoot = this.ownerShadyRootForNode(node);\n    if (logicalParent) {\n      // distribute node's parent iff needed\n      distributed = this.maybeDistributeParent(node);\n      tree.Logical.recordRemoveChild(node, logicalParent);\n      // remove node from root and distribute it iff needed\n      if (ownerRoot && (this._removeDistributedChildren(ownerRoot, node) ||\n        logicalParent.localName === ownerRoot.getInsertionPointTag())) {\n        ownerRoot._skipUpdateInsertionPoints = false;\n        ownerRoot.update();\n      }\n    }\n    this._removeOwnerShadyRoot(node);\n    if (ownerRoot) {\n      this._removedNode(node, ownerRoot);\n    }\n    return distributed;\n  },\n\n  removeNodeFromParent(node, parent) {\n    if (parent) {\n      // TODO(sorvell): notify\n      // if (DomApi.hasApi(parent)) {\n      //   dom(parent).notifyObserver();\n      // }\n      this.removeNode(node);\n    } else {\n      this._removeOwnerShadyRoot(node);\n    }\n  },\n\n  _hasCachedOwnerRoot(node) {\n    return Boolean(node.__ownerShadyRoot !== undefined);\n  },\n\n  getRootNode(node) {\n    if (!node || !node.nodeType) {\n      return;\n    }\n    let root = node.__ownerShadyRoot;\n    if (root === undefined) {\n      if (utils.isShadyRoot(node)) {\n        root = node;\n      } else {\n        let parent = tree.Logical.getParentNode(node);\n        root = parent ? this.getRootNode(parent) : node;\n      }\n      // memo-ize result for performance but only memo-ize\n      // result if node is in the document. This avoids a problem where a root\n      // can be cached while an element is inside a fragment.\n      // If this happens and we cache the result, the value can become stale\n      // because for perf we avoid processing the subtree of added fragments.\n      if (document.contains(node)) {\n        node.__ownerShadyRoot = root;\n      }\n    }\n    return root;\n  },\n\n  ownerShadyRootForNode(node) {\n    let root = this.getRootNode(node);\n    if (utils.isShadyRoot(root)) {\n      return root;\n    }\n  },\n\n  _maybeDistribute(node, container, ownerRoot) {\n    // TODO(sorvell): technically we should check non-fragment nodes for\n    // <content> children but since this case is assumed to be exceedingly\n    // rare, we avoid the cost and will address with some specific api\n    // when the need arises.  For now, the user must call\n    // distributeContent(true), which updates insertion points manually\n    // and forces distribution.\n    let insertionPointTag = ownerRoot && ownerRoot.getInsertionPointTag() || '';\n    let fragContent = (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) &&\n      !node.__noInsertionPoint &&\n      insertionPointTag && node.querySelector(insertionPointTag);\n    let wrappedContent = fragContent &&\n      (tree.Logical.getParentNode(fragContent).nodeType !==\n      Node.DOCUMENT_FRAGMENT_NODE);\n    let hasContent = fragContent || (node.localName === insertionPointTag);\n    // There are 3 possible cases where a distribution may need to occur:\n    // 1. <content> being inserted (the host of the shady root where\n    //    content is inserted needs distribution)\n    // 2. children being inserted into parent with a shady root (parent\n    //    needs distribution)\n    // 3. container is an insertionPoint\n    if (hasContent || (container.localName === insertionPointTag)) {\n      if (ownerRoot) {\n        // note, insertion point list update is handled after node\n        // mutations are complete\n        ownerRoot.update();\n      }\n    }\n    let needsDist = this._nodeNeedsDistribution(container);\n    if (needsDist) {\n      container.shadyRoot.update();\n    }\n    // Return true when distribution will fully handle the composition\n    // Note that if a content was being inserted that was wrapped by a node,\n    // and the parent does not need distribution, return false to allow\n    // the nodes to be added directly, after which children may be\n    // distributed and composed into the wrapping node(s)\n    return needsDist || (hasContent && !wrappedContent);\n  },\n\n  /* note: parent argument is required since node may have an out\n  of date parent at this point; returns true if a <content> is being added */\n  _maybeAddInsertionPoint(node, parent, root) {\n    let added;\n    let insertionPointTag = root.getInsertionPointTag();\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE &&\n      !node.__noInsertionPoint) {\n      let c$ = node.querySelectorAll(insertionPointTag);\n      for (let i=0, n, np, na; (i<c$.length) && (n=c$[i]); i++) {\n        np = tree.Logical.getParentNode(n);\n        // don't allow node's parent to be fragment itself\n        if (np === node) {\n          np = parent;\n        }\n        na = this._maybeAddInsertionPoint(n, np, root);\n        added = added || na;\n      }\n    } else if (node.localName === insertionPointTag) {\n      tree.Logical.saveChildNodes(parent);\n      tree.Logical.saveChildNodes(node);\n      added = true;\n    }\n    return added;\n  },\n\n  _nodeNeedsDistribution(node) {\n    return node && node.shadyRoot &&\n      node.shadyRoot.hasInsertionPoint();\n  },\n\n  // TODO(sorvell): needed for style scoping, use MO?\n  _addedNode() {},\n  _removedNode() {},\n  /*\n  _addedNode(node, root) {\n    // if (ShadyDOM.addedNode) {\n    //   ShadyDOM.addedNode(node, root);\n    // }\n  },\n\n  _removedNode(node, root) {\n    if (ShadyDOM.removedNode) {\n      ShadyDOM.removedNode(node, root);\n    }\n  },\n  */\n\n  _removeDistributedChildren(root, container) {\n    let hostNeedsDist;\n    let ip$ = root._insertionPoints;\n    for (let i=0; i<ip$.length; i++) {\n      let insertionPoint = ip$[i];\n      if (this._contains(container, insertionPoint)) {\n        let dc$ = insertionPoint.assignedNodes({flatten: true});\n        for (let j=0; j<dc$.length; j++) {\n          hostNeedsDist = true;\n          let node = dc$[j];\n          let parent = tree.Composed.getParentNode(node);\n          if (parent) {\n            tree.Composed.removeChild(parent, node);\n          }\n        }\n      }\n    }\n    return hostNeedsDist;\n  },\n\n  _contains(container, node) {\n    while (node) {\n      if (node == container) {\n        return true;\n      }\n      node = tree.Logical.getParentNode(node);\n    }\n  },\n\n  _removeOwnerShadyRoot(node) {\n    // optimization: only reset the tree if node is actually in a root\n    if (this._hasCachedOwnerRoot(node)) {\n      let c$ = tree.Logical.getChildNodes(node);\n      for (let i=0, l=c$.length, n; (i<l) && (n=c$[i]); i++) {\n        this._removeOwnerShadyRoot(n);\n      }\n    }\n    node.__ownerShadyRoot = undefined;\n  },\n\n  // TODO(sorvell): This will fail if distribution that affects this\n  // question is pending; this is expected to be exceedingly rare, but if\n  // the issue comes up, we can force a flush in this case.\n  firstComposedNode(insertionPoint) {\n    let n$ = insertionPoint.assignedNodes({flatten: true});\n    let root = this.getRootNode(insertionPoint);\n    for (let i=0, l=n$.length, n; (i<l) && (n=n$[i]); i++) {\n      // means that we're composed to this spot.\n      if (root.isFinalDestination(insertionPoint, n)) {\n        return n;\n      }\n    }\n  },\n\n  clearNode(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  },\n\n  maybeDistributeParent(node) {\n    let parent = tree.Logical.getParentNode(node);\n    if (this._nodeNeedsDistribution(parent)) {\n      parent.shadyRoot.update();\n      return true;\n    }\n  },\n\n  maybeDistributeAttributeChange(node, name) {\n    let distribute = (node.localName === 'slot' && name === 'name');\n    if (distribute) {\n      let root = this.getRootNode(node);\n      if (root.update) {\n        root.update();\n      }\n    }\n  },\n\n  // NOTE: `query` is used primarily for ShadyDOM's querySelector impl,\n  // but it's also generally useful to recurse through the element tree\n  // and is used by Polymer's styling system.\n  query(node, matcher, halter) {\n    let list = [];\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n    return list;\n  },\n\n  _queryElements(elements, matcher, halter, list) {\n    for (let i=0, l=elements.length, c; (i<l) && (c=elements[i]); i++) {\n      if (c.nodeType === Node.ELEMENT_NODE &&\n          this._queryElement(c, matcher, halter, list)) {\n        return true;\n      }\n    }\n  },\n\n  _queryElement(node, matcher, halter, list) {\n    let result = matcher(node);\n    if (result) {\n      list.push(node);\n    }\n    if (halter && halter(result)) {\n      return result;\n    }\n    this._queryElements(tree.Logical.getChildNodes(node), matcher,\n      halter, list);\n  },\n\n  activeElementForNode(node) {\n    let active = document.activeElement;\n    if (!active) {\n      return null;\n    }\n    let isShadyRoot = !!(utils.isShadyRoot(node));\n    if (node !== document) {\n      // If this node isn't a document or shady root, then it doesn't have\n      // an active element.\n      if (!isShadyRoot) {\n        return null;\n      }\n      // If this shady root's host is the active element or the active\n      // element is not a descendant of the host (in the composed tree),\n      // then it doesn't have an active element.\n      if (node.host === active ||\n          !node.host.contains(active)) {\n        return null;\n      }\n    }\n    // This node is either the document or a shady root of which the active\n    // element is a (composed) descendant of its host; iterate upwards to\n    // find the active element's most shallow host within it.\n    let activeRoot = this.ownerShadyRootForNode(active);\n    while (activeRoot && activeRoot !== node) {\n      active = activeRoot.host;\n      activeRoot = this.ownerShadyRootForNode(active);\n    }\n    if (node === document) {\n      // This node is the document, so activeRoot should be null.\n      return activeRoot ? null : active;\n    } else {\n      // This node is a non-document shady root, and it should be\n      // activeRoot.\n      return activeRoot === node ? active : null;\n    }\n  }\n\n};\n\nlet nativeCloneNode = Element.prototype.cloneNode;\nlet nativeImportNode = Document.prototype.importNode;\nlet nativeSetAttribute = Element.prototype.setAttribute;\nlet nativeRemoveAttribute = Element.prototype.removeAttribute;\n\nlet NodeMixin = {};\n\nObject.defineProperties(NodeMixin, {\n\n  parentElement: {\n    get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  parentNode: {\n    get() {\n      return tree.Logical.getParentNode(this);\n    },\n    configurable: true\n  },\n\n  nextSibling: {\n    get() {\n      return tree.Logical.getNextSibling(this);\n    },\n    configurable: true\n  },\n\n  previousSibling: {\n    get() {\n      return tree.Logical.getPreviousSibling(this);\n    },\n    configurable: true\n  },\n\n  nextElementSibling: {\n    get() {\n      return tree.Logical.getNextElementSibling(this);\n    },\n    configurable: true\n  },\n\n  previousElementSibling: {\n    get() {\n      return tree.Logical.getPreviousElementSibling(this);\n    },\n    configurable: true\n  },\n\n  assignedSlot: {\n    get() {\n      return this._assignedSlot;\n    },\n    configurable: true\n  }\n});\n\nlet FragmentMixin = {\n\n  appendChild(node) {\n    return this.insertBefore(node);\n  },\n\n  // cases in which we may not be able to just do standard native call\n  // 1. container has a shadyRoot (needsDistribution IFF the shadyRoot\n  // has an insertion point)\n  // 2. container is a shadyRoot (don't distribute, instead set\n  // container to container.host.\n  // 3. node is <content> (host of container needs distribution)\n  insertBefore(node, ref_node) {\n    if (ref_node && tree.Logical.getParentNode(ref_node) !== this) {\n      throw Error('The ref_node to be inserted before is not a child ' +\n        'of this node');\n    }\n    // remove node from its current position iff it's in a tree.\n    if (node.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n      let parent = tree.Logical.getParentNode(node);\n      mixinImpl.removeNodeFromParent(node, parent);\n    }\n    if (!mixinImpl.addNode(this, node, ref_node)) {\n      if (ref_node) {\n        // if ref_node is an insertion point replace with first distributed node\n        // TODO(sorvell): v0/v1!!\n        let root = mixinImpl.ownerShadyRootForNode(ref_node);\n        if (root) {\n          ref_node = ref_node.localName === root.getInsertionPointTag() ?\n            mixinImpl.firstComposedNode(ref_node) : ref_node;\n        }\n      }\n      // if adding to a shadyRoot, add to host instead\n      let container = utils.isShadyRoot(this) ?\n        this.host : this;\n      if (ref_node) {\n        tree.Composed.insertBefore(container, node, ref_node);\n      } else {\n        tree.Composed.appendChild(container, node);\n      }\n    }\n    // TODO(sorvell): notify\n    //this.notifyObserver();\n    return node;\n  },\n\n  /**\n    Removes the given `node` from the element's `lightChildren`.\n    This method also performs dom composition.\n  */\n  removeChild(node) {\n    if (tree.Logical.getParentNode(node) !== this) {\n      throw Error('The node to be removed is not a child of this node: ' +\n        node);\n    }\n    if (!mixinImpl.removeNode(node)) {\n      // if removing from a shadyRoot, remove form host instead\n      let container = utils.isShadyRoot(this) ?\n        this.host :\n        this;\n      // not guaranteed to physically be in container; e.g.\n      // undistributed nodes.\n      let parent = tree.Composed.getParentNode(node);\n      if (container === parent) {\n        tree.Composed.removeChild(container, node);\n      }\n    }\n    // TODO(sorvell): notify\n    //this.notifyObserver();\n    return node;\n  },\n\n  replaceChild(node, ref_node) {\n    this.insertBefore(node, ref_node);\n    this.removeChild(ref_node);\n    return node;\n  },\n\n  // TODO(sorvell): consider doing native QSA and filtering results.\n  querySelector(selector) {\n    // match selector and halt on first result.\n    let result = mixinImpl.query(this, function(n) {\n      return utils.matchesSelector(n, selector);\n    }, function(n) {\n      return Boolean(n);\n    })[0];\n    return result || null;\n  },\n\n  querySelectorAll(selector) {\n    return mixinImpl.query(this, function(n) {\n      return utils.matchesSelector(n, selector);\n    });\n  },\n\n  cloneNode(deep) {\n    if (this.localName == 'template') {\n      return nativeCloneNode.call(this, deep);\n    } else {\n      let n = nativeCloneNode.call(this, false);\n      if (deep) {\n        let c$ = this.childNodes;\n        for (let i=0, nc; i < c$.length; i++) {\n          nc = c$[i].cloneNode(true);\n          n.appendChild(nc);\n        }\n      }\n      return n;\n    }\n  },\n\n  importNode(externalNode, deep) {\n    // for convenience use this node's ownerDoc if the node isn't a document\n    let doc = this instanceof Document ? this :\n      this.ownerDocument;\n    let n = nativeImportNode.call(doc, externalNode, false);\n    if (deep) {\n      let c$ = tree.Logical.getChildNodes(externalNode);\n      utils.common.patchNode(n);\n      for (let i=0, nc; i < c$.length; i++) {\n        nc = doc.importNode(c$[i], true);\n        n.appendChild(nc);\n      }\n    }\n    return n;\n  }\n};\n\nObject.defineProperties(FragmentMixin, {\n\n  childNodes: {\n    get() {\n      let c$ = tree.Logical.getChildNodes(this);\n      return Array.isArray(c$) ? c$ : tree.arrayCopyChildNodes(this);\n    },\n    configurable: true\n  },\n\n  children: {\n    get() {\n      if (tree.Logical.hasChildNodes(this)) {\n        return Array.prototype.filter.call(this.childNodes, function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      } else {\n        return tree.arrayCopyChildren(this);\n      }\n    },\n    configurable: true\n  },\n\n  firstChild: {\n    get() {\n      return tree.Logical.getFirstChild(this);\n    },\n    configurable: true\n  },\n\n  lastChild: {\n    get() {\n      return tree.Logical.getLastChild(this);\n    },\n    configurable: true\n  },\n\n  firstElementChild: {\n    get() {\n      return tree.Logical.getFirstElementChild(this);\n    },\n    configurable: true\n  },\n\n  lastElementChild: {\n    get() {\n      return tree.Logical.getLastElementChild(this);\n    },\n    configurable: true\n  },\n\n  // TODO(srovell): strictly speaking fragments do not have textContent\n  // or innerHTML but ShadowRoots do and are not easily distinguishable.\n  // textContent / innerHTML\n  textContent: {\n    get() {\n      if (this.childNodes) {\n        let tc = [];\n        for (let i = 0, cn = this.childNodes, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n      return '';\n    },\n    set(text) {\n      mixinImpl.clearNode(this);\n      if (text) {\n        this.appendChild(document.createTextNode(text));\n      }\n    },\n    configurable: true\n  },\n\n  innerHTML: {\n    get() {\n      return getInnerHTML(this);\n    },\n    set(text) {\n      mixinImpl.clearNode(this);\n      let d = document.createElement('div');\n      d.innerHTML = text;\n      // here, appendChild may move nodes async so we cannot rely\n      // on node position when copying\n      let c$ = tree.arrayCopyChildNodes(d);\n      for (let i=0; i < c$.length; i++) {\n        this.appendChild(c$[i]);\n      }\n    },\n    configurable: true\n  }\n\n});\n\nlet ElementMixin = {\n\n  // TODO(sorvell): should only exist on <slot>\n  assignedNodes(options) {\n    return (options && options.flatten ? this._distributedNodes :\n      this._assignedNodes) || [];\n  },\n\n\n  setAttribute(name, value) {\n    nativeSetAttribute.call(this, name, value);\n    if (!mixinImpl.maybeDistributeParent(this)) {\n      mixinImpl.maybeDistributeAttributeChange(this, name);\n    }\n  },\n\n  removeAttribute(name) {\n    nativeRemoveAttribute.call(this, name);\n    if (!mixinImpl.maybeDistributeParent(this)) {\n      mixinImpl.maybeDistributeAttributeChange(this, name);\n    }\n  }\n\n};\n\nObject.defineProperties(ElementMixin, {\n\n  shadowRoot: {\n    get() {\n      return this.shadyRoot;\n    }\n  },\n\n  slot: {\n    get() {\n      return this.getAttribute('slot');\n    },\n    set(value) {\n      this.setAttribute('slot', value);\n    }\n  }\n\n});\n\nlet activeElementDescriptor = {\n  get() {\n    return mixinImpl.activeElementForNode(this);\n  }\n}\n\nlet ActiveElementMixin = {};\nObject.defineProperties(ActiveElementMixin, {\n  activeElement: activeElementDescriptor\n});\n\nlet UnderActiveElementMixin = {};\nObject.defineProperties(UnderActiveElementMixin, {\n  _activeElement: activeElementDescriptor\n});\n\nexport let Mixins = {\n\n  Node: utils.extendAll({__patched: 'Node'}, NodeMixin),\n\n  Fragment: utils.extendAll({__patched: 'Fragment'},\n    NodeMixin, FragmentMixin, ActiveElementMixin),\n\n  Element: utils.extendAll({__patched: 'Element'},\n    NodeMixin, FragmentMixin, ElementMixin, ActiveElementMixin),\n\n  // Note: activeElement cannot be patched on document!\n  Document: utils.extendAll({__patched: 'Document'},\n    NodeMixin, FragmentMixin, ElementMixin, UnderActiveElementMixin)\n\n};\n\nexport let getRootNode = mixinImpl.getRootNode;","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {calculateSplices} from './array-splice'\nimport * as utils from './utils'\nimport {tree} from './tree'\nimport Distributor from './distributor'\n\n/**\n  Implements a pared down version of ShadowDOM's scoping, which is easy to\n  polyfill across browsers.\n*/\nexport class ShadyRoot {\n\n  constructor(host) {\n    if (!host) {\n      throw 'Must provide a host';\n    }\n    // NOTE: this strange construction is necessary because\n    // DocumentFragment cannot be subclassed on older browsers.\n    let frag = document.createDocumentFragment();\n    frag.__proto__ = ShadyFragmentMixin;\n    frag._init(host);\n    return frag;\n  }\n\n}\n\nlet ShadyMixin = {\n\n  _init(host) {\n    // TODO(sorvell): set a fake local name so this element can be\n    // distinguished from a DocumentFragment when patching.\n    // FF doesn't allow this to be `localName`\n    this.__localName = 'ShadyRoot';\n    // root <=> host\n    host.shadyRoot = this;\n    this.host = host;\n    // logical dom setup\n    tree.Logical.saveChildNodes(host);\n    tree.Logical.saveChildNodes(this);\n    // state flags\n    this._clean = true;\n    this._hasRendered = false;\n    this._distributor = new Distributor(this);\n    this.update();\n  },\n\n  // async render the \"top\" distributor (this is all that is needed to\n  // distribute this host).\n  update() {\n    let distributionRoot = this._findDistributionRoot(this.host);\n    //console.log('update from', this.host, 'root', distributionRoot.host, distributionRoot._clean);\n    if (distributionRoot._clean) {\n      distributionRoot._clean = false;\n      enqueue(function() {\n        distributionRoot.render();\n      });\n    }\n  },\n\n  // returns the host that's the top of this host's distribution tree\n  _findDistributionRoot(element) {\n    let root = element.shadyRoot;\n    while (element && this._elementNeedsDistribution(element)) {\n      root = element.getRootNode();\n      element = root && root.host;\n    }\n    return root;\n  },\n\n  // Return true if a host's children includes\n  // an insertion point that selects selectively\n  _elementNeedsDistribution(element) {\n    let c$ = tree.Logical.getChildNodes(element);\n    for (let i=0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (this._distributor.isInsertionPoint(c)) {\n        return element.getRootNode();\n      }\n    }\n  },\n\n  render() {\n    if (!this._clean) {\n      if (!this._skipUpdateInsertionPoints) {\n        this.updateInsertionPoints();\n      } else if (!this._hasRendered) {\n        this._insertionPoints = [];\n      }\n      this._skipUpdateInsertionPoints = false;\n      // TODO(sorvell): previous ShadyDom had a fast path here\n      // that would avoid distribution for initial render if\n      // no insertion points exist. We cannot currently do this because\n      // it relies on elements being in the physical shadowRoot element\n      // so that native methods will be used. The current append code\n      // simply provokes distribution in this case and does not put the\n      // nodes in the shadowRoot. This could be done but we'll need to\n      // consider if the special processing is worth the perf gain.\n      // if (!this._hasRendered && !this._insertionPoints.length) {\n      //   tree.Composed.clearChildNodes(this.host);\n      //   tree.Composed.appendChild(this.host, this);\n      // } else {\n      // logical\n      this.distribute();\n      // physical\n      this.compose();\n      // allow distributor to do post render tasks (e.g. fire events!)\n      this._distributor.rendered();\n      this._clean = true;\n      this._hasRendered = true;\n    }\n  },\n\n  forceRender() {\n    this._clean = false;\n    this.render();\n  },\n\n  distribute() {\n    let dirtyRoots = this._distributor.distribute();\n    for (let i=0; i<dirtyRoots.length; i++) {\n      dirtyRoots[i].forceRender();\n    }\n  },\n\n  updateInsertionPoints() {\n    let i$ = this._insertionPoints = this._distributor.getInsertionPoints();\n    // ensure insertionPoints's and their parents have logical dom info.\n    // save logical tree info\n    // a. for shadyRoot\n    // b. for insertion points (fallback)\n    // c. for parents of insertion points\n    for (let i=0, c; i < i$.length; i++) {\n      c = i$[i];\n      tree.Logical.saveChildNodes(c);\n      tree.Logical.saveChildNodes(tree.Logical.getParentNode(c));\n    }\n  },\n\n  get _insertionPoints() {\n    if (!this.__insertionPoints) {\n      this.updateInsertionPoints();\n    }\n    return this.__insertionPoints || (this.__insertionPoints = []);\n  },\n\n  set _insertionPoints(insertionPoints) {\n    this.__insertionPoints = insertionPoints;\n  },\n\n  hasInsertionPoint() {\n    return this._distributor.hasInsertionPoint();\n  },\n\n  compose() {\n    // compose self\n    // note: it's important to mark this clean before distribution\n    // so that attachment that provokes additional distribution (e.g.\n    // adding something to your parentNode) works\n    this._composeTree();\n    // TODO(sorvell): notification.\n    // NOTE: send a signal to insertion points that we have distributed\n    // which informs effective children observers\n    //notifyContentObservers(this);\n    // TODO(sorvell): See fast paths here in Polymer v1\n    // (these seem unnecessary)\n    // NOTE: send a signal to any observers\n    // to report the initial set of childNodes\n  },\n\n  // Reify dom such that it is at its correct rendering position\n  // based on logical distribution.\n  _composeTree() {\n    this._updateChildNodes(this.host, this._composeNode(this.host));\n    let p$ = this._insertionPoints || [];\n    for (let i=0, l=p$.length, p, parent; (i<l) && (p=p$[i]); i++) {\n      parent = tree.Logical.getParentNode(p);\n      if ((parent !== this.host) && (parent !== this)) {\n        this._updateChildNodes(parent, this._composeNode(parent));\n      }\n    }\n  },\n\n  // Returns the list of nodes which should be rendered inside `node`.\n  _composeNode(node) {\n    let children = [];\n    let c$ = tree.Logical.getChildNodes(node.shadyRoot || node);\n    for (let i = 0; i < c$.length; i++) {\n      let child = c$[i];\n      if (this._distributor.isInsertionPoint(child)) {\n        let distributedNodes = child._distributedNodes ||\n          (child._distributedNodes = []);\n        for (let j = 0; j < distributedNodes.length; j++) {\n          let distributedNode = distributedNodes[j];\n          if (this.isFinalDestination(child, distributedNode)) {\n            children.push(distributedNode);\n          }\n        }\n      } else {\n        children.push(child);\n      }\n    }\n    return children;\n  },\n\n  isFinalDestination(insertionPoint, node) {\n    return this._distributor.isFinalDestination(\n      insertionPoint, node);\n  },\n\n  // Ensures that the rendered node list inside `container` is `children`.\n  _updateChildNodes(container, children) {\n    let composed = tree.Composed.getChildNodes(container);\n    let splices = calculateSplices(children, composed);\n    // process removals\n    for (let i=0, d=0, s; (i<splices.length) && (s=splices[i]); i++) {\n      for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n        // check if the node is still where we expect it is before trying\n        // to remove it; this can happen if we move a node and\n        // then schedule its previous host for distribution resulting in\n        // the node being removed here.\n        if (tree.Composed.getParentNode(n) === container) {\n          tree.Composed.removeChild(container, n);\n        }\n        composed.splice(s.index + d, 1);\n      }\n      d -= s.addedCount;\n    }\n    // process adds\n    for (let i=0, s, next; (i<splices.length) && (s=splices[i]); i++) { //eslint-disable-line no-redeclare\n      next = composed[s.index];\n      for (let j=s.index, n; j < s.index + s.addedCount; j++) {\n        n = children[j];\n        tree.Composed.insertBefore(container, n, next);\n        // TODO(sorvell): is this splice strictly needed?\n        composed.splice(j, 0, n);\n      }\n    }\n  },\n\n  // TODO(sorvell): util\n  getInsertionPointTag() {\n    return this._distributor.insertionPointTag;\n  }\n\n}\n\nlet ShadyFragmentMixin = Object.create(DocumentFragment.prototype);\nutils.extend(ShadyFragmentMixin, ShadyMixin);\n\n// TODO(sorvell): observation...\n// function notifyContentObservers(root) {\n//   for (let i=0, c; i < root._insertionPoints.length; i++) {\n//     c = root._insertionPoints[i];\n//     if (DomApi.hasApi(c)) {\n//       Polymer.dom(c).notifyObserver();\n//     }\n//   }\n// }\n\n// function notifyInitialDistribution(host) {\n//   if (DomApi.hasApi(host)) {\n//     Polymer.dom(host).notifyObserver();\n//   }\n// }\n\n// let needsUpgrade = window.CustomElements && !CustomElements.useNative;\n\n// function upgradeLogicalChildren(children) {\n//   if (needsUpgrade && children) {\n//     for (let i=0; i < children.length; i++) {\n//       CustomElements.upgrade(children[i]);\n//     }\n//   }\n// }\n\n// render enqueuer/flusher\nlet customElements = window.CustomElements;\nlet flushList = [];\nlet scheduled;\nexport function enqueue(callback) {\n  if (!scheduled) {\n    scheduled = true;\n    Promise.resolve().then(flush);\n  }\n  flushList.push(callback);\n}\n\nexport function flush() {\n  while (flushList.length) {\n    flushList.shift()();\n  }\n  if (customElements) {\n    customElements.takeRecords();\n  }\n  // continue flushing after elements are upgraded...\n  if (flushList.length) {\n    flush();\n  }\n}","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\n'use strict';\nimport {tree} from './tree'\nimport * as utils from './utils'\nimport {Mixins} from './element-mixin'\n\nexport let patchedCount = 0;\n\nlet log = false;\n\nlet patchImpl = {\n\n  canPatchNode: function(node) {\n    switch (node) {\n      case document.head:\n      case document.documentElement:\n        return false;\n      default:\n        return true;\n    }\n  },\n\n  hasPrototypeDescriptors: Boolean(Object.getOwnPropertyDescriptor(\n    window.Node.prototype, 'textContent')),\n\n  patch: function(node) {\n    patchedCount++;\n    log && window.console.warn('patch node', node);\n    if (this.hasPrototypeDescriptors) {\n      utils.patchPrototype(node, this.mixinForObject(node));\n    } else {\n      window.console.warn('Patching instance rather than prototype', node);\n      utils.extend(node, this.mixinForNode(node));\n    }\n  },\n\n  mixinForObject: function(obj) {\n    switch (obj.nodeType) {\n      case Node.ELEMENT_NODE:\n        return Mixins.Element;\n      case Node.DOCUMENT_FRAGMENT_NODE:\n        return Mixins.Fragment;\n      case Node.DOCUMENT_NODE:\n        return Mixins.Document;\n      case Node.TEXT_NODE:\n      case Node.COMMENT_NODE:\n        return Mixins.Node;\n    }\n  },\n\n  unpatch: function(obj) {\n    if (obj.__sourceProto) {\n      obj.__proto__ = obj.__sourceProto;\n\n    }\n    // TODO(sorvell): implement unpatching for non-proto patchable browsers\n  }\n\n};\n\nexport function patchNode(node) {\n  if (!utils.settings.inUse) {\n    return;\n  }\n  if (!isNodePatched(node) && patchImpl.canPatchNode(node)) {\n    tree.saveChildNodes(node);\n    patchImpl.patch(node);\n  }\n}\n\nexport function unpatchNode(node) {\n  patchImpl.unpatch(node);\n}\n\nexport function isNodePatched(node) {\n  return Boolean(node.__patched);\n}\n\n// TODO(sorvell): fake export\nutils.common.patchNode = patchNode;","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport * as utils from './utils'\n\nlet origAddEventListener = Element.prototype.addEventListener;\nlet origRemoveEventListener = Element.prototype.removeEventListener;\n\n// https://github.com/w3c/webcomponents/issues/513#issuecomment-224183937\nlet alwaysComposed = {\n  blur: true,\n  focus: true,\n  focusin: true,\n  focusout: true,\n  click: true,\n  dblclick: true,\n  mousedown: true,\n  mouseenter: true,\n  mouseleave: true,\n  mousemove: true,\n  mouseout: true,\n  mouseover: true,\n  mouseup: true,\n  wheel: true,\n  beforeinput: true,\n  input: true,\n  keydown: true,\n  keyup: true,\n  compositionstart: true,\n  compositionupdate: true,\n  compositionend: true,\n  touchstart: true,\n  touchend: true,\n  touchmove: true,\n  touchcancel: true,\n  pointerover: true,\n  pointerenter: true,\n  pointerdown: true,\n  pointermove: true,\n  pointerup: true,\n  pointercancel: true,\n  pointerout: true,\n  pointerleave: true,\n  gotpointercapture: true,\n  lostpointercapture: true,\n  dragstart: true,\n  drag: true,\n  dragenter: true,\n  dragleave: true,\n  dragover: true,\n  drop: true,\n  dragend: true,\n  DOMActivate: true,\n  DOMFocusIn: true,\n  DOMFocusOut: true,\n  keypress: true\n};\n\nfunction pathComposer(startNode, composed) {\n  let composedPath = [];\n  let current = startNode;\n  let startRoot = startNode === window ? window : startNode.getRootNode();\n  while (current) {\n    composedPath.push(current);\n    if (current.assignedSlot) {\n      current = current.assignedSlot;\n    } else if (current.host && (composed || current !== startRoot)) {\n      current = current.host;\n    } else {\n      current = current.parentNode;\n    }\n  }\n  // event composedPath includes window when startNode's ownerRoot is document\n  if (composedPath[composedPath.length - 1] === document) {\n    composedPath.push(window);\n  }\n  return composedPath;\n}\n\nfunction retarget(refNode, path) {\n  if (!utils.isShadyRoot) {\n    return refNode;\n  }\n  // If ANCESTOR's root is not a shadow root or ANCESTOR's root is BASE's\n  // shadow-including inclusive ancestor, return ANCESTOR.\n  let refNodePath = pathComposer(refNode, true);\n  let p$ = path;\n  for (let i=0, ancestor, lastRoot, root, rootIdx; i < p$.length; i++) {\n    ancestor = p$[i];\n    root = ancestor === window ? window : ancestor.getRootNode();\n    if (root !== lastRoot) {\n      rootIdx = refNodePath.indexOf(root);\n      lastRoot = root;\n    }\n    if (!utils.isShadyRoot(root) || rootIdx > -1) {\n      return ancestor;\n    }\n  }\n}\n\nlet EventMixin = {\n\n  __patched: 'Event',\n\n  get composed() {\n    if (this.isTrusted && this.__composed === undefined) {\n      this.__composed = alwaysComposed[this.type];\n    }\n    return this.__composed || false;\n  },\n\n  composedPath() {\n    if (!this.__composedPath) {\n      this.__composedPath = pathComposer(this.__target, this.composed);\n    }\n    return this.__composedPath;\n  },\n\n  get target() {\n    return retarget(this.currentTarget, this.composedPath());\n  },\n\n  // http://w3c.github.io/webcomponents/spec/shadow/#event-relatedtarget-retargeting\n  get relatedTarget() {\n    if (!this.__relatedTarget) {\n      return null;\n    }\n    if (!this.__relatedTargetComposedPath) {\n      this.__relatedTargetComposedPath = pathComposer(this.__relatedTarget, true);\n    }\n    // find the deepest node in relatedTarget composed path that is in the same root with the currentTarget\n    return retarget(this.currentTarget, this.__relatedTargetComposedPath);\n  },\n  stopPropagation() {\n    Event.prototype.stopPropagation.call(this);\n    this.__propagationStopped = true;\n  },\n  stopImmediatePropagation() {\n    Event.prototype.stopImmediatePropagation.call(this);\n    this.__immediatePropagationStopped = true;\n    this.__propagationStopped = true;\n  }\n\n};\n\nfunction mixinComposedFlag(Base) {\n  // NOTE: avoiding use of `class` here so that transpiled output does not\n  // try to do `Base.call` with a dom construtor.\n  let klazz = function(type, options) {\n    let event = new Base(type, options);\n    event.__composed = options && Boolean(options.composed);\n    return event;\n  }\n  // put constructor properties on subclass (prototype and any statics)\n  utils.extend(klazz, Base);\n  return klazz;\n}\n\nlet nonBubblingEventsToRetarget = {\n  focus: true,\n  blur: true\n};\n\nfunction fireHandlers(event, node, phase) {\n  let hs = node.__handlers && node.__handlers[event.type] &&\n    node.__handlers[event.type][phase];\n  if (hs) {\n    for (let i = 0, fn; (fn = hs[i]); i++) {\n      fn.call(node, event);\n      if (event.__immediatePropagationStopped) {\n        return;\n      }\n    }\n  }\n}\n\nfunction retargetNonBubblingEvent(e) {\n  let path = e.composedPath();\n  let node;\n  // override `currentTarget` to let patched `target` calculate correctly\n  Object.defineProperty(event, 'currentTarget', {\n    get: function() {\n      return node;\n    },\n    configurable: true\n  });\n  for (let i = path.length - 1; i >= 0; i--) {\n    node = path[i];\n    fireHandlers(e, node, 'capture');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n  Object.defineProperty(e, 'eventPhase', {value: Event.BUBBLING_PHASE});\n  for (let i = 0; i < path.length; i++) {\n    node = path[i];\n    fireHandlers(e, node, 'bubble');\n    if (e.__propagationStopped) {\n      return;\n    }\n  }\n}\n\nfunction shouldCapture(optionsOrCapture) {\n  return Boolean(typeof optionsOrCapture === 'object' ?\n    optionsOrCapture.capture : optionsOrCapture);\n}\n\nexport function addEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n  // TODO: investigate if this is worth tracking, as it is only used for\n  // deciding if the `slotchanged` event should be fired\n  if (!this.__eventListenerCount) {\n    this.__eventListenerCount = 0;\n  }\n  this.__eventListenerCount++;\n  let wrappedFn = function(e) {\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      utils.patchPrototype(e, EventMixin);\n    }\n    // There are two critera that should stop events from firing on this node\n    // 1. the event is not composed and the current node is not in the same root as the target\n    // 2. when bubbling, if after retargeting, relatedTarget and target point to the same node\n    if (e.composed || e.composedPath().indexOf(this) > -1) {\n      if (e.eventPhase === Event.BUBBLING_PHASE) {\n        if (e.target === e.relatedTarget) {\n          e.stopImmediatePropagation();\n          return;\n        }\n      }\n      return fn(e);\n    }\n  };\n  fn.__eventWrapper = wrappedFn;\n  if (nonBubblingEventsToRetarget[type]) {\n    this.__handlers = this.__handlers || {};\n    this.__handlers[type] = this.__handlers[type] || {capture: [], bubble: []};\n    if (shouldCapture(optionsOrCapture)) {\n      this.__handlers[type].capture.push(wrappedFn);\n    } else {\n      this.__handlers[type].bubble.push(wrappedFn);\n    }\n  } else {\n    origAddEventListener.call(this, type, wrappedFn, optionsOrCapture);\n  }\n}\n\nexport function removeEventListener(type, fn, optionsOrCapture) {\n  if (!fn) {\n    return;\n  }\n  let wrapper = fn.__eventWrapper;\n  origRemoveEventListener.call(this, type, wrapper || fn, optionsOrCapture);\n  if (wrapper) {\n    fn.__eventWrapper = null;\n    this.__eventListenerCount--;\n    if (nonBubblingEventsToRetarget[type]) {\n      if (this.__handlers) {\n        if (this.__handlers[type]) {\n          let idx;\n          if (shouldCapture(optionsOrCapture)) {\n            idx = this.__handlers[type].capture.indexOf(wrapper);\n            if (idx > -1) {\n              this.__handlers[type].capture.splice(idx, 1);\n            }\n          } else {\n            idx = this.__handlers[type].bubble.indexOf(wrapper);\n            if (idx > -1) {\n              this.__handlers[type].bubble.splice(idx, 1);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nfor (let ev in nonBubblingEventsToRetarget) {\n  window.addEventListener(ev, function(e) {\n    if (!e.__target) {\n      e.__target = e.target;\n      e.__relatedTarget = e.relatedTarget;\n      utils.patchPrototype(e, EventMixin);\n      retargetNonBubblingEvent(e);\n      e.stopImmediatePropagation();\n    }\n  }, true);\n}\n\nexport let OriginalEvent = Event;\nexport let PatchedEvent = mixinComposedFlag(Event);\nexport let PatchedCustomEvent = mixinComposedFlag(CustomEvent);\nexport let PatchedMouseEvent = mixinComposedFlag(MouseEvent);","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/**\n * Patches elements that interacts with ShadyDOM\n * such that tree traversal and mutation apis act like they would under\n * ShadowDOM.\n *\n * This import enables seemless interaction with ShadyDOM powered\n * custom elements, enabling better interoperation with 3rd party code,\n * libraries, and frameworks that use DOM tree manipulation apis.\n */\n\n'use strict';\nimport * as utils from './utils'\nimport {ShadyRoot, flush, enqueue} from './shady'\nimport * as patch from './patch'\nimport {getRootNode} from './element-mixin'\nimport * as events from './event-mixin'\n\nwindow.ShadyDOM = {\n  patch: patch.patchNode,\n  isPatched: patch.isNodePatched,\n  unpatch: patch.unpatchNode,\n  isShadyRoot: utils.isShadyRoot,\n  enqueue: enqueue,\n  flush: flush,\n  inUse: utils.settings.inUse\n};\n\nif (utils.settings.inUse) {\n\n  let createRootAndEnsurePatched = function(node) {\n    // TODO(sorvell): need to ensure ancestors are patched but this introduces\n    // a timing problem with gathering composed children.\n    // (1) currently the child list is crawled and patched when patching occurs\n    // (this needs to change)\n    // (2) we can only patch when an element has received its parsed children\n    // because we cannot detect them when inserted by parser.\n    // let ancestor = node;\n    // while (ancestor) {\n    //   patchNode(ancestor);\n    //   ancestor = ancestor.parentNode || ancestor.host;\n    // }\n    patch.patchNode(node);\n    let root = new ShadyRoot(node);\n    patch.patchNode(root);\n    return root;\n  }\n\n  Element.prototype.attachShadow = function() {\n    return createRootAndEnsurePatched(this);\n  }\n\n  Node.prototype.addEventListener = events.addEventListener;\n  Node.prototype.removeEventListener = events.removeEventListener;\n  Event = events.PatchedEvent;\n  CustomEvent = events.PatchedCustomEvent;\n  MouseEvent = events.PatchedMouseEvent;\n\n  Object.defineProperty(Node.prototype, 'isConnected', {\n    get() {\n      return document.contains(this);\n    },\n    configurable: true\n  });\n\n  Node.prototype.getRootNode = function(options) {\n    return getRootNode(this, options);\n  }\n\n  // TODO(sorvell): super experimental auto patching of document fragment\n  // via appendChild. This either needs to be expanded or contracted.\n  // DocumentFragment.prototype.appendChild = function(node) {\n  //   patchNode(this);\n  //   return this.appendChild(node);\n  // }\n\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nExtremely simple css parser. Intended to be not more than what we need\nand definitely not necessarily correct =).\n*/\n\n'use strict';\n\n// given a string of css, return a simple rule tree\nexport function parse(text) {\n  text = clean(text);\n  return parseCss(lex(text), text);\n}\n\n// remove stuff we don't care about that may hinder parsing\nfunction clean(cssText) {\n  return cssText.replace(RX.comments, '').replace(RX.port, '');\n}\n\n// super simple {...} lexer that returns a node tree\nfunction lex(text) {\n  let root = {\n    start: 0,\n    end: text.length\n  };\n  let n = root;\n  for (let i = 0, l = text.length; i < l; i++) {\n    if (text[i] === OPEN_BRACE) {\n      if (!n.rules) {\n        n.rules = [];\n      }\n      let p = n;\n      let previous = p.rules[p.rules.length - 1];\n      n = {\n        start: i + 1,\n        parent: p,\n        previous: previous\n      };\n      p.rules.push(n);\n    } else if (text[i] === CLOSE_BRACE) {\n      n.end = i + 1;\n      n = n.parent || root;\n    }\n  }\n  return root;\n}\n\n// add selectors/cssText to node tree\nfunction parseCss(node, text) {\n  let t = text.substring(node.start, node.end - 1);\n  node.parsedCssText = node.cssText = t.trim();\n  if (node.parent) {\n    let ss = node.previous ? node.previous.end : node.parent.start;\n    t = text.substring(ss, node.start - 1);\n    t = _expandUnicodeEscapes(t);\n    t = t.replace(RX.multipleSpaces, ' ');\n    // TODO(sorvell): ad hoc; make selector include only after last ;\n    // helps with mixin syntax\n    t = t.substring(t.lastIndexOf(';') + 1);\n    let s = node.parsedSelector = node.selector = t.trim();\n    node.atRule = (s.indexOf(AT_START) === 0);\n    // note, support a subset of rule types...\n    if (node.atRule) {\n      if (s.indexOf(MEDIA_START) === 0) {\n        node.type = types.MEDIA_RULE;\n      } else if (s.match(RX.keyframesRule)) {\n        node.type = types.KEYFRAMES_RULE;\n        node.keyframesName =\n          node.selector.split(RX.multipleSpaces).pop();\n      }\n    } else {\n      if (s.indexOf(VAR_START) === 0) {\n        node.type = types.MIXIN_RULE;\n      } else {\n        node.type = types.STYLE_RULE;\n      }\n    }\n  }\n  let r$ = node.rules;\n  if (r$) {\n    for (let i = 0, l = r$.length, r;\n      (i < l) && (r = r$[i]); i++) {\n      parseCss(r, text);\n    }\n  }\n  return node;\n}\n\n// conversion of sort unicode escapes with spaces like `\\33 ` (and longer) into\n// expanded form that doesn't require trailing space `\\000033`\nfunction _expandUnicodeEscapes(s) {\n  return s.replace(/\\\\([0-9a-f]{1,6})\\s/gi, function() {\n    let code = arguments[1],\n      repeat = 6 - code.length;\n    while (repeat--) {\n      code = '0' + code;\n    }\n    return '\\\\' + code;\n  });\n}\n\n// stringify parsed css.\nexport function stringify(node, preserveProperties, text) {\n  text = text || '';\n  // calc rule cssText\n  let cssText = '';\n  if (node.cssText || node.rules) {\n    let r$ = node.rules;\n    if (r$ && !_hasMixinRules(r$)) {\n      for (let i = 0, l = r$.length, r;\n        (i < l) && (r = r$[i]); i++) {\n        cssText = stringify(r, preserveProperties, cssText);\n      }\n    } else {\n      cssText = preserveProperties ? node.cssText :\n        removeCustomProps(node.cssText);\n      cssText = cssText.trim();\n      if (cssText) {\n        cssText = '  ' + cssText + '\\n';\n      }\n    }\n  }\n  // emit rule if there is cssText\n  if (cssText) {\n    if (node.selector) {\n      text += node.selector + ' ' + OPEN_BRACE + '\\n';\n    }\n    text += cssText;\n    if (node.selector) {\n      text += CLOSE_BRACE + '\\n\\n';\n    }\n  }\n  return text;\n}\n\nfunction _hasMixinRules(rules) {\n  return rules[0].selector.indexOf(VAR_START) === 0;\n}\n\nfunction removeCustomProps(cssText) {\n  cssText = removeCustomPropAssignment(cssText);\n  return removeCustomPropApply(cssText);\n}\n\nexport function removeCustomPropAssignment(cssText) {\n  return cssText\n    .replace(RX.customProp, '')\n    .replace(RX.mixinProp, '');\n}\n\nfunction removeCustomPropApply(cssText) {\n  return cssText\n    .replace(RX.mixinApply, '')\n    .replace(RX.varApply, '');\n}\n\nexport let types = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7,\n  MEDIA_RULE: 4,\n  MIXIN_RULE: 1000\n}\n\nlet OPEN_BRACE = '{';\nlet CLOSE_BRACE = '}';\n\n// helper regexp's\nlet RX = {\n  comments: /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//gim,\n  port: /@import[^;]*;/gim,\n  customProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\\n]|$)/gim,\n  mixinProp: /(?:^[^;\\-\\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\\n]|$)?/gim,\n  mixinApply: /@apply\\s*\\(?[^);]*\\)?\\s*(?:[;\\n]|$)?/gim,\n  varApply: /[^;:]*?:[^;]*?var\\([^;]*\\)(?:[;\\n]|$)?/gim,\n  keyframesRule: /^@[^\\s]*keyframes/,\n  multipleSpaces: /\\s+/g\n}\n\nlet VAR_START = '--';\nlet MEDIA_START = '@media';\nlet AT_START = '@';\n\nif (window.WCT) {\n  window['CssParse'] = {\n    parse,\n    stringify,\n    types,\n    removeCustomPropAssignment\n  };\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport let nativeShadow = Boolean(!window.ShadyDOM || !window.ShadyDOM.inUse);\n\n// force shim support\nlet forceShimCssProperties = window.WebComponents && window.WebComponents.flags.shimcssproperties;\n\n// chrome 49 has semi-working css vars, check if box-shadow works\n// safari 9.1 has a recalc bug: https://bugs.webkit.org/show_bug.cgi?id=155782\nexport let nativeCssVariables = !forceShimCssProperties &&\n(!navigator.userAgent.match('AppleWebKit/601') &&\nwindow.CSS && CSS.supports && CSS.supports('box-shadow', '0 0 0 var(--foo)'));\n\n// experimental support for native @apply\nfunction detectNativeApply() {\n  let style = document.createElement('style');\n  style.textContent = '.foo { @apply --foo }';\n  document.head.appendChild(style);\n  let nativeCssApply = (style.sheet.cssRules[0].cssText.indexOf('apply') >= 0);\n  document.head.removeChild(style);\n  return nativeCssApply;\n}\n\nexport let nativeCssApply = false && detectNativeApply()\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {nativeShadow, nativeCssVariables} from './style-settings'\nimport {parse, stringify, types} from './css-parse'\n\nexport function toCssText (rules, callback) {\n  if (typeof rules === 'string') {\n    rules = parse(rules);\n  }\n  if (callback) {\n    forEachRule(rules, callback);\n  }\n  return stringify(rules, nativeCssVariables);\n}\n\nexport function rulesForStyle(style) {\n  if (!style.__cssRules && style.textContent) {\n    style.__cssRules = parse(style.textContent);\n  }\n  return style.__cssRules;\n}\n\n// Tests if a rule is a keyframes selector, which looks almost exactly\n// like a normal selector but is not (it has nothing to do with scoping\n// for example).\nexport function isKeyframesSelector(rule) {\n  return rule.parent &&\n  rule.parent.type === types.KEYFRAMES_RULE;\n}\n\nexport function forEachRule(node, styleRuleCallback, keyframesRuleCallback, onlyActiveRules) {\n  if (!node) {\n    return;\n  }\n  let skipRules = false;\n  if (onlyActiveRules) {\n    if (node.type === types.MEDIA_RULE) {\n      let matchMedia = node.selector.match(rx.MEDIA_MATCH);\n      if (matchMedia) {\n        // if rule is a non matching @media rule, skip subrules\n        if (!window.matchMedia(matchMedia[1]).matches) {\n          skipRules = true;\n        }\n      }\n    }\n  }\n  if (node.type === types.STYLE_RULE) {\n    styleRuleCallback(node);\n  } else if (keyframesRuleCallback &&\n    node.type === types.KEYFRAMES_RULE) {\n    keyframesRuleCallback(node);\n  } else if (node.type === types.MIXIN_RULE) {\n    skipRules = true;\n  }\n  let r$ = node.rules;\n  if (r$ && !skipRules) {\n    for (let i=0, l=r$.length, r; (i<l) && (r=r$[i]); i++) {\n      forEachRule(r, styleRuleCallback, keyframesRuleCallback, onlyActiveRules);\n    }\n  }\n}\n\n// add a string of cssText to the document.\nexport function applyCss(cssText, moniker, target, contextNode) {\n  let style = createScopeStyle(cssText, moniker);\n  return applyStyle(style, target, contextNode);\n}\n\nexport function applyStyle(style, target, contextNode) {\n  target = target || document.head;\n  let after = (contextNode && contextNode.nextSibling) ||\n  target.firstChild;\n  lastHeadApplyNode = style;\n  return target.insertBefore(style, after);\n}\n\nexport function createScopeStyle(cssText, moniker) {\n  let style = document.createElement('style');\n  if (moniker) {\n    style.setAttribute('scope', moniker);\n  }\n  style.textContent = cssText;\n  return style;\n}\n\nlet lastHeadApplyNode = null;\n\n// insert a comment node as a styling position placeholder.\nexport function applyStylePlaceHolder(moniker) {\n  let placeHolder = document.createComment(' Shady DOM styles for ' +\n    moniker + ' ');\n  let after = lastHeadApplyNode ?\n    lastHeadApplyNode.nextSibling : null;\n  let scope = document.head;\n  scope.insertBefore(placeHolder, after || scope.firstChild);\n  lastHeadApplyNode = placeHolder;\n  return placeHolder;\n}\n\nexport function isTargetedBuild(buildType) {\n  return nativeShadow ? buildType === 'shadow' : buildType === 'shady';\n}\n\n// cssBuildTypeForModule: function (module) {\n//   let dm = Polymer.DomModule.import(module);\n//   if (dm) {\n//     return getCssBuildType(dm);\n//   }\n// },\n//\nexport function getCssBuildType(element) {\n  return element.getAttribute('css-build');\n}\n\n// Walk from text[start] matching parens\n// returns position of the outer end paren\nfunction findMatchingParen(text, start) {\n  let level = 0;\n  for (let i=start, l=text.length; i < l; i++) {\n    if (text[i] === '(') {\n      level++;\n    } else if (text[i] === ')') {\n      if (--level === 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nexport function processVariableAndFallback(str, callback) {\n  // find 'var('\n  let start = str.indexOf('var(');\n  if (start === -1) {\n    // no var?, everything is prefix\n    return callback(str, '', '', '');\n  }\n  //${prefix}var(${inner})${suffix}\n  let end = findMatchingParen(str, start + 3);\n  let inner = str.substring(start + 4, end);\n  let prefix = str.substring(0, start);\n  // suffix may have other variables\n  let suffix = processVariableAndFallback(str.substring(end + 1), callback);\n  let comma = inner.indexOf(',');\n  // value and fallback args should be trimmed to match in property lookup\n  if (comma === -1) {\n    // variable, no fallback\n    return callback(prefix, inner.trim(), '', suffix);\n  }\n  // var(${value},${fallback})\n  let value = inner.substring(0, comma).trim();\n  let fallback = inner.substring(comma + 1).trim();\n  return callback(prefix, value, fallback, suffix);\n}\n\nexport let rx = {\n  VAR_ASSIGN: /(?:^|[;\\s{]\\s*)(--[\\w-]*?)\\s*:\\s*(?:([^;{]*)|{([^}]*)})(?:(?=[;\\s}])|$)/gi,\n  MIXIN_MATCH: /(?:^|\\W+)@apply\\s*\\(?([^);\\n]*)\\)?/gi,\n  VAR_CONSUMED: /(--[\\w-]+)\\s*([:,;)]|$)/gi,\n  ANIMATION_MATCH: /(animation\\s*:)|(animation-name\\s*:)/,\n  MEDIA_MATCH: /@media[^(]*(\\([^)]*\\))/,\n  IS_VAR: /^--/,\n  BRACKETED: /\\{[^}]*\\}/g,\n  HOST_PREFIX: '(?:^|[^.#[:])',\n  HOST_SUFFIX: '($|[.:[\\\\s>+~])'\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport * as StyleUtil from './style-util'\nimport {nativeShadow} from './style-settings'\n\n/* Transforms ShadowDOM styling into ShadyDOM styling\n\n* scoping:\n\n  * elements in scope get scoping selector class=\"x-foo-scope\"\n  * selectors re-written as follows:\n\n    div button -> div.x-foo-scope button.x-foo-scope\n\n* :host -> scopeName\n\n* :host(...) -> scopeName...\n\n* ::slotted(...) -> scopeName > ...\n\n*/\nexport let StyleTransformer = {\n\n  // Given a node and scope name, add a scoping class to each node\n  // in the tree. This facilitates transforming css into scoped rules.\n  dom: function(node, scope, shouldRemoveScope) {\n    // one time optimization to skip scoping...\n    if (node.__styleScoped) {\n      node.__styleScoped = null;\n    } else {\n      this._transformDom(node, scope || '', shouldRemoveScope);\n    }\n  },\n\n  _transformDom: function(node, selector, shouldRemoveScope) {\n    if (node.classList) {\n      this.element(node, selector, shouldRemoveScope);\n    }\n    let c$ = (node.localName === 'template') ?\n      (node.content || node._content).childNodes :\n      node.children;\n    if (c$) {\n      for (let i=0; i<c$.length; i++) {\n        this._transformDom(c$[i], selector, shouldRemoveScope);\n      }\n    }\n  },\n\n  element: function(element, scope, shouldRemoveScope) {\n    // note: if using classes, we add both the general 'style-scope' class\n    // as well as the specific scope. This enables easy filtering of all\n    // `style-scope` elements\n    if (scope) {\n      // note: svg on IE does not have classList so fallback to class\n      if (element.classList) {\n        if (shouldRemoveScope) {\n          element.classList.remove(SCOPE_NAME);\n          element.classList.remove(scope);\n        } else {\n          element.classList.add(SCOPE_NAME);\n          element.classList.add(scope);\n        }\n      } else if (element.getAttribute) {\n        let c = element.getAttribute(CLASS);\n        if (shouldRemoveScope) {\n          if (c) {\n            element.setAttribute(CLASS, c.replace(SCOPE_NAME, '')\n            .replace(scope, ''));\n          }\n        } else {\n          element.setAttribute(CLASS, (c ? c + ' ' : '') +\n          SCOPE_NAME + ' ' + scope);\n        }\n      }\n    }\n  },\n\n  elementStyles: function(element, styleRules, callback) {\n    let cssBuildType = element.__cssBuild;\n    // no need to shim selectors if settings.useNativeShadow, also\n    // a shady css build will already have transformed selectors\n    // NOTE: This method may be called as part of static or property shimming.\n    // When there is a targeted build it will not be called for static shimming,\n    // but when the property shim is used it is called and should opt out of\n    // static shimming work when a proper build exists.\n    let cssText = (nativeShadow || cssBuildType === 'shady') ?\n    StyleUtil.toCssText(styleRules, callback) :\n    this.css(styleRules, element.is, element.extends, callback) + '\\n\\n';\n    return cssText.trim();\n  },\n\n  // Given a string of cssText and a scoping string (scope), returns\n  // a string of scoped css where each selector is transformed to include\n  // a class created from the scope. ShadowDOM selectors are also transformed\n  // (e.g. :host) to use the scoping selector.\n  css: function(rules, scope, ext, callback) {\n    let hostScope = this._calcHostScope(scope, ext);\n    scope = this._calcElementScope(scope);\n    let self = this;\n    return StyleUtil.toCssText(rules, function(rule) {\n      if (!rule.isScoped) {\n        self.rule(rule, scope, hostScope);\n        rule.isScoped = true;\n      }\n      if (callback) {\n        callback(rule, scope, hostScope);\n      }\n    });\n  },\n\n  _calcElementScope: function (scope) {\n    if (scope) {\n      return CSS_CLASS_PREFIX + scope;\n    } else {\n      return '';\n    }\n  },\n\n  _calcHostScope: function(scope, ext) {\n    return ext ? '[is=' +  scope + ']' : scope;\n  },\n\n  rule: function (rule, scope, hostScope) {\n    this._transformRule(rule, this._transformComplexSelector,\n      scope, hostScope);\n  },\n\n  // transforms a css rule to a scoped rule.\n  _transformRule: function(rule, transformer, scope, hostScope) {\n    // NOTE: save transformedSelector for subsequent matching of elements\n    // against selectors (e.g. when calculating style properties)\n    rule.selector = rule.transformedSelector =\n      this._transformRuleCss(rule, transformer, scope, hostScope);\n  },\n\n  _transformRuleCss: function(rule, transformer, scope, hostScope) {\n    let p$ = rule.selector.split(COMPLEX_SELECTOR_SEP);\n    // we want to skip transformation of rules that appear in keyframes,\n    // because they are keyframe selectors, not element selectors.\n    if (!StyleUtil.isKeyframesSelector(rule)) {\n      for (let i=0, l=p$.length, p; (i<l) && (p=p$[i]); i++) {\n        p$[i] = transformer.call(this, p, scope, hostScope);\n      }\n    }\n    return p$.join(COMPLEX_SELECTOR_SEP);\n  },\n\n  _transformComplexSelector: function(selector, scope, hostScope) {\n    let stop = false;\n    selector = selector.trim();\n    selector = selector.replace(SIMPLE_SELECTOR_SEP, (m, c, s) => {\n      if (!stop) {\n        let info = this._transformCompoundSelector(s, c, scope, hostScope);\n        stop = stop || info.stop;\n        c = info.combinator;\n        s = info.value;\n      }\n      return c + s;\n    });\n    return selector;\n  },\n\n  _transformCompoundSelector: function(selector, combinator, scope, hostScope) {\n    // replace :host with host scoping class\n    let slottedIndex = selector.indexOf(SLOTTED);\n    if (selector.indexOf(HOST) >=0) {\n      selector = this._transformHostSelector(selector, hostScope);\n    // replace other selectors with scoping class\n    } else if (slottedIndex !== 0){\n      selector = scope ? this._transformSimpleSelector(selector, scope) :\n        selector;\n    }\n    // mark ::slotted() scope jump to replace with descendant selector + arg\n    // also ignore left-side combinator\n    let slotted = false;\n    if (slottedIndex >= 0) {\n      combinator = '';\n      slotted = true;\n    }\n    // process scope jumping selectors up to the scope jump and then stop\n    let stop;\n    if (slotted) {\n      stop = true;\n      if (slotted) {\n        // .zonk ::slotted(.foo) -> .zonk.scope > .foo\n        selector = selector.replace(SLOTTED_PAREN, (m, paren) => ` > ${paren}`);\n      }\n    }\n    return {value: selector, combinator, stop};\n  },\n\n  _transformSimpleSelector: function(selector, scope) {\n    let p$ = selector.split(PSEUDO_PREFIX);\n    p$[0] += scope;\n    return p$.join(PSEUDO_PREFIX);\n  },\n\n  // :host(...) -> scopeName...\n  _transformHostSelector: function(selector, hostScope) {\n    let m = selector.match(HOST_PAREN);\n    let paren = m && m[2].trim() || '';\n    if (paren) {\n      if (!paren[0].match(SIMPLE_SELECTOR_PREFIX)) {\n        // paren starts with a type selector\n        let typeSelector = paren.split(SIMPLE_SELECTOR_PREFIX)[0];\n        // if the type selector is our hostScope then avoid pre-pending it\n        if (typeSelector === hostScope) {\n          return paren;\n        // otherwise, this selector should not match in this scope so\n        // output a bogus selector.\n        } else {\n          return SELECTOR_NO_MATCH;\n        }\n      } else {\n        // make sure to do a replace here to catch selectors like:\n        // `:host(.foo)::before`\n        return selector.replace(HOST_PAREN, function(m, host, paren) {\n          return hostScope + paren;\n        });\n      }\n    // if no paren, do a straight :host replacement.\n    // TODO(sorvell): this should not strictly be necessary but\n    // it's needed to maintain support for `:host[foo]` type selectors\n    // which have been improperly used under Shady DOM. This should be\n    // deprecated.\n    } else {\n      return selector.replace(HOST, hostScope);\n    }\n  },\n\n  documentRule: function(rule) {\n    // reset selector in case this is redone.\n    rule.selector = rule.parsedSelector;\n    this.normalizeRootSelector(rule);\n    this._transformRule(rule, this._transformDocumentSelector);\n  },\n\n  normalizeRootSelector: function(rule) {\n    if (rule.selector === ROOT) {\n      rule.selector = 'html';\n    }\n  },\n\n  _transformDocumentSelector: function(selector) {\n    return selector.match(SLOTTED) ?\n      this._transformComplexSelector(selector, SCOPE_DOC_SELECTOR) :\n      this._transformSimpleSelector(selector.trim(), SCOPE_DOC_SELECTOR);\n  },\n\n  SCOPE_NAME: 'style-scope'\n};\n\nlet SCOPE_NAME = StyleTransformer.SCOPE_NAME;\nlet SCOPE_DOC_SELECTOR = ':not([' + SCOPE_NAME + '])' +\n  ':not(.' + SCOPE_NAME + ')';\nlet COMPLEX_SELECTOR_SEP = ',';\nlet SIMPLE_SELECTOR_SEP = /(^|[\\s>+~]+)((?:\\[.+?\\]|[^\\s>+~=\\[])+)/g;\nlet SIMPLE_SELECTOR_PREFIX = /[[.:#*]/;\nlet HOST = ':host';\nlet ROOT = ':root';\nlet SLOTTED = '::slotted';\n// NOTE: this supports 1 nested () pair for things like\n// :host(:not([selected]), more general support requires\n// parsing which seems like overkill\nlet HOST_PAREN = /(:host)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\n// similar to HOST_PAREN\nlet SLOTTED_PAREN = /(?:::slotted)(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))/;\nlet CSS_CLASS_PREFIX = '.';\nlet PSEUDO_PREFIX = ':';\nlet CLASS = 'class';\nlet SELECTOR_NO_MATCH = 'should_not_match';\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport default class StyleInfo {\n  static get(node) {\n    return node.__styleInfo;\n  }\n  static set(node, styleInfo) {\n    node.__styleInfo = styleInfo;\n    return styleInfo;\n  }\n  constructor(ast, placeholder, ownStylePropertyNames, elementName, typeExtension, cssBuild) {\n    this.styleRules = ast || null;\n    this.placeholder = placeholder || null;\n    this.ownStylePropertyNames = ownStylePropertyNames || [];\n    this.overrideStyleProperties = {};\n    this.elementName = elementName || '';\n    this.cssBuild = cssBuild || '';\n    this.typeExtension = typeExtension || '';\n    this.notStyleScopeCacheable = false;\n    this.styleProperties = null;\n    this.ownStyleProperties = null;\n    this.scopeSelector = null;\n    this.customStyle = null;\n  }\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {removeCustomPropAssignment} from './css-parse'\nimport {nativeShadow} from './style-settings'\nimport {StyleTransformer} from './style-transformer'\nimport * as StyleUtil from './style-util'\nimport StyleInfo from './style-info'\n\n// TODO: dedupe with shady\nlet p = window.Element.prototype;\nlet matchesSelector = p.matches || p.matchesSelector ||\n  p.mozMatchesSelector || p.msMatchesSelector ||\n  p.oMatchesSelector || p.webkitMatchesSelector;\n\nlet IS_IE = navigator.userAgent.match('Trident');\n\nexport let StyleProperties = {\n\n  // decorates styles with rule info and returns an array of used style\n  // property names\n  decorateStyles: function(rules, scope) {\n    let self = this, props = {}, keyframes = [], ruleIndex = 0;\n    let scopeSelector = StyleTransformer._calcHostScope(scope.is, scope.extends);\n    let cssBuild = rules.__cssBuild;\n    let styleInfo = StyleInfo.get(scope);\n    StyleUtil.forEachRule(rules, function(rule) {\n      self.decorateRule(rule);\n      // mark in-order position of ast rule in styles block, used for cache key\n      rule.index = ruleIndex++;\n      self.whenHostOrRootRule(scope, rule, cssBuild, function(info) {\n        // we can't cache styles with :host and :root props in @media rules\n        if (rule.parent.type === StyleUtil.ruleTypes.MEDIA_RULE) {\n          styleInfo.notStyleScopeCacheable = true;\n        }\n        if (info.isHost) {\n          // check if the selector is in the form of `:host-context()` or `:host()`\n          // if so, this style is not cacheable\n          let hostContextOrFunction = info.selector.split(' ').some(function(s) {\n            return s.indexOf(scopeSelector) === 0 && s.length !== scopeSelector.length;\n          });\n          styleInfo.notStyleScopeCacheable = styleInfo.notStyleScopeCacheable || hostContextOrFunction;\n        }\n      });\n      self.collectPropertiesInCssText(rule.propertyInfo.cssText, props);\n    }, function onKeyframesRule(rule) {\n      keyframes.push(rule);\n    });\n    // Cache all found keyframes rules for later reference:\n    rules._keyframes = keyframes;\n    // return this list of property names *consumes* in these styles.\n    let names = [];\n    for (let i in props) {\n      names.push(i);\n    }\n    return names;\n  },\n\n  // decorate a single rule with property info\n  decorateRule: function(rule) {\n    if (rule.propertyInfo) {\n      return rule.propertyInfo;\n    }\n    let info = {}, properties = {};\n    let hasProperties = this.collectProperties(rule, properties);\n    if (hasProperties) {\n      info.properties = properties;\n      // TODO(sorvell): workaround parser seeing mixins as additional rules\n      rule.rules = null;\n    }\n    info.cssText = this.collectCssText(rule);\n    rule.propertyInfo = info;\n    return info;\n  },\n\n  // collects the custom properties from a rule's cssText\n  collectProperties: function(rule, properties) {\n    let info = rule.propertyInfo;\n    if (info) {\n      if (info.properties) {\n        Object.assign(properties, info.properties);\n        return true;\n      }\n    } else {\n      let m, rx = this.rx.VAR_ASSIGN;\n      let cssText = rule.parsedCssText;\n      let value;\n      let any;\n      while ((m = rx.exec(cssText))) {\n        // note: group 2 is var, 3 is mixin\n        value = (m[2] || m[3]).trim();\n        // value of 'inherit' or 'unset' is equivalent to not setting the property here\n        if (value !== 'inherit' || value !== 'unset') {\n          properties[m[1].trim()] = value;\n        }\n        any = true;\n      }\n      return any;\n    }\n\n  },\n\n  // returns cssText of properties that consume variables/mixins\n  collectCssText: function(rule) {\n    return this.collectConsumingCssText(rule.parsedCssText);\n  },\n\n  // NOTE: we support consumption inside mixin assignment\n  // but not production, so strip out {...}\n  collectConsumingCssText: function(cssText) {\n    return cssText.replace(this.rx.BRACKETED, '')\n      .replace(this.rx.VAR_ASSIGN, '');\n  },\n\n  collectPropertiesInCssText: function(cssText, props) {\n    let m;\n    while ((m = this.rx.VAR_CONSUMED.exec(cssText))) {\n      let name = m[1];\n      // This regex catches all variable names, and following non-whitespace char\n      // If next char is not ':', then variable is a consumer\n      if (m[2] !== ':') {\n        props[name] = true;\n      }\n    }\n  },\n\n  // turns custom properties into realized values.\n  reify: function(props) {\n    // big perf optimization here: reify only *own* properties\n    // since this object has __proto__ of the element's scope properties\n    let names = Object.getOwnPropertyNames(props);\n    for (let i=0, n; i < names.length; i++) {\n      n = names[i];\n      props[n] = this.valueForProperty(props[n], props);\n    }\n  },\n\n  // given a property value, returns the reified value\n  // a property value may be:\n  // (1) a literal value like: red or 5px;\n  // (2) a variable value like: var(--a), var(--a, red), or var(--a, --b) or\n  // var(--a, var(--b));\n  // (3) a literal mixin value like { properties }. Each of these properties\n  // can have values that are: (a) literal, (b) variables, (c) @apply mixins.\n  valueForProperty: function(property, props) {\n    // case (1) default\n    // case (3) defines a mixin and we have to reify the internals\n    if (property) {\n      if (property.indexOf(';') >=0) {\n        property = this.valueForProperties(property, props);\n      } else {\n        // case (2) variable\n        let self = this;\n        let fn = function(prefix, value, fallback, suffix) {\n          if (!value) {\n            return prefix + suffix;\n          }\n          let propertyValue = self.valueForProperty(props[value], props);\n          // if value is \"initial\", then the variable should be treated as unset\n          if (!propertyValue || propertyValue === 'initial') {\n            // fallback may be --a or var(--a) or literal\n            propertyValue = self.valueForProperty(props[fallback] || fallback, props) ||\n            fallback || 'unset';\n          } else if (propertyValue === 'apply-shim-inherit') {\n            // CSS build will replace `inherit` with `apply-shim-inherit`\n            // for use with native css variables.\n            // Since we have full control, we can use `inherit` directly.\n            propertyValue = 'inherit';\n          }\n          return prefix + (propertyValue || '') + suffix;\n        };\n        property = StyleUtil.processVariableAndFallback(property, fn);\n      }\n    }\n    return property && property.trim() || '';\n  },\n\n  // note: we do not yet support mixin within mixin\n  valueForProperties: function(property, props) {\n    let parts = property.split(';');\n    for (let i=0, p, m; i<parts.length; i++) {\n      if ((p = parts[i])) {\n        this.rx.MIXIN_MATCH.lastIndex = 0;\n        m = this.rx.MIXIN_MATCH.exec(p);\n        if (m) {\n          p = this.valueForProperty(props[m[1]], props);\n        } else {\n          let colon = p.indexOf(':');\n          if (colon !== -1) {\n            let pp = p.substring(colon);\n            pp = pp.trim();\n            pp = this.valueForProperty(pp, props) || pp;\n            p = p.substring(0, colon) + pp;\n          }\n        }\n        parts[i] = (p && p.lastIndexOf(';') === p.length - 1) ?\n          // strip trailing ;\n          p.slice(0, -1) :\n          p || '';\n      }\n    }\n    return parts.join(';');\n  },\n\n  applyProperties: function(rule, props) {\n    let output = '';\n    // dynamically added sheets may not be decorated so ensure they are.\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (rule.propertyInfo.cssText) {\n      output = this.valueForProperties(rule.propertyInfo.cssText, props);\n    }\n    rule.cssText = output;\n  },\n\n  // Apply keyframe transformations to the cssText of a given rule. The\n  // keyframeTransforms object is a map of keyframe names to transformer\n  // functions which take in cssText and spit out transformed cssText.\n  applyKeyframeTransforms: function(rule, keyframeTransforms) {\n    let input = rule.cssText;\n    let output = rule.cssText;\n    if (rule.hasAnimations == null) {\n      // Cache whether or not the rule has any animations to begin with:\n      rule.hasAnimations = this.rx.ANIMATION_MATCH.test(input);\n    }\n    // If there are no animations referenced, we can skip transforms:\n    if (rule.hasAnimations) {\n      let transform;\n      // If we haven't transformed this rule before, we iterate over all\n      // transforms:\n      if (rule.keyframeNamesToTransform == null) {\n        rule.keyframeNamesToTransform = [];\n        for (let keyframe in keyframeTransforms) {\n          transform = keyframeTransforms[keyframe];\n          output = transform(input);\n          // If the transform actually changed the CSS text, we cache the\n          // transform name for future use:\n          if (input !== output) {\n            input = output;\n            rule.keyframeNamesToTransform.push(keyframe);\n          }\n        }\n      } else {\n        // If we already have a list of keyframe names that apply to this\n        // rule, we apply only those keyframe name transforms:\n        for (let i = 0; i < rule.keyframeNamesToTransform.length; ++i) {\n          transform = keyframeTransforms[rule.keyframeNamesToTransform[i]];\n          input = transform(input);\n        }\n        output = input;\n      }\n    }\n    rule.cssText = output;\n  },\n\n  // Test if the rules in these styles matches the given `element` and if so,\n  // collect any custom properties into `props`.\n  propertyDataFromStyles: function(rules, element) {\n    let props = {}, self = this;\n    // generates a unique key for these matches\n    let o = [];\n    // note: active rules excludes non-matching @media rules\n    StyleUtil.forEachRule(rules, function(rule) {\n      // TODO(sorvell): we could trim the set of rules at declaration\n      // time to only include ones that have properties\n      if (!rule.propertyInfo) {\n        self.decorateRule(rule);\n      }\n      // match element against transformedSelector: selector may contain\n      // unwanted uniquification and parsedSelector does not directly match\n      // for :host selectors.\n      let selectorToMatch = rule.transformedSelector || rule.parsedSelector;\n      if (element && rule.propertyInfo.properties && selectorToMatch) {\n        if (matchesSelector.call(element, selectorToMatch)) {\n          self.collectProperties(rule, props);\n          // produce numeric key for these matches for lookup\n          addToBitMask(rule.index, o);\n        }\n      }\n    }, null, true);\n    return {properties: props, key: o};\n  },\n\n  whenHostOrRootRule: function(scope, rule, cssBuild, callback) {\n    if (!rule.propertyInfo) {\n      this.decorateRule(rule);\n    }\n    if (!rule.propertyInfo.properties) {\n      return;\n    }\n    let hostScope = scope.is ?\n    StyleTransformer._calcHostScope(scope.is, scope.extends) :\n    'html';\n    let parsedSelector = rule.parsedSelector;\n    let isRoot = (parsedSelector === ':host > *' || parsedSelector === 'html');\n    let isHost = parsedSelector.indexOf(':host') === 0 && !isRoot;\n    // build info is either in scope (when scope is an element) or in the style\n    // when scope is the default scope; note: this allows default scope to have\n    // mixed mode built and unbuilt styles.\n    if (cssBuild === 'shady') {\n      // :root -> x-foo > *.x-foo for elements and html for custom-style\n      isRoot = parsedSelector === (hostScope + ' > *.' + hostScope) || parsedSelector.indexOf('html') !== -1;\n      // :host -> x-foo for elements, but sub-rules have .x-foo in them\n      isHost = !isRoot && parsedSelector.indexOf(hostScope) === 0;\n    }\n    if (cssBuild === 'shadow') {\n      isRoot = parsedSelector === ':host > *' || parsedSelector === 'html';\n      isHost = isHost && !isRoot;\n    }\n    if (!isRoot && !isHost) {\n      return;\n    }\n    let selectorToMatch = hostScope;\n    if (isHost) {\n      // need to transform :host under ShadowDOM because `:host` does not work with `matches`\n      if (nativeShadow && !rule.transformedSelector) {\n        // transform :host into a matchable selector\n        rule.transformedSelector =\n        StyleTransformer._transformRuleCss(\n          rule,\n          StyleTransformer._transformComplexSelector,\n          StyleTransformer._calcElementScope(scope.is),\n          hostScope\n        );\n      }\n      selectorToMatch = rule.transformedSelector || hostScope;\n    }\n    callback({\n      selector: selectorToMatch,\n      isHost: isHost,\n      isRoot: isRoot\n    });\n  },\n\n  hostAndRootPropertiesForScope: function(scope, rules) {\n    let hostProps = {}, rootProps = {}, self = this;\n    // note: active rules excludes non-matching @media rules\n    let cssBuild = rules && rules.__cssBuild;\n    StyleUtil.forEachRule(rules, function(rule) {\n      // if scope is StyleDefaults, use _element for matchesSelector\n      self.whenHostOrRootRule(scope, rule, cssBuild, function(info) {\n        let element = scope._element || scope;\n        if (matchesSelector.call(element, info.selector)) {\n          if (info.isHost) {\n            self.collectProperties(rule, hostProps);\n          } else {\n            self.collectProperties(rule, rootProps);\n          }\n        }\n      });\n    }, null, true);\n    return {rootProps: rootProps, hostProps: hostProps};\n  },\n\n  transformStyles: function(element, properties, scopeSelector) {\n    let self = this;\n    let hostSelector = StyleTransformer\n      ._calcHostScope(element.is, element.extends);\n    let rxHostSelector = element.extends ?\n      '\\\\' + hostSelector.slice(0, -1) + '\\\\]' :\n      hostSelector;\n    let hostRx = new RegExp(this.rx.HOST_PREFIX + rxHostSelector +\n      this.rx.HOST_SUFFIX);\n    let rules = StyleInfo.get(element).styleRules;\n    let keyframeTransforms =\n      this._elementKeyframeTransforms(element, rules, scopeSelector);\n    return StyleTransformer.elementStyles(element, rules, function(rule) {\n      self.applyProperties(rule, properties);\n      if (!nativeShadow &&\n          !StyleUtil.isKeyframesSelector(rule) &&\n          rule.cssText) {\n        // NOTE: keyframe transforms only scope munge animation names, so it\n        // is not necessary to apply them in ShadowDOM.\n        self.applyKeyframeTransforms(rule, keyframeTransforms);\n        self._scopeSelector(rule, hostRx, hostSelector, scopeSelector);\n      }\n    });\n  },\n\n  _elementKeyframeTransforms: function(element, rules, scopeSelector) {\n    let keyframesRules = rules._keyframes;\n    let keyframeTransforms = {};\n    if (!nativeShadow && keyframesRules) {\n      // For non-ShadowDOM, we transform all known keyframes rules in\n      // advance for the current scope. This allows us to catch keyframes\n      // rules that appear anywhere in the stylesheet:\n      for (let i = 0, keyframesRule = keyframesRules[i];\n           i < keyframesRules.length;\n           keyframesRule = keyframesRules[++i]) {\n        this._scopeKeyframes(keyframesRule, scopeSelector);\n        keyframeTransforms[keyframesRule.keyframesName] =\n            this._keyframesRuleTransformer(keyframesRule);\n      }\n    }\n    return keyframeTransforms;\n  },\n\n  // Generate a factory for transforming a chunk of CSS text to handle a\n  // particular scoped keyframes rule.\n  _keyframesRuleTransformer: function(keyframesRule) {\n    return function(cssText) {\n      return cssText.replace(\n          keyframesRule.keyframesNameRx,\n          keyframesRule.transformedKeyframesName);\n    };\n  },\n\n  // Transforms `@keyframes` names to be unique for the current host.\n  // Example: @keyframes foo-anim -> @keyframes foo-anim-x-foo-0\n  _scopeKeyframes: function(rule, scopeId) {\n    rule.keyframesNameRx = new RegExp(rule.keyframesName, 'g');\n    rule.transformedKeyframesName = rule.keyframesName + '-' + scopeId;\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    rule.selector = rule.transformedSelector.replace(\n        rule.keyframesName, rule.transformedKeyframesName);\n  },\n\n  // Strategy: x scope shim a selector e.g. to scope `.x-foo-42` (via classes):\n  // non-host selector: .a.x-foo -> .x-foo-42 .a.x-foo\n  // host selector: x-foo.wide -> .x-foo-42.wide\n  // note: we use only the scope class (.x-foo-42) and not the hostSelector\n  // (x-foo) to scope :host rules; this helps make property host rules\n  // have low specificity. They are overrideable by class selectors but,\n  // unfortunately, not by type selectors (e.g. overriding via\n  // `.special` is ok, but not by `x-foo`).\n  _scopeSelector: function(rule, hostRx, hostSelector, scopeId) {\n    rule.transformedSelector = rule.transformedSelector || rule.selector;\n    let selector = rule.transformedSelector;\n    let scope = '.' + scopeId;\n    let parts = selector.split(',');\n    for (let i=0, l=parts.length, p; (i<l) && (p=parts[i]); i++) {\n      parts[i] = p.match(hostRx) ?\n        p.replace(hostSelector, scope) :\n        scope + ' ' + p;\n    }\n    rule.selector = parts.join(',');\n  },\n\n  applyElementScopeSelector: function(element, selector, old) {\n    let c = element.getAttribute('class') || '';\n    let v = old ? c.replace(old, selector) :\n      (c ? c + ' ' : '') + this.XSCOPE_NAME + ' ' + selector;\n    if (c !== v) {\n      element.setAttribute('class', v);\n    }\n  },\n\n  applyElementStyle: function(element, properties, selector, style) {\n    // calculate cssText to apply\n    let cssText = style ? style.textContent || '' :\n      this.transformStyles(element, properties, selector);\n    // if shady and we have a cached style that is not style, decrement\n    let styleInfo = StyleInfo.get(element);\n    let s = styleInfo.customStyle;\n    if (s && !nativeShadow && (s !== style)) {\n      s._useCount--;\n      if (s._useCount <= 0 && s.parentNode) {\n        s.parentNode.removeChild(s);\n      }\n    }\n    // apply styling always under native or if we generated style\n    // or the cached style is not in document(!)\n    if (nativeShadow) {\n      // update existing style only under native\n      if (styleInfo.customStyle) {\n        styleInfo.customStyle.textContent = cssText;\n        style = styleInfo.customStyle;\n      // otherwise, if we have css to apply, do so\n      } else if (cssText) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        style = StyleUtil.applyCss(cssText, selector, element.shadowRoot,\n          styleInfo.placeholder);\n      }\n    } else {\n      // shady and no cache hit\n      if (!style) {\n        // apply css after the scope style of the element to help with\n        // style precedence rules.\n        if (cssText) {\n          style = StyleUtil.applyCss(cssText, selector, null,\n            styleInfo.placeholder);\n        }\n      // shady and cache hit but not in document\n      } else if (!style.parentNode) {\n        StyleUtil.applyStyle(style, null, styleInfo.placeholder);\n      }\n\n    }\n    // ensure this style is our custom style and increment its use count.\n    if (style) {\n      style._useCount = style._useCount || 0;\n      // increment use count if we changed styles\n      if (styleInfo.customStyle != style) {\n        style._useCount++;\n      }\n      styleInfo.customStyle = style;\n    }\n    // @media rules may be stale in IE 10 and 11\n    if (IS_IE) {\n      style.textContent = style.textContent;\n    }\n    return style;\n  },\n\n  applyCustomStyle: function(style, properties) {\n    let rules = StyleUtil.rulesForStyle(style);\n    let self = this;\n    style.textContent = StyleUtil.toCssText(rules, function(rule) {\n      let css = rule.cssText = rule.parsedCssText;\n      if (rule.propertyInfo && rule.propertyInfo.cssText) {\n        // remove property assignments\n        // so next function isn't confused\n        // NOTE: we have 3 categories of css:\n        // (1) normal properties,\n        // (2) custom property assignments (--foo: red;),\n        // (3) custom property usage: border: var(--foo); @apply(--foo);\n        // In elements, 1 and 3 are separated for efficiency; here they\n        // are not and this makes this case unique.\n        css = removeCustomPropAssignment(css);\n        // replace with reified properties, scenario is same as mixin\n        rule.cssText = self.valueForProperties(css, properties);\n      }\n    });\n  },\n\n  rx: StyleUtil.rx,\n  XSCOPE_NAME: 'x-scope'\n};\n\nfunction addToBitMask(n, bits) {\n  let o = parseInt(n / 32);\n  let v = 1 << (n % 32);\n  bits[o] = (bits[o] || 0) | v;\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nexport let templateMap = {};\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {applyStylePlaceHolder} from './style-util'\nimport {nativeShadow} from './style-settings'\n\nexport let placeholderMap = {};\n\nconst ce = window.customElements;\nif (ce && !nativeShadow) {\n  const origDefine = ce.define;\n  ce.define = function(name, ...args) {\n    placeholderMap[name] = applyStylePlaceHolder(name);\n    return origDefine.call(ce, name, ...args);\n  };\n}\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * The apply shim simulates the behavior of `@apply` proposed at\n * https://tabatkins.github.io/specs/css-apply-rule/.\n * The approach is to convert a property like this:\n *\n *    --foo: {color: red; background: blue;}\n *\n * to this:\n *\n *    --foo_-_color: red;\n *    --foo_-_background: blue;\n *\n * Then where `@apply --foo` is used, that is converted to:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background);\n *\n * This approach generally works but there are some issues and limitations.\n * Consider, for example, that somewhere *between* where `--foo` is set and used,\n * another element sets it to:\n *\n *    --foo: { border: 2px solid red; }\n *\n * We must now ensure that the color and background from the previous setting\n * do not apply. This is accomplished by changing the property set to this:\n *\n *    --foo_-_border: 2px solid red;\n *    --foo_-_color: initial;\n *    --foo_-_background: initial;\n *\n * This works but introduces one new issue.\n * Consider this setup at the point where the `@apply` is used:\n *\n *    background: orange;\n *    @apply --foo;\n *\n * In this case the background will be unset (initial) rather than the desired\n * `orange`. We address this by altering the property set to use a fallback\n * value like this:\n *\n *    color: var(--foo_-_color);\n *    background: var(--foo_-_background, orange);\n *    border: var(--foo_-_border);\n *\n * Note that the default is retained in the property set and the `background` is\n * the desired `orange`. This leads us to a limitation.\n *\n * Limitation 1:\n\n * Only properties in the rule where the `@apply`\n * is used are considered as default values.\n * If another rule matches the element and sets `background` with\n * less specificity than the rule in which `@apply` appears,\n * the `background` will not be set.\n *\n * Limitation 2:\n *\n * When using Polymer's `updateStyles` api, new properties may not be set for\n * `@apply` properties.\n\n*/\n\n'use strict';\n\nimport {rx, forEachRule, processVariableAndFallback, rulesForStyle} from './style-util'\nimport {templateMap} from './template-map'\n\nlet MIXIN_MATCH = rx.MIXIN_MATCH;\nlet VAR_ASSIGN = rx.VAR_ASSIGN;\n\nlet APPLY_NAME_CLEAN = /;\\s*/m;\nlet INITIAL_INHERIT = /^\\s*(initial)|(inherit)\\s*$/;\n\n// separator used between mixin-name and mixin-property-name when producing properties\n// NOTE: plain '-' may cause collisions in user styles\nlet MIXIN_VAR_SEP = '_-_';\n\n// map of mixin to property names\n// --foo: {border: 2px} -> {properties: {(--foo, ['border'])}, dependants: {'element-name': proto}}\nclass MixinMap {\n  constructor() {\n    this._map = {};\n  }\n  set(name, props) {\n    name = name.trim();\n    this._map[name] = {\n      properties: props,\n      dependants: {}\n    }\n  }\n  get(name) {\n    name = name.trim();\n    return this._map[name];\n  }\n}\n\nclass ApplyShim {\n  constructor() {\n    this._currentTemplate = null;\n    this._measureElement = null;\n    this._map = new MixinMap();\n    this._separator = MIXIN_VAR_SEP;\n    this._boundProduceCssProperties = (\n      matchText, propertyName, valueProperty, valueMixin) =>\n        this._produceCssProperties(\n          matchText, propertyName, valueProperty, valueMixin);\n  }\n  transformStyle(style, elementName) {\n    let ast = rulesForStyle(style);\n    this.transformRules(ast, elementName);\n    return ast;\n  }\n  transformRules(rules, elementName) {\n    this._currentTemplate = templateMap[elementName];\n    forEachRule(rules, (r) => { this.transformRule(r); });\n    if (this._currentTemplate) {\n      this._currentTemplate.__applyShimInvalid = false;\n    }\n    this._currentTemplate = null;\n  }\n  transformRule(rule) {\n    rule.cssText = this.transformCssText(rule.parsedCssText);\n    // :root was only used for variable assignment in property shim,\n    // but generates invalid selectors with real properties.\n    // replace with `:host > *`, which serves the same effect\n    if (rule.selector === ':root') {\n      rule.selector = ':host > *';\n    }\n  }\n  transformCssText(cssText) {\n    // produce variables\n    cssText = cssText.replace(VAR_ASSIGN, this._boundProduceCssProperties);\n    // consume mixins\n    return this._consumeCssProperties(cssText);\n  }\n  _getInitialValueForProperty(property) {\n    if (!this._measureElement) {\n      this._measureElement = document.createElement('meta');\n      this._measureElement.style.all = 'initial';\n      document.head.appendChild(this._measureElement);\n    }\n    return window.getComputedStyle(this._measureElement).getPropertyValue(property);\n  }\n  // replace mixin consumption with variable consumption\n  _consumeCssProperties(text) {\n    let m;\n    // loop over text until all mixins with defintions have been applied\n    while((m = MIXIN_MATCH.exec(text))) {\n      let matchText = m[0];\n      let mixinName = m[1];\n      let idx = m.index;\n      // collect properties before apply to be \"defaults\" if mixin might override them\n      // match includes a \"prefix\", so find the start and end positions of @apply\n      let applyPos = idx + matchText.indexOf('@apply');\n      let afterApplyPos = idx + matchText.length;\n      // find props defined before this @apply\n      let textBeforeApply = text.slice(0, applyPos);\n      let textAfterApply = text.slice(afterApplyPos);\n      let defaults = this._cssTextToMap(textBeforeApply);\n      let replacement = this._atApplyToCssProperties(mixinName, defaults);\n      // use regex match position to replace mixin, keep linear processing time\n      text = [textBeforeApply, replacement, textAfterApply].join('');\n      // move regex search to _after_ replacement\n      MIXIN_MATCH.lastIndex = idx + replacement.length;\n    }\n    return text;\n  }\n  // produce variable consumption at the site of mixin consumption\n  // @apply --foo; -> for all props (${propname}: var(--foo_-_${propname}, ${fallback[propname]}}))\n  // Example:\n  // border: var(--foo_-_border); padding: var(--foo_-_padding, 2px)\n  _atApplyToCssProperties(mixinName, fallbacks) {\n    mixinName = mixinName.replace(APPLY_NAME_CLEAN, '');\n    let vars = [];\n    let mixinEntry = this._map.get(mixinName);\n    // if we depend on a mixin before it is created\n    // make a sentinel entry in the map to add this element as a dependency for when it is defined.\n    if (!mixinEntry) {\n      this._map.set(mixinName, {});\n      mixinEntry = this._map.get(mixinName);\n    }\n    if (mixinEntry) {\n      if (this._currentTemplate) {\n        mixinEntry.dependants[this._currentTemplate.name] = this._currentTemplate;\n      }\n      let p, parts, f;\n      for (p in mixinEntry.properties) {\n        f = fallbacks && fallbacks[p];\n        parts = [p, ': var(', mixinName, MIXIN_VAR_SEP, p];\n        if (f) {\n          parts.push(',', f);\n        }\n        parts.push(')');\n        vars.push(parts.join(''));\n      }\n    }\n    return vars.join('; ');\n  }\n\n  _replaceInitialOrInherit(property, value) {\n    let match = INITIAL_INHERIT.exec(value);\n    if (match) {\n      if (match[1]) {\n        // initial\n        // replace `initial` with the concrete initial value for this property\n        value = ApplyShim._getInitialValueForProperty(property);\n      } else {\n        // inherit\n        // with this purposfully illegal value, the variable will be invalid at\n        // compute time (https://www.w3.org/TR/css-variables/#invalid-at-computed-value-time)\n        // and for inheriting values, will behave similarly\n        // we cannot support the same behavior for non inheriting values like 'border'\n        value = 'apply-shim-inherit';\n      }\n    }\n    return value;\n  }\n\n  // \"parse\" a mixin definition into a map of properties and values\n  // cssTextToMap('border: 2px solid black') -> ('border', '2px solid black')\n  _cssTextToMap(text) {\n    let props = text.split(';');\n    let property, value;\n    let out = {};\n    for (let i = 0, p, sp; i < props.length; i++) {\n      p = props[i];\n      if (p) {\n        sp = p.split(':');\n        // ignore lines that aren't definitions like @media\n        if (sp.length > 1) {\n          property = sp[0].trim();\n          // some properties may have ':' in the value, like data urls\n          value = this._replaceInitialOrInherit(property, sp.slice(1).join(':'));\n          out[property] = value;\n        }\n      }\n    }\n    return out;\n  }\n\n  _invalidateMixinEntry(mixinEntry) {\n    for (let elementName in mixinEntry.dependants) {\n      if (elementName !== this._currentTemplate) {\n        mixinEntry.dependants[elementName].__applyShimInvalid = true;\n      }\n    }\n  }\n\n  _produceCssProperties(matchText, propertyName, valueProperty, valueMixin) {\n    // handle case where property value is a mixin\n    if (valueProperty) {\n      // form: --mixin2: var(--mixin1), where --mixin1 is in the map\n      processVariableAndFallback(valueProperty, (prefix, value) => {\n        if (value && this._map.get(value)) {\n          valueMixin = '@apply ' + value + ';';\n        }\n      });\n    }\n    if (!valueMixin) {\n      return matchText;\n    }\n    let mixinAsProperties = this._consumeCssProperties(valueMixin);\n    let prefix = matchText.slice(0, matchText.indexOf('--'));\n    let mixinValues = this._cssTextToMap(mixinAsProperties);\n    let combinedProps = mixinValues;\n    let mixinEntry = this._map.get(propertyName);\n    let oldProps = mixinEntry && mixinEntry.properties;\n    if (oldProps) {\n      // NOTE: since we use mixin, the map of properties is updated here\n      // and this is what we want.\n      combinedProps = Object.assign(Object.create(oldProps), mixinValues);\n    } else {\n      this._map.set(propertyName, combinedProps);\n    }\n    let out = [];\n    let p, v;\n    // set variables defined by current mixin\n    let needToInvalidate = false;\n    for (p in combinedProps) {\n      v = mixinValues[p];\n      // if property not defined by current mixin, set initial\n      if (v === undefined) {\n        v = 'initial';\n      }\n      if (oldProps && !(p in oldProps)) {\n        needToInvalidate = true;\n      }\n      out.push(propertyName + MIXIN_VAR_SEP + p + ': ' + v);\n    }\n    if (needToInvalidate) {\n      this._invalidateMixinEntry(mixinEntry);\n    }\n    if (mixinEntry) {\n      mixinEntry.properties = combinedProps;\n    }\n    // because the mixinMap is global, the mixin might conflict with\n    // a different scope's simple variable definition:\n    // Example:\n    // some style somewhere:\n    // --mixin1:{ ... }\n    // --mixin2: var(--mixin1);\n    // some other element:\n    // --mixin1: 10px solid red;\n    // --foo: var(--mixin1);\n    // In this case, we leave the original variable definition in place.\n    if (valueProperty) {\n      prefix = matchText + ';' + prefix;\n    }\n    return prefix + out.join('; ') + ';';\n  }\n}\n\nlet applyShim = new ApplyShim();\nwindow['ApplyShim'] = applyShim;\nexport default applyShim;\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n'use strict';\n\nimport {parse} from './css-parse'\nimport {nativeShadow, nativeCssVariables, nativeCssApply} from './style-settings'\nimport {StyleTransformer} from './style-transformer'\nimport * as StyleUtil from './style-util'\nimport {StyleProperties} from './style-properties'\nimport {templateMap} from './template-map'\nimport {placeholderMap} from './style-placeholder'\nimport StyleInfo from './style-info'\n\n// TODO(dfreedm): consider spliting into separate global\nimport ApplyShim from './apply-shim'\n\nexport let ShadyCSS = {\n  scopeCounter: {},\n  nativeShadow: nativeShadow,\n  nativeCss: nativeCssVariables,\n  nativeCssApply: nativeCssApply,\n  _documentOwner: document.documentElement,\n  _documentOwnerStyleInfo: StyleInfo.set(document.documentElement, new StyleInfo({rules: []})),\n  _generateScopeSelector(name) {\n    let id = this.scopeCounter[name] = (this.scopeCounter[name] || 0) + 1;\n    return name + '-' + id;\n  },\n  getStyleAst(style) {\n    return StyleUtil.rulesForStyle(style);\n  },\n  styleAstToString(ast) {\n    return StyleUtil.toCssText(ast);\n  },\n  _gatherStyles(template) {\n    let styles = template.content.querySelectorAll('style');\n    let cssText = [];\n    for (let i = 0; i < styles.length; i++) {\n      let s = styles[i];\n      cssText.push(s.textContent);\n      s.parentNode.removeChild(s);\n    }\n    return cssText.join('').trim();\n  },\n  _getCssBuild(template) {\n    let style = template.content.querySelector('style');\n    if (!style) {\n      return '';\n    }\n    return style.getAttribute('css-build') || '';\n  },\n  prepareTemplate(template, elementName, typeExtension) {\n    if (template._prepared) {\n      return;\n    }\n    template._prepared = true;\n    template.name = elementName;\n    template.extends = typeExtension;\n    templateMap[elementName] = template;\n    let cssBuild = this._getCssBuild(template);\n    let cssText = this._gatherStyles(template);\n    let info = {\n      is: elementName,\n      extends: typeExtension,\n      __cssBuild: cssBuild\n    };\n    if (!this.nativeShadow) {\n      StyleTransformer.dom(template.content, elementName);\n    }\n    let ast = parse(cssText);\n    if (this.nativeCss && !this.nativeCssApply) {\n      ApplyShim.transformRules(ast, elementName);\n    }\n    template._styleAst = ast;\n\n    let ownPropertyNames = [];\n    if (!this.nativeCss) {\n      ownPropertyNames = StyleProperties.decorateStyles(template._styleAst, info);\n    }\n    if (!ownPropertyNames.length || this.nativeCss) {\n      let root = this.nativeShadow ? template.content : null;\n      let placeholder = placeholderMap[elementName];\n      let style = this._generateStaticStyle(info, template._styleAst, root, placeholder);\n      template._style = style;\n    }\n    template._ownPropertyNames = ownPropertyNames;\n  },\n  _generateStaticStyle(info, rules, shadowroot, placeholder) {\n    let cssText = StyleTransformer.elementStyles(info, rules);\n    if (cssText.length) {\n      return StyleUtil.applyCss(cssText, info.is, shadowroot, placeholder);\n    }\n  },\n  _prepareHost(host) {\n    let is = host.getAttribute('is') || host.localName;\n    let typeExtension;\n    if (is !== host.localName) {\n      typeExtension = host.localName;\n    }\n    let placeholder = placeholderMap[is];\n    let template = templateMap[is];\n    let ast;\n    let ownStylePropertyNames;\n    let cssBuild;\n    if (template) {\n      ast = template._styleAst;\n      ownStylePropertyNames = template._ownPropertyNames;\n      cssBuild = template._cssBuild;\n    }\n    return StyleInfo.set(host,\n      new StyleInfo(\n        ast,\n        placeholder,\n        ownStylePropertyNames,\n        is,\n        typeExtension,\n        cssBuild\n      )\n    );\n  },\n  applyStyle(host, overrideProps) {\n    if (window.CustomStyle) {\n      let CS = window.CustomStyle;\n      if (CS._documentDirty) {\n        CS.findStyles();\n        if (!this.nativeCss) {\n          this._updateProperties(this._documentOwner, this._documentOwnerStyleInfo);\n        } else if (!this.nativeCssApply) {\n          CS._revalidateApplyShim();\n        }\n        CS.applyStyles();\n        CS._documentDirty = false;\n      }\n    }\n    let styleInfo = StyleInfo.get(host);\n    if (!styleInfo) {\n      styleInfo = this._prepareHost(host);\n    }\n    let is = host.getAttribute('is') || host.localName;\n    Object.assign(styleInfo.overrideStyleProperties, overrideProps);\n    if (this.nativeCss) {\n      let template = templateMap[is];\n      if (template && template.__applyShimInvalid && template._style) {\n        // update template\n        ApplyShim.transformRules(template._styleAst, is);\n        template._style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        // update instance if native shadowdom\n        if (this.nativeShadow) {\n          let style = host.shadowRoot.querySelector('style');\n          style.textContent = StyleTransformer.elementStyles(host, styleInfo.styleRules);\n        }\n        styleInfo.styleRules = template._styleAst;\n      }\n      this._updateNativeProperties(host, styleInfo.overrideStyleProperties);\n    } else {\n      this._updateProperties(host, styleInfo);\n      if (styleInfo.ownStylePropertyNames && styleInfo.ownStylePropertyNames.length) {\n        // TODO: use caching\n        this._applyStyleProperties(host, styleInfo);\n      }\n      let root = this._isRootOwner(host) ? host : host.shadowRoot;\n      // note: some elements may not have a root!\n      if (root) {\n        this._applyToDescendants(root);\n      }\n    }\n  },\n  _applyToDescendants(root) {\n    let c$ = root.children;\n    for (let i = 0, c; i < c$.length; i++) {\n      c = c$[i];\n      if (c.shadowRoot) {\n        this.applyStyle(c);\n      }\n      this._applyToDescendants(c);\n    }\n  },\n  _styleOwnerForNode(node) {\n    let root = node.getRootNode();\n    let host = root.host;\n    if (host) {\n      if (StyleInfo.get(host)) {\n        return host;\n      } else {\n        return this._styleOwnerForNode(host);\n      }\n    }\n    return this._documentOwner;\n  },\n  _isRootOwner(node) {\n    return (node === this._documentOwner);\n  },\n  _applyStyleProperties(host, styleInfo) {\n    let is = host.getAttribute('is') || host.localName;\n    let oldScopeSelector = styleInfo.scopeSelector;\n    styleInfo.scopeSelector = this._generateScopeSelector(is);\n    let style = StyleProperties.applyElementStyle(host, styleInfo.styleProperties, styleInfo.scopeSelector, null);\n    if (!this.nativeShadow) {\n      StyleProperties.applyElementScopeSelector(host, styleInfo.scopeSelector, oldScopeSelector);\n    }\n    return style;\n  },\n  _updateProperties(host, styleInfo) {\n    let owner = this._styleOwnerForNode(host);\n    let ownerStyleInfo = StyleInfo.get(owner);\n    let ownerProperties = ownerStyleInfo.styleProperties;\n    let props = Object.create(ownerProperties || null);\n    let hostAndRootProps = StyleProperties.hostAndRootPropertiesForScope(host, styleInfo.styleRules);\n    let propertiesMatchingHost = StyleProperties.propertyDataFromStyles(ownerStyleInfo.styleRules, host).properties;\n    Object.assign(\n      props,\n      hostAndRootProps.hostProps,\n      propertiesMatchingHost,\n      hostAndRootProps.rootProps\n    );\n    this._mixinOverrideStyles(props, styleInfo.overrideStyleProperties);\n    StyleProperties.reify(props);\n    styleInfo.styleProperties = props;\n    let ownProps = {};\n    if (styleInfo.ownStylePropertyNames) {\n      for (let i = 0, n; i < styleInfo.ownStylePropertyNames.length; i++) {\n        n = styleInfo.ownStylePropertyNames[i];\n        ownProps[n] = props[n];\n      }\n    }\n    styleInfo.ownStyleProperties = ownProps;\n  },\n  _mixinOverrideStyles(props, overrides) {\n    for (let p in overrides) {\n      let v = overrides[p];\n      // skip override props if they are not truthy or 0\n      // in order to fall back to inherited values\n      if (v || v === 0) {\n        props[p] = v;\n      }\n    }\n  },\n  _updateNativeProperties(element, properties) {\n    // remove previous properties\n    for (let p in properties) {\n      // NOTE: for bc with shim, don't apply null values.\n      if (p === null) {\n        element.style.removeProperty(p);\n      } else {\n        element.style.setProperty(p, properties[p]);\n      }\n    }\n  },\n  updateStyles(properties) {\n    if (window.CustomStyle) {\n      window.CustomStyle._documentDirty = true;\n    }\n    this.applyStyle(this._documentOwner, properties);\n  },\n  /* Custom Style operations */\n  _transformCustomStyleForDocument(style) {\n    let ast = StyleUtil.rulesForStyle(style);\n    StyleUtil.forEachRule(ast, (rule) => {\n      if (nativeShadow) {\n        StyleTransformer.normalizeRootSelector(rule);\n      } else {\n        StyleTransformer.documentRule(rule);\n      }\n      if (this.nativeCss && !this.nativeCssApply) {\n        ApplyShim.transformRule(rule);\n      }\n    });\n    if (this.nativeCss) {\n      style.textContent = StyleUtil.toCssText(ast);\n    } else {\n      this._documentOwnerStyleInfo.styleRules.rules.push(ast);\n    }\n  },\n  _revalidateApplyShim(style) {\n    if (this.nativeCss && !this.nativeCssApply) {\n      let ast = StyleUtil.rulesForStyle(style);\n      ApplyShim.transformRules(ast);\n      style.textContent = StyleUtil.toCssText(ast);\n    }\n  },\n  _applyCustomStyleToDocument(style) {\n    if (!this.nativeCss) {\n      StyleProperties.applyCustomStyle(style, this._documentOwnerStyleInfo.styleProperties);\n    }\n  }\n}\n\nwindow['ShadyCSS'] = ShadyCSS;\n","/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n\n/*\nWrapper over <style> elements to co-operate with ShadyCSS\n\nExample:\n<shady-style>\n  <style>\n  ...\n  </style>\n</shady-style>\n*/\n\n'use strict';\n\nlet ShadyCSS = window.ShadyCSS;\n\nlet enqueued = false;\n\nlet customStyles = [];\n\nlet hookFn = null;\n\n/*\nIf a page only has <custom-style> elements, it will flash unstyled content,\nas all the instances will boot asynchronously after page load.\n\nCalling ShadyCSS.updateStyles() will force the work to happen synchronously\n*/\nfunction enqueueDocumentValidation() {\n  if (enqueued) {\n    return;\n  }\n  enqueued = true;\n  if (window.HTMLImports) {\n    window.HTMLImports.whenReady(validateDocument);\n  } else if (document.readyState === 'complete') {\n    requestAnimationFrame(validateDocument);\n  } else {\n    document.addEventListener('readystatechange', function() {\n      if (document.readyState === 'complete') {\n        validateDocument();\n      }\n    });\n  }\n}\n\nfunction validateDocument() {\n  if (enqueued) {\n    ShadyCSS.updateStyles();\n    enqueued = false;\n  }\n}\n\nfunction CustomStyle() {\n  /*\n  Use Reflect to invoke the HTMLElement constructor, or rely on the\n  CustomElement polyfill replacement that can be `.call`ed\n  */\n  const self = (window.Reflect && Reflect.construct)\n    ? Reflect.construct(HTMLElement, [], this.constructor || CustomStyle)\n    : HTMLElement.call(this);\n  customStyles.push(self);\n  enqueueDocumentValidation();\n  return self;\n}\n\nObject.defineProperties(CustomStyle, {\n  /*\n  CustomStyle.processHook is provided to customize the <style> element child of\n  a <custom-style> element before the <style> is processed by ShadyCSS\n\n  The function must take a <style> element as input, and return nothing.\n  */\n  processHook: {\n    get() {\n      return hookFn;\n    },\n    set(fn) {\n      hookFn = fn;\n      return fn;\n    }\n  },\n  _customStyles: {\n    get() {\n      return customStyles;\n    }\n  },\n  _documentDirty: {\n    get() {\n      return enqueued;\n    },\n    set(value) {\n      enqueued = value;\n      return value;\n    }\n  }\n});\n\nCustomStyle.findStyles = function() {\n  for (let i = 0; i < customStyles.length; i++) {\n    customStyles[i]._findStyle();\n  }\n};\n\nCustomStyle._revalidateApplyShim = function() {\n  for (let i = 0; i < customStyles.length; i++) {\n    let s = customStyles[i];\n    if (s._style) {\n      ShadyCSS._revalidateApplyShim(s._style);\n    }\n  }\n}\n\nCustomStyle.applyStyles = function() {\n  for (let i = 0; i < customStyles.length; i++) {\n    customStyles[i]._applyStyle();\n  }\n};\n\nCustomStyle.prototype = Object.create(HTMLElement.prototype, {\n  'constructor': {\n    value: CustomStyle,\n    configurable: true,\n    writable: true\n  }\n});\n\nCustomStyle.prototype._findStyle = function() {\n  if (!this._style) {\n    let style = this.querySelector('style');\n    if (!style) {\n      return;\n    }\n    // HTMLImports polyfill may have cloned the style into the main document,\n    // which is referenced with __appliedStyle.\n    // Also, we must copy over the attributes.\n    if (style.__appliedStyle) {\n      for (let i = 0; i < style.attributes.length; i++) {\n        let attr = style.attributes[i];\n        style.__appliedStyle.setAttribute(attr.name, attr.value);\n      }\n    }\n    this._style = style.__appliedStyle || style;\n    if (hookFn) {\n      hookFn(this._style);\n    }\n    ShadyCSS._transformCustomStyleForDocument(this._style);\n  }\n};\n\nCustomStyle.prototype._applyStyle = function() {\n  if (this._style) {\n    ShadyCSS._applyCustomStyleToDocument(this._style);\n  }\n};\n\nwindow.customElements.define('custom-style', CustomStyle);\nwindow['CustomStyle'] = CustomStyle;\n"],"sourceRoot":"/source/"}